  [1m[35m (52.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) PRIMARY KEY) ENGINE=InnoDB[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (25.9ms)[0m  [1m[34mSELECT GET_LOCK('1177725352576559115', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (15.2ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to DeviseCreateWorkers (20170217075940)
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE `workers` (`id` int AUTO_INCREMENT PRIMARY KEY, `email` varchar(255) DEFAULT '' NOT NULL, `encrypted_password` varchar(255) DEFAULT '' NOT NULL, `reset_password_token` varchar(255), `reset_password_sent_at` datetime, `remember_created_at` datetime, `sign_in_count` int DEFAULT 0 NOT NULL, `current_sign_in_at` datetime, `last_sign_in_at` datetime, `current_sign_in_ip` varchar(255), `last_sign_in_ip` varchar(255), `locked_at` datetime, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (195.5ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_workers_on_email`  ON `workers` (`email`) [0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_workers_on_reset_password_token`  ON `workers` (`reset_password_token`) [0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (110.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170217075940')[0m
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCategories (20170217100430)
  [1m[35m (20.9ms)[0m  [1m[35mCREATE TABLE `categories` (`id` int AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `logo` varchar(255), `is_del` tinyint(1) DEFAULT 0, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170217100430')[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20170218050238)
  [1m[35m (59.8ms)[0m  [1m[35mCREATE TABLE `products` (`id` int AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `logo` varchar(255), `is_del` tinyint(1) DEFAULT 0, `category_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_products_on_category_id`  (`category_id`), CONSTRAINT `fk_rails_fb915499a4`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170218050238')[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to RolifyCreateRoles (20170218142304)
DEPRECATION WARNING: Directly inheriting from ActiveRecord::Migration is deprecated. Please specify the Rails release the migration was written for:

  class RolifyCreateRoles < ActiveRecord::Migration[4.2] (called from block in execute at /home/user/.rvm/gems/ruby-2.4.0@global/gems/rake-12.0.0/lib/rake/task.rb:250)
  [1m[35m (13.8ms)[0m  [1m[35mCREATE TABLE `roles` (`id` int AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `resource_type` varchar(255), `resource_id` int, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE `workers_roles` (`worker_id` int, `role_id` int) ENGINE=InnoDB[0m
  [1m[35m (24.3ms)[0m  [1m[35mCREATE  INDEX `index_roles_on_name`  ON `roles` (`name`) [0m
  [1m[35m (26.5ms)[0m  [1m[35mCREATE  INDEX `index_roles_on_name_and_resource_type_and_resource_id`  ON `roles` (`name`, `resource_type`, `resource_id`) [0m
  [1m[35m (82.2ms)[0m  [1m[35mCREATE  INDEX `index_workers_roles_on_worker_id_and_role_id`  ON `workers_roles` (`worker_id`, `role_id`) [0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170218142304')[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAddresses (20170220051609)
  [1m[35m (35.8ms)[0m  [1m[35mCREATE TABLE `addresses` (`id` int AUTO_INCREMENT PRIMARY KEY, `address` varchar(255), `lat` decimal(10,6), `lng` decimal(10,6), `comment` varchar(255), `addressable_type` varchar(255), `addressable_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (49.6ms)[0m  [1m[35mCREATE  INDEX `index_addresses_on_addressable_type_and_addressable_id`  ON `addresses` (`addressable_type`, `addressable_id`) [0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170220051609')[0m
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateStations (20170221014839)
  [1m[35m (318.6ms)[0m  [1m[35mCREATE TABLE `stations` (`id` int AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170221014839')[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCouriersStations (20170221020032)
  [1m[35m (98.1ms)[0m  [1m[35mCREATE TABLE `couriers_stations` (`id` int AUTO_INCREMENT PRIMARY KEY, `courier_id` int, `station_id` int,  INDEX `index_couriers_stations_on_courier_id`  (`courier_id`),  INDEX `index_couriers_stations_on_station_id`  (`station_id`)) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170221020032')[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFactoriesStations (20170221055331)
  [1m[35m (149.7ms)[0m  [1m[35mCREATE TABLE `factories_stations` (`id` int AUTO_INCREMENT PRIMARY KEY, `factory_id` int, `station_id` int,  INDEX `index_factories_stations_on_factory_id`  (`factory_id`),  INDEX `index_factories_stations_on_station_id`  (`station_id`)) ENGINE=InnoDB[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170221055331')[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRegions (20170221061958)
  [1m[35m (40.9ms)[0m  [1m[35mCREATE TABLE `regions` (`id` int AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `parent_id` int, `level` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE  INDEX `index_regions_on_parent_id`  ON `regions` (`parent_id`) [0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170221061958')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRegionIdToStation (20170221072426)
  [1m[35m (227.9ms)[0m  [1m[35mALTER TABLE `stations` ADD `region_id` int[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE  INDEX `index_stations_on_region_id`  ON `stations` (`region_id`) [0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170221072426')[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCities (20170222033846)
  [1m[35m (28.0ms)[0m  [1m[35mCREATE TABLE `cities` (`id` int AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `region_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_cities_on_region_id`  (`region_id`), CONSTRAINT `fk_rails_e0ef2914ca`
FOREIGN KEY (`region_id`)
  REFERENCES `regions` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170222033846')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCitiesWorkers (20170222074032)
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE `cities_workers` (`id` int AUTO_INCREMENT PRIMARY KEY, `city_id` int, `worker_id` int,  INDEX `index_cities_workers_on_city_id`  (`city_id`),  INDEX `index_cities_workers_on_worker_id`  (`worker_id`)) ENGINE=InnoDB[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170222074032')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDisplayNameAndCommentToRoles (20170222081256)
  [1m[35m (147.9ms)[0m  [1m[35mALTER TABLE `roles` ADD `display_name` varchar(255)[0m
  [1m[35m (73.2ms)[0m  [1m[35mALTER TABLE `roles` ADD `comment` varchar(255)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170222081256')[0m
  [1m[35m (19.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePrices (20170222092357)
  [1m[35m (16.9ms)[0m  [1m[35mCREATE TABLE `prices` (`id` int AUTO_INCREMENT PRIMARY KEY, `price1` float DEFAULT 0.0, `price2` float DEFAULT 0.0, `price3` float DEFAULT 0.0, `price4` float DEFAULT 0.0, `price5` float DEFAULT 0.0, `price6` float DEFAULT 0.0, `product_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_prices_on_product_id`  (`product_id`), CONSTRAINT `fk_rails_b8ee0bfea1`
FOREIGN KEY (`product_id`)
  REFERENCES `products` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170222092357')[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePriceRules (20170222151520)
  [1m[35m (26.2ms)[0m  [1m[35mCREATE TABLE `price_rules` (`id` int AUTO_INCREMENT PRIMARY KEY, `grade` int, `city_id` int, `category_id` int, `from_date` date, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_price_rules_on_city_id`  (`city_id`),  INDEX `index_price_rules_on_category_id`  (`category_id`), CONSTRAINT `fk_rails_83ffc065e0`
FOREIGN KEY (`city_id`)
  REFERENCES `cities` (`id`)
, CONSTRAINT `fk_rails_eb7b443a9f`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170222151520')[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCategoriesCities (20170222153418)
  [1m[35m (18.2ms)[0m  [1m[35mCREATE TABLE `categories_cities` (`id` int AUTO_INCREMENT PRIMARY KEY, `city_id` int, `category_id` int,  INDEX `index_categories_cities_on_city_id`  (`city_id`),  INDEX `index_categories_cities_on_category_id`  (`category_id`), CONSTRAINT `fk_rails_5782bedd27`
FOREIGN KEY (`city_id`)
  REFERENCES `cities` (`id`)
, CONSTRAINT `fk_rails_bac669e2a1`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170222153418')[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrders (20170223021159)
  [1m[35m (13.1ms)[0m  [1m[35mCREATE TABLE `orders` (`id` int AUTO_INCREMENT PRIMARY KEY, `category_id` int, `user_id` int, `address_id` int, `total_price` float, `status` int DEFAULT 0, `courier_status` int DEFAULT 0, `voucher_status` int DEFAULT 0, `cleaning_status` int DEFAULT 0, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_orders_on_category_id`  (`category_id`),  INDEX `index_orders_on_user_id`  (`user_id`),  INDEX `index_orders_on_address_id`  (`address_id`), CONSTRAINT `fk_rails_3dd05aae5e`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_f868b47f6a`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_774ef80392`
FOREIGN KEY (`address_id`)
  REFERENCES `addresses` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('1177725352576559115')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('1177725352576559115', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateOrders (20170223021159)
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE `orders` (`id` int AUTO_INCREMENT PRIMARY KEY, `category_id` int, `user_id` int, `address_id` int, `total_price` float, `status` int DEFAULT 0, `courier_status` int DEFAULT 0, `voucher_status` int DEFAULT 0, `cleaning_status` int DEFAULT 0, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_orders_on_category_id`  (`category_id`),  INDEX `index_orders_on_user_id`  (`user_id`),  INDEX `index_orders_on_address_id`  (`address_id`), CONSTRAINT `fk_rails_3dd05aae5e`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_f868b47f6a`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_774ef80392`
FOREIGN KEY (`address_id`)
  REFERENCES `addresses` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('1177725352576559115')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('1177725352576559115', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateOrders (20170223021159)
  [1m[35m (15.8ms)[0m  [1m[35mCREATE TABLE `orders` (`id` int AUTO_INCREMENT PRIMARY KEY, `category_id` int, `user_id` int, `address_id` int, `total_price` float, `status` int DEFAULT 0, `courier_status` int DEFAULT 0, `voucher_status` int DEFAULT 0, `cleaning_status` int DEFAULT 0, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_orders_on_category_id`  (`category_id`),  INDEX `index_orders_on_user_id`  (`user_id`),  INDEX `index_orders_on_address_id`  (`address_id`), CONSTRAINT `fk_rails_3dd05aae5e`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_f868b47f6a`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_774ef80392`
FOREIGN KEY (`address_id`)
  REFERENCES `addresses` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT RELEASE_LOCK('1177725352576559115')[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT GET_LOCK('1177725352576559115', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateOrders (20170223021159)
  [1m[35m (36.0ms)[0m  [1m[35mCREATE TABLE `orders` (`id` int AUTO_INCREMENT PRIMARY KEY, `category_id` int, `user_id` int, `address_id` int, `total_price` float, `status` int DEFAULT 0, `courier_status` int DEFAULT 0, `voucher_status` int DEFAULT 0, `cleaning_status` int DEFAULT 0, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_orders_on_category_id`  (`category_id`),  INDEX `index_orders_on_user_id`  (`user_id`),  INDEX `index_orders_on_address_id`  (`address_id`), CONSTRAINT `fk_rails_3dd05aae5e`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_f868b47f6a`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_774ef80392`
FOREIGN KEY (`address_id`)
  REFERENCES `addresses` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170223021159')[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWaybills (20170223063134)
  [1m[35m (29.6ms)[0m  [1m[35mCREATE TABLE `waybills` (`id` int AUTO_INCREMENT PRIMARY KEY, `status` int DEFAULT 0, `sender_type` varchar(255), `sender_id` int, `receiver_type` varchar(255), `receiver_id` int, `waybill_id` int, `exp_time` datetime, `actual_time` datetime, `order_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_waybills_on_waybill_id`  (`waybill_id`),  INDEX `index_waybills_on_order_id`  (`order_id`), CONSTRAINT `fk_rails_7ce9a1fb31`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (23.4ms)[0m  [1m[35mCREATE  INDEX `index_waybills_on_sender_type_and_sender_id`  ON `waybills` (`sender_type`, `sender_id`) [0m
  [1m[35m (15.3ms)[0m  [1m[35mCREATE  INDEX `index_waybills_on_receiver_type_and_receiver_id`  ON `waybills` (`receiver_type`, `receiver_id`) [0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170223063134')[0m
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCurrentWaybillIdToOrders (20170223063345)
  [1m[35m (48.0ms)[0m  [1m[35mALTER TABLE `orders` ADD `waybill_id` int[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE  INDEX `index_orders_on_waybill_id`  ON `orders` (`waybill_id`) [0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170223063345')[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateItems (20170227073145)
  [1m[35m (14.7ms)[0m  [1m[35mCREATE TABLE `items` (`id` int AUTO_INCREMENT PRIMARY KEY, `amount` int, `price` float, `product_id` int, `order_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_items_on_product_id`  (`product_id`),  INDEX `index_items_on_order_id`  (`order_id`), CONSTRAINT `fk_rails_9a56345cfd`
FOREIGN KEY (`product_id`)
  REFERENCES `products` (`id`)
, CONSTRAINT `fk_rails_53153f3b4b`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170227073145')[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProductItems (20170227085655)
  [1m[35m (27.4ms)[0m  [1m[35mCREATE TABLE `product_items` (`id` int AUTO_INCREMENT PRIMARY KEY, `serial` varchar(255), `status` int DEFAULT 0, `order_id` int, `product_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_product_items_on_order_id`  (`order_id`),  INDEX `index_product_items_on_product_id`  (`product_id`), CONSTRAINT `fk_rails_02ba65545e`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
, CONSTRAINT `fk_rails_00f7aa94fd`
FOREIGN KEY (`product_id`)
  REFERENCES `products` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170227085655')[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddFactoryIdToOrders (20170227091333)
  [1m[35m (42.9ms)[0m  [1m[35mALTER TABLE `orders` ADD `factory_id` int[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX `index_orders_on_factory_id`  ON `orders` (`factory_id`) [0m
  [1m[35m (6.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170227091333')[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserCards (20170228070846)
  [1m[35m (200.9ms)[0m  [1m[35mCREATE TABLE `user_cards` (`id` int AUTO_INCREMENT PRIMARY KEY, `real_money` float DEFAULT 0.0, `fake_money` float DEFAULT 0.0, `user_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_user_cards_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_5826569569`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
) ENGINE=InnoDB[0m
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `user_cards` (`user_id`, `created_at`, `updated_at`) VALUES (1, '2017-05-25 22:47:51', '2017-05-25 22:47:51')[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUserCard Load (14.9ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170228070846')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserCardLogs (20170228144849)
  [1m[35m (107.6ms)[0m  [1m[35mCREATE TABLE `user_card_logs` (`id` int AUTO_INCREMENT PRIMARY KEY, `kind` int DEFAULT 0, `real_money` float DEFAULT 0.0, `fake_money` float DEFAULT 0.0, `loggable_type` varchar(255), `loggable_id` int, `user_card_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_user_card_logs_on_user_card_id`  (`user_card_id`)) ENGINE=InnoDB[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE  INDEX `index_user_card_logs_on_loggable_type_and_loggable_id`  ON `user_card_logs` (`loggable_type`, `loggable_id`) [0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170228144849')[0m
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVouchers (20170228154139)
  [1m[35m (22.0ms)[0m  [1m[35mCREATE TABLE `vouchers` (`id` int AUTO_INCREMENT PRIMARY KEY, `order_id` int, `status` int DEFAULT 0, `payed_at` datetime, `money` float, `user_card_pay` float DEFAULT 0.0, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_vouchers_on_order_id`  (`order_id`), CONSTRAINT `fk_rails_dad762264d`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170228154139')[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserCardChargeSettings (20170301063853)
  [1m[35m (24.7ms)[0m  [1m[35mCREATE TABLE `user_card_charge_settings` (`id` int AUTO_INCREMENT PRIMARY KEY, `min` float DEFAULT 0.0, `money_give` float DEFAULT 0.0, `city_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_user_card_charge_settings_on_city_id`  (`city_id`), CONSTRAINT `fk_rails_3662e32833`
FOREIGN KEY (`city_id`)
  REFERENCES `cities` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170301063853')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveCityIdFromUserCardChargeSettings (20170420085347)
  [1m[35m (11.7ms)[0m  [1m[35mALTER TABLE `user_card_charge_settings` DROP FOREIGN KEY fk_rails_3662e32833[0m
  [1m[35m (33.6ms)[0m  [1m[35mALTER TABLE `user_card_charge_settings` DROP `city_id`[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170420085347')[0m
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCouponLists (20170421075623)
  [1m[35m (15.5ms)[0m  [1m[35mCREATE TABLE `coupon_lists` (`id` int AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `validity_type` int, `valid_from` date, `valid_to` date, `fixed_begin_term` int, `fixed_term` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170421075623')[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrderPromotions (20170421082835)
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE `order_promotions` (`id` int AUTO_INCREMENT PRIMARY KEY, `kind` int, `discount` float, `premise` float, `coupon_list_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_order_promotions_on_coupon_list_id`  (`coupon_list_id`)) ENGINE=InnoDB[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170421082835')[0m
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePromotionRules (20170421090052)
  [1m[35m (23.3ms)[0m  [1m[35mCREATE TABLE `promotion_rules` (`id` int AUTO_INCREMENT PRIMARY KEY, `coupon_list_id` int, `start_on` date, `end_on` date, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_promotion_rules_on_coupon_list_id`  (`coupon_list_id`), CONSTRAINT `fk_rails_4215db7442`
FOREIGN KEY (`coupon_list_id`)
  REFERENCES `coupon_lists` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (20.6ms)[0m  [1m[35mCREATE TABLE `cities_promotion_rules` (`id` int AUTO_INCREMENT PRIMARY KEY, `city_id` int, `promotion_rule_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_cities_promotion_rules_on_city_id`  (`city_id`),  INDEX `index_cities_promotion_rules_on_promotion_rule_id`  (`promotion_rule_id`)) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170421090052')[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCoupons (20170421094816)
  [1m[35m (24.2ms)[0m  [1m[35mCREATE TABLE `coupons` (`id` int AUTO_INCREMENT PRIMARY KEY, `coupon_list_id` int, `user_id` int, `valid_from` date, `valid_to` date, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_coupons_on_coupon_list_id`  (`coupon_list_id`),  INDEX `index_coupons_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_ff28daec78`
FOREIGN KEY (`coupon_list_id`)
  REFERENCES `coupon_lists` (`id`)
, CONSTRAINT `fk_rails_69b54b3afe`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170421094816')[0m
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCouponPayAndCouponIdToVouchers (20170421101401)
  [1m[35m (33.7ms)[0m  [1m[35mALTER TABLE `vouchers` ADD `coupon_pay` float DEFAULT 0.0[0m
  [1m[35m (19.4ms)[0m  [1m[35mALTER TABLE `vouchers` ADD `coupon_id` int[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE  INDEX `index_vouchers_on_coupon_id`  ON `vouchers` (`coupon_id`) [0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170421101401')[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUsedToCoupons (20170421102402)
  [1m[35m (113.4ms)[0m  [1m[35mALTER TABLE `coupons` ADD `used` tinyint(1) DEFAULT 0[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170421102402')[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUserCardFakeMoneyPayToVouchers (20170421103109)
  [1m[35m (57.6ms)[0m  [1m[35mALTER TABLE `vouchers` ADD `user_card_fake_money_pay` float DEFAULT 0.0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170421103109')[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRefundedToVouchers (20170421103346)
  [1m[35m (46.1ms)[0m  [1m[35mALTER TABLE `vouchers` ADD `refunded` tinyint(1) DEFAULT 0[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170421103346')[0m
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSettlementRules (20170508100152)
  [1m[35m (17.4ms)[0m  [1m[35mCREATE TABLE `settlement_rules` (`id` int AUTO_INCREMENT PRIMARY KEY, `category_id` int, `city_id` int, `name` varchar(255), `comment` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_settlement_rules_on_category_id`  (`category_id`),  INDEX `index_settlement_rules_on_city_id`  (`city_id`), CONSTRAINT `fk_rails_42d269dd40`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_b8c6322fa8`
FOREIGN KEY (`city_id`)
  REFERENCES `cities` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170508100152')[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSettlementPrices (20170509063255)
  [1m[35m (28.7ms)[0m  [1m[35mCREATE TABLE `settlement_prices` (`id` int AUTO_INCREMENT PRIMARY KEY, `settlement_rule_id` int, `product_id` int, `price` float DEFAULT 0.0, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_settlement_prices_on_settlement_rule_id`  (`settlement_rule_id`),  INDEX `index_settlement_prices_on_product_id`  (`product_id`), CONSTRAINT `fk_rails_e6259d5046`
FOREIGN KEY (`settlement_rule_id`)
  REFERENCES `settlement_rules` (`id`)
, CONSTRAINT `fk_rails_cbce5a341c`
FOREIGN KEY (`product_id`)
  REFERENCES `products` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170509063255')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFactorySettlementRules (20170509081318)
  [1m[35m (27.5ms)[0m  [1m[35mCREATE TABLE `factory_settlement_rules` (`id` int AUTO_INCREMENT PRIMARY KEY, `from_date` date, `priority` int DEFAULT 0, `factory_id` int, `settlement_rule_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_factory_settlement_rules_on_factory_id`  (`factory_id`),  INDEX `index_factory_settlement_rules_on_settlement_rule_id`  (`settlement_rule_id`), CONSTRAINT `fk_rails_475d6f493c`
FOREIGN KEY (`factory_id`)
  REFERENCES `factories` (`id`)
, CONSTRAINT `fk_rails_6c1d7ffa44`
FOREIGN KEY (`settlement_rule_id`)
  REFERENCES `settlement_rules` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT RELEASE_LOCK('1177725352576559115')[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('1177725352576559115', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateFactorySettlementRules (20170509081318)
  [1m[35m (35.1ms)[0m  [1m[35mCREATE TABLE `factory_settlement_rules` (`id` int AUTO_INCREMENT PRIMARY KEY, `from_date` date, `priority` int DEFAULT 0, `factory_id` int, `settlement_rule_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_factory_settlement_rules_on_factory_id`  (`factory_id`),  INDEX `index_factory_settlement_rules_on_settlement_rule_id`  (`settlement_rule_id`), CONSTRAINT `fk_rails_475d6f493c`
FOREIGN KEY (`factory_id`)
  REFERENCES `factories` (`id`)
, CONSTRAINT `fk_rails_6c1d7ffa44`
FOREIGN KEY (`settlement_rule_id`)
  REFERENCES `settlement_rules` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170509081318')[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFactoryProcessRecords (20170510024554)
  [1m[35m (23.2ms)[0m  [1m[35mCREATE TABLE `factory_process_records` (`id` int AUTO_INCREMENT PRIMARY KEY, `factory_id` int, `category_id` int, `product_id` int, `process_on` date, `amount` int DEFAULT 0,  INDEX `index_factory_process_records_on_factory_id`  (`factory_id`),  INDEX `index_factory_process_records_on_category_id`  (`category_id`),  INDEX `index_factory_process_records_on_product_id`  (`product_id`), CONSTRAINT `fk_rails_aafa6b58d0`
FOREIGN KEY (`factory_id`)
  REFERENCES `factories` (`id`)
, CONSTRAINT `fk_rails_bc06e9c2be`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_f447ff84e3`
FOREIGN KEY (`product_id`)
  REFERENCES `products` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (5.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170510024554')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFactorySettlementRecords (20170510025127)
  [1m[35m (28.4ms)[0m  [1m[35mCREATE TABLE `factory_settlement_records` (`id` int AUTO_INCREMENT PRIMARY KEY, `factory_id` int, `category_id` int, `product_id` int, `settlement_on` date, `amount` int DEFAULT 0, `price` float DEFAULT 0.0, `money` float DEFAULT 0.0,  INDEX `index_factory_settlement_records_on_factory_id`  (`factory_id`),  INDEX `index_factory_settlement_records_on_category_id`  (`category_id`),  INDEX `index_factory_settlement_records_on_product_id`  (`product_id`), CONSTRAINT `fk_rails_531a94c359`
FOREIGN KEY (`factory_id`)
  REFERENCES `factories` (`id`)
, CONSTRAINT `fk_rails_e31e197967`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_e6b029541c`
FOREIGN KEY (`product_id`)
  REFERENCES `products` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20170510025127')[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2017-05-25 22:51:23', '2017-05-25 22:51:23')[0m
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT RELEASE_LOCK('1177725352576559115')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (0.4ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `cities_promotion_rules`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `coupon_lists`[0m
  [1m[35m (0.4ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'coupon_lists'[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `coupons`[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `factories`[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'factories'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `factories_stations`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `factory_process_records`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `factory_settlement_records`[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `factory_settlement_rules`[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `items`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `order_promotions`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `orders`[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `product_items`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'product_items'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `promotion_rules`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `regions`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'regions'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW CREATE TABLE `settlement_prices`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `settlement_rules`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'settlement_rules'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `user_card_charge_settings`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `user_card_logs`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_card_logs'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `user_cards`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (0.5ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `vouchers`[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (0.1ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (0.8ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (4.7ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
Started GET "/users" for 127.0.0.1 at 2017-05-25 22:52:12 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by UsersController#index as HTML
Completed 401 Unauthorized in 68ms (ActiveRecord: 0.0ms)


Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-25 22:52:13 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (12.7ms)
  Rendered devise/sessions/new.html.slim within layouts/application (444.9ms)
  Rendered layouts/_menu.slim (73.5ms)
Completed 200 OK in 22105ms (Views: 21994.5ms | ActiveRecord: 3.8ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-25 22:52:40 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:52:40 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/unlock/new" for 127.0.0.1 at 2017-05-25 22:52:56 -0700
Processing by Devise::UnlocksController#new as HTML
  Rendering devise/unlocks/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (28.2ms)
  Rendered devise/unlocks/new.html.slim within layouts/application (64.7ms)
  Rendered layouts/_menu.slim (44.9ms)
Completed 200 OK in 729ms (Views: 686.2ms | ActiveRecord: 0.0ms)


Started POST "/workers/unlock" for 127.0.0.1 at 2017-05-25 22:53:09 -0700
Processing by Devise::UnlocksController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"gpItK8heNYgRM7CjDx/TKjJ5miy4XOsmq0UdKQ1C7O7SGeZwDoBy7cbuy1KBft/lutZg3S8niFbaybi9FYNgkg==", "worker"=>{"email"=>"1960014650@qq.com"}, "commit"=>"Resend unlock instructions"}
  [1m[36mWorker Load (2.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`email` = '1960014650@qq.com' ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering devise/unlocks/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (14.1ms)
  Rendered devise/unlocks/new.html.slim within layouts/application (58.7ms)
  Rendered layouts/_menu.slim (29.9ms)
Completed 200 OK in 1137ms (Views: 996.0ms | ActiveRecord: 2.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:53:10 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 22:53:11 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:53:11 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/sign_up" for 127.0.0.1 at 2017-05-25 22:53:28 -0700
Processing by WorkersController#show as HTML
  Parameters: {"id"=>"sign_up"}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-25 22:53:28 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (12.5ms)
  Rendered devise/sessions/new.html.slim within layouts/application (89.6ms)
  Rendered layouts/_menu.slim (33.2ms)
Completed 200 OK in 950ms (Views: 947.8ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:53:29 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 22:53:30 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:53:30 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/password/new" for 127.0.0.1 at 2017-05-25 22:53:44 -0700
Processing by Devise::PasswordsController#new as HTML
  Rendering devise/passwords/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (26.4ms)
  Rendered devise/passwords/new.html.slim within layouts/application (58.8ms)
  Rendered layouts/_menu.slim (90.3ms)
Completed 200 OK in 1136ms (Views: 1114.4ms | ActiveRecord: 0.0ms)


Started POST "/workers/password" for 127.0.0.1 at 2017-05-25 22:53:50 -0700
Processing by Devise::PasswordsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"FZmx79Uhnt4ve7wJH7AK759AjH/vxRBXClF8zqg3q9JFEnq0E//Zu/imx/iR0QYgF+92jni+cyd73dlasPYnrg==", "worker"=>{"email"=>"1960014650@qq.com"}, "commit"=>"Send me reset password instructions"}
  [1m[36mWorker Load (1.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`email` = '1960014650@qq.com' ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering devise/passwords/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (12.8ms)
  Rendered devise/passwords/new.html.slim within layouts/application (43.5ms)
  Rendered layouts/_menu.slim (31.1ms)
Completed 200 OK in 1080ms (Views: 1052.5ms | ActiveRecord: 1.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:53:51 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 22:53:52 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:53:52 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-25 22:53:57 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (12.2ms)
  Rendered devise/sessions/new.html.slim within layouts/application (56.2ms)
  Rendered layouts/_menu.slim (18.7ms)
Completed 200 OK in 555ms (Views: 553.6ms | ActiveRecord: 0.0ms)


Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-25 22:55:23 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (21.5ms)
  Rendered devise/sessions/new.html.slim within layouts/application (51.2ms)
  Rendered layouts/_menu.slim (29.8ms)
Completed 200 OK in 1116ms (Views: 1084.2ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:55:24 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 22:55:25 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:55:25 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/workers/sign_in" for 127.0.0.1 at 2017-05-25 22:55:29 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZuclUfshmp38SfDCoI3jnIU69ByFec6yMuqYlGP+ixg2bO4KPf/d+CuUizMu7O9TDZUO7RICrcJDZj0Aez8HZA==", "worker"=>{"email"=>"operator@163.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mWorker Load (7.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`email` = 'operator@163.com' ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 401 Unauthorized in 12ms (ActiveRecord: 7.0ms)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZuclUfshmp38SfDCoI3jnIU69ByFec6yMuqYlGP+ixg2bO4KPf/d+CuUizMu7O9TDZUO7RICrcJDZj0Aez8HZA==", "worker"=>{"email"=>"operator@163.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (8.3ms)
  Rendered devise/sessions/new.html.slim within layouts/application (70.6ms)
  Rendered layouts/_menu.slim (46.5ms)
Completed 200 OK in 1341ms (Views: 907.0ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:55:30 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 22:55:31 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:55:31 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/unlock/new" for 127.0.0.1 at 2017-05-25 22:56:17 -0700
Processing by Devise::UnlocksController#new as HTML
  Rendering devise/unlocks/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (15.1ms)
  Rendered devise/unlocks/new.html.slim within layouts/application (42.9ms)
  Rendered layouts/_menu.slim (66.5ms)
Completed 200 OK in 581ms (Views: 578.6ms | ActiveRecord: 0.0ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-25 22:58:03 -0700
Processing by WorkersController#index as HTML
Completed 401 Unauthorized in 25ms (ActiveRecord: 0.0ms)


Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-25 22:58:03 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (29.0ms)
  Rendered devise/sessions/new.html.slim within layouts/application (83.2ms)
  Rendered layouts/_menu.slim (28.7ms)
Completed 200 OK in 1017ms (Views: 1015.3ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:58:04 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 22:58:05 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 22:58:05 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mWorker Exists (43.6ms)[0m  [1m[34mSELECT  1 AS one FROM `workers` WHERE `workers`.`email` = BINARY '16126240@bjtu.edu.cn' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO `workers` (`email`, `encrypted_password`, `created_at`, `updated_at`) VALUES ('16126240@bjtu.edu.cn', '$2a$11$qLR54IfRlF7bRJxVGE4ubupVkIiiSQLo4pnPFaeoy5fDLqGlvKlV6', '2017-05-25 23:08:54', '2017-05-25 23:08:54')[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Started POST "/workers/sign_in" for 127.0.0.1 at 2017-05-25 23:09:28 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"u4kxDnZPhzPsTyWxze8nCeQyhBVrm6U38cSzYmwvPX/rAvpVsJHAVjuSXkBDjivGbJ1+5PzgxkeASBb2dO6xAw==", "worker"=>{"email"=>"16126240@bjtu.edu.cn", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`email` = '16126240@bjtu.edu.cn' ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE `workers` SET `remember_created_at` = '2017-05-25 23:09:29', `updated_at` = '2017-05-25 23:09:29' WHERE `workers`.`id` = 2[0m
  [1m[35m (17.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE `workers` SET `sign_in_count` = 1, `current_sign_in_at` = '2017-05-25 23:09:29', `last_sign_in_at` = '2017-05-25 23:09:29', `current_sign_in_ip` = '127.0.0.1', `last_sign_in_ip` = '127.0.0.1' WHERE `workers`.`id` = 2[0m
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (15.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
Redirected to http://localhost:3000/workers/2
Completed 302 Found in 802ms (ActiveRecord: 53.9ms)


Started GET "/workers/2" for 127.0.0.1 at 2017-05-25 23:09:29 -0700
Processing by WorkersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (6.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
Completed 500 Internal Server Error in 71ms (ActiveRecord: 21.1ms)


  
CanCan::AccessDenied (You are not authorized to access this page.):
  
cancancan (1.16.0) lib/cancan/ability.rb:217:in `authorize!'
cancancan (1.16.0) lib/cancan/controller_additions.rb:352:in `authorize!'
cancancan (1.16.0) lib/cancan/controller_resource.rb:53:in `authorize_resource'
cancancan (1.16.0) lib/cancan/controller_resource.rb:39:in `load_and_authorize_resource'
cancancan (1.16.0) lib/cancan/controller_resource.rb:12:in `block in add_before_action'
activesupport (5.0.2) lib/active_support/callbacks.rb:398:in `instance_exec'
activesupport (5.0.2) lib/active_support/callbacks.rb:398:in `block in make_lambda'
activesupport (5.0.2) lib/active_support/callbacks.rb:169:in `block (2 levels) in halting'
actionpack (5.0.2) lib/abstract_controller/callbacks.rb:12:in `block (2 levels) in <module:Callbacks>'
activesupport (5.0.2) lib/active_support/callbacks.rb:170:in `block in halting'
activesupport (5.0.2) lib/active_support/callbacks.rb:454:in `block in call'
activesupport (5.0.2) lib/active_support/callbacks.rb:454:in `each'
activesupport (5.0.2) lib/active_support/callbacks.rb:454:in `call'
activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
warden (1.2.7) lib/warden/manager.rb:35:in `catch'
warden (1.2.7) lib/warden/manager.rb:35:in `call'
rack (2.0.2) lib/rack/etag.rb:25:in `call'
rack (2.0.2) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.2) lib/rack/head.rb:12:in `call'
rack (2.0.2) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.2) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (6.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (151.1ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:09:30 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/workers/2" for 127.0.0.1 at 2017-05-25 23:10:31 -0700
Processing by WorkersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (15.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (3.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/show.html.slim within layouts/application
  Rendered workers/show.html.slim within layouts/application (20.6ms)
  [1m[36mRole Load (24.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (8.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (454.7ms)
Completed 200 OK in 3141ms (Views: 2851.9ms | ActiveRecord: 125.3ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:10:42 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:10:42 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/2" for 127.0.0.1 at 2017-05-25 23:10:51 -0700
Processing by WorkersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/show.html.slim within layouts/application
  Rendered workers/show.html.slim within layouts/application (14.1ms)
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (52.1ms)
Completed 200 OK in 867ms (Views: 849.4ms | ActiveRecord: 9.6ms)


Started GET "/workers/2" for 127.0.0.1 at 2017-05-25 23:11:01 -0700
Processing by WorkersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (4.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/show.html.slim within layouts/application
  Rendered workers/show.html.slim within layouts/application (31.9ms)
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (115.5ms)
Completed 200 OK in 844ms (Views: 820.3ms | ActiveRecord: 18.4ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:11:04 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (15.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (6.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (70.4ms)
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (84.8ms)
Completed 200 OK in 603ms (Views: 538.2ms | ActiveRecord: 39.7ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:11:15 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (9.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (6.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (46.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (46.2ms)
Completed 200 OK in 392ms (Views: 369.9ms | ActiveRecord: 19.2ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:11:18 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (5.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (6.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (44.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (27.0ms)
Completed 200 OK in 500ms (Views: 474.7ms | ActiveRecord: 19.8ms)


Started GET "/workers/2/edit" for 127.0.0.1 at 2017-05-25 23:11:29 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mRole Load (5.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (4.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (76.7ms)
  [1m[36mRole Load (12.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (7.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (135.1ms)
Completed 200 OK in 805ms (Views: 712.4ms | ActiveRecord: 42.3ms)


Started PATCH "/workers/2" for 127.0.0.1 at 2017-05-25 23:11:33 -0700
Processing by WorkersController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"vYKQ8xiPjnbnj7Kd424KaGUtaBGnM2++cDX6YUGN7+wLBz9RvNvGRehRRDVFI4IEduL7l3GmrYkWemuXM38QAQ==", "worker"=>{"role_ids"=>[""], "city_ids"=>[""]}, "commit"=>"Update Worker", "id"=>"2"}
  [1m[36mWorker Load (4.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (4.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[35m (5.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` WHERE 1=0[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (4.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` WHERE 1=0[0m
  [1m[36mCity Load (3.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/workers
Completed 302 Found in 96ms (ActiveRecord: 26.4ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:11:33 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (8.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (57.4ms)
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (92.4ms)
Completed 200 OK in 1021ms (Views: 996.8ms | ActiveRecord: 20.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:11:34 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:11:35 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:11:35 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/2/edit" for 127.0.0.1 at 2017-05-25 23:11:37 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (7.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (0.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (67.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (53.3ms)
Completed 200 OK in 629ms (Views: 592.3ms | ActiveRecord: 14.7ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:11:42 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (5.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (47.8ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (146.1ms)
Completed 200 OK in 744ms (Views: 727.1ms | ActiveRecord: 13.8ms)


Started GET "/price_rules" for 127.0.0.1 at 2017-05-25 23:11:56 -0700
Processing by PriceRulesController#index as HTML
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/index.html.slim within layouts/application
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered price_rules/index.html.slim within layouts/application (18.3ms)
Completed 500 Internal Server Error in 70ms (ActiveRecord: 1.1ms)


  
ActionView::Template::Error (undefined method `categories' for nil:NilClass):
    1: - current_city.categories.each do |category|
    2:   .panel.panel-default
    3:     .panel-heading
    4:       = category.name
  
app/views/price_rules/index.html.slim:1:in `_app_views_price_rules_index_html_slim__2581862207756099977_70036594720160'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (9.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (9.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (84.0ms)
Started GET "/products" for 127.0.0.1 at 2017-05-25 23:11:57 -0700
  
ActionController::RoutingError (No route matches [GET] "/products"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (10.6ms)
  Rendered collection of /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [266 times] (856.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (54.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (3376.7ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:12:01 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/categories" for 127.0.0.1 at 2017-05-25 23:12:08 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
Completed 500 Internal Server Error in 42ms (ActiveRecord: 1.4ms)


  
CanCan::AccessDenied (You are not authorized to access this page.):
  
cancancan (1.16.0) lib/cancan/ability.rb:217:in `authorize!'
cancancan (1.16.0) lib/cancan/controller_additions.rb:352:in `authorize!'
cancancan (1.16.0) lib/cancan/controller_resource.rb:53:in `authorize_resource'
cancancan (1.16.0) lib/cancan/controller_resource.rb:39:in `load_and_authorize_resource'
cancancan (1.16.0) lib/cancan/controller_resource.rb:12:in `block in add_before_action'
activesupport (5.0.2) lib/active_support/callbacks.rb:398:in `instance_exec'
activesupport (5.0.2) lib/active_support/callbacks.rb:398:in `block in make_lambda'
activesupport (5.0.2) lib/active_support/callbacks.rb:169:in `block (2 levels) in halting'
actionpack (5.0.2) lib/abstract_controller/callbacks.rb:12:in `block (2 levels) in <module:Callbacks>'
activesupport (5.0.2) lib/active_support/callbacks.rb:170:in `block in halting'
activesupport (5.0.2) lib/active_support/callbacks.rb:454:in `block in call'
activesupport (5.0.2) lib/active_support/callbacks.rb:454:in `each'
activesupport (5.0.2) lib/active_support/callbacks.rb:454:in `call'
activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
warden (1.2.7) lib/warden/manager.rb:35:in `catch'
warden (1.2.7) lib/warden/manager.rb:35:in `call'
rack (2.0.2) lib/rack/etag.rb:25:in `call'
rack (2.0.2) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.2) lib/rack/head.rb:12:in `call'
rack (2.0.2) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.2) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (54.0ms)
Started GET "/categories" for 127.0.0.1 at 2017-05-25 23:13:33 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (7.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (1.1ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (259.2ms)
  [1m[36mRole Load (8.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (258.3ms)
Completed 200 OK in 2611ms (Views: 2224.2ms | ActiveRecord: 257.0ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:13:38 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:13:38 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories" for 127.0.0.1 at 2017-05-25 23:13:41 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (5.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (36.2ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (38.2ms)
Completed 200 OK in 509ms (Views: 497.1ms | ActiveRecord: 9.0ms)


Started GET "/categories/new" for 127.0.0.1 at 2017-05-25 23:13:43 -0700
Processing by CategoriesController#new as HTML
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/new.html.slim within layouts/application
  Rendered categories/_form.html.slim (64.7ms)
  Rendered categories/new.html.slim within layouts/application (77.3ms)
  [1m[36mRole Load (6.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (121.0ms)
Completed 200 OK in 981ms (Views: 825.4ms | ActiveRecord: 94.9ms)


Started POST "/categories" for 127.0.0.1 at 2017-05-25 23:14:15 -0700
Processing by CategoriesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"EcVhxzj5DLPtAgwzrmUI7eD2nKphdPLFMq5N31Ty2i6nQM5lnK1EgOLc+psIKICB8zkPLLfhMPJU4dwpJgAlww==", "category"=>{"name"=>"sports shoes"}, "commit"=>"Create Category"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (34.6ms)[0m  [1m[32mINSERT INTO `categories` (`name`, `created_at`, `updated_at`) VALUES ('sports shoes', '2017-05-25 23:14:15', '2017-05-25 23:14:15')[0m
  [1m[35m (37.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 117ms (ActiveRecord: 73.4ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-25 23:14:15 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (7.2ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (11.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered categories/show.html.slim within layouts/application (52.9ms)
  [1m[36mRole Load (7.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (75.7ms)
Completed 200 OK in 1123ms (Views: 970.3ms | ActiveRecord: 39.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:14:16 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:14:17 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:14:17 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/new" for 127.0.0.1 at 2017-05-25 23:14:19 -0700
Processing by ProductsController#new as HTML
  Parameters: {"category_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (2.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/new.html.slim within layouts/application
  Rendered products/_form.html.slim (18.4ms)
  Rendered products/new.html.slim within layouts/application (29.2ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (106.6ms)
Completed 200 OK in 611ms (Views: 549.4ms | ActiveRecord: 14.3ms)


Started GET "/categories/1/products/new" for 127.0.0.1 at 2017-05-25 23:17:44 -0700
Processing by ProductsController#new as HTML
  Parameters: {"category_id"=>"1"}
  [1m[36mWorker Load (18.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (1.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/new.html.slim within layouts/application
  Rendered products/_form.html.slim (31.5ms)
  Rendered products/new.html.slim within layouts/application (44.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (22.6ms)
Completed 200 OK in 390ms (Views: 353.2ms | ActiveRecord: 21.4ms)


Started POST "/categories/1/products" for 127.0.0.1 at 2017-05-25 23:18:16 -0700
Processing by ProductsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"WtOJwp1dFri6Em9tuqedVp4UODY5AnR1nhjE6iG6SpHsViZgOQlei7XMmcUc6hU6jdursO+XtkL4V1UcU0i1fA==", "product"=>{"name"=>"jogging shoes", "logo"=>""}, "commit"=>"Create Product", "category_id"=>"1"}
  [1m[36mWorker Load (6.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (5.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (30.7ms)[0m  [1m[32mINSERT INTO `products` (`name`, `logo`, `category_id`, `created_at`, `updated_at`) VALUES ('jogging shoes', '', 1, '2017-05-25 23:18:16', '2017-05-25 23:18:16')[0m
  [1m[35m (24.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 144ms (ActiveRecord: 67.2ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-25 23:18:16 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (5.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (7.4ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [1 times] (33.8ms)
  Rendered categories/show.html.slim within layouts/application (100.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (84.9ms)
Completed 200 OK in 999ms (Views: 972.3ms | ActiveRecord: 14.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:18:17 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:18:18 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:18:18 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/1/edit" for 127.0.0.1 at 2017-05-25 23:18:21 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (3.5ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (36.9ms)
  Rendered products/edit.html.slim within layouts/application (48.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (6.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (76.1ms)
Completed 200 OK in 674ms (Views: 643.1ms | ActiveRecord: 15.3ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-25 23:18:24 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.7ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (3.4ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [1 times] (2.6ms)
  Rendered categories/show.html.slim within layouts/application (39.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (30.1ms)
Completed 200 OK in 747ms (Views: 728.6ms | ActiveRecord: 7.3ms)


Started GET "/categories/1/products/new" for 127.0.0.1 at 2017-05-25 23:18:26 -0700
Processing by ProductsController#new as HTML
  Parameters: {"category_id"=>"1"}
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (3.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/new.html.slim within layouts/application
  Rendered products/_form.html.slim (19.5ms)
  Rendered products/new.html.slim within layouts/application (25.7ms)
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (90.0ms)
Completed 200 OK in 566ms (Views: 538.9ms | ActiveRecord: 17.1ms)


Started POST "/categories/1/products" for 127.0.0.1 at 2017-05-25 23:18:53 -0700
Processing by ProductsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"MruPfKhgT+bVedBhU548Hvcx8mU/5GiQRqh1ddSA1ziEPiDeDDQH1dqnJsn107Ry5P5h4+lxqqcg5+SDpnIo1Q==", "product"=>{"name"=>"basketball shoes", "logo"=>""}, "commit"=>"Create Product", "category_id"=>"1"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (14.6ms)[0m  [1m[32mINSERT INTO `products` (`name`, `logo`, `category_id`, `created_at`, `updated_at`) VALUES ('basketball shoes', '', 1, '2017-05-25 23:18:53', '2017-05-25 23:18:53')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 57ms (ActiveRecord: 26.1ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-25 23:18:53 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (8.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [2 times] (12.1ms)
  Rendered categories/show.html.slim within layouts/application (32.0ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (92.0ms)
Completed 200 OK in 957ms (Views: 919.0ms | ActiveRecord: 24.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:18:54 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:18:55 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:18:55 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/new" for 127.0.0.1 at 2017-05-25 23:19:00 -0700
Processing by ProductsController#new as HTML
  Parameters: {"category_id"=>"1"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (2.6ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/new.html.slim within layouts/application
  Rendered products/_form.html.slim (16.5ms)
  Rendered products/new.html.slim within layouts/application (36.6ms)
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (73.6ms)
Completed 200 OK in 502ms (Views: 488.9ms | ActiveRecord: 9.3ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-25 23:19:21 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (5.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (1.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (2.6ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [2 times] (8.4ms)
  Rendered categories/show.html.slim within layouts/application (53.9ms)
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (119.6ms)
Completed 200 OK in 642ms (Views: 598.2ms | ActiveRecord: 29.6ms)


Started GET "/categories/1/products/new" for 127.0.0.1 at 2017-05-25 23:19:25 -0700
Processing by ProductsController#new as HTML
  Parameters: {"category_id"=>"1"}
  [1m[36mWorker Load (7.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (1.1ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/new.html.slim within layouts/application
  Rendered products/_form.html.slim (22.4ms)
  Rendered products/new.html.slim within layouts/application (31.3ms)
  [1m[36mRole Load (7.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (85.5ms)
Completed 200 OK in 759ms (Views: 733.5ms | ActiveRecord: 19.2ms)


Started POST "/categories/1/products" for 127.0.0.1 at 2017-05-25 23:19:39 -0700
Processing by ProductsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZwipC6NatApxxfEJL0CqtrRP4e2zbDxtHkkcAFgtBszRjQapBw78OX4bB6GJDSLap4Bya2X5/lp4Bo32Kt/5IQ==", "product"=>{"name"=>"soccer shoes", "logo"=>""}, "commit"=>"Create Product", "category_id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (4.2ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (7.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO `products` (`name`, `logo`, `category_id`, `created_at`, `updated_at`) VALUES ('soccer shoes', '', 1, '2017-05-25 23:19:40', '2017-05-25 23:19:40')[0m
  [1m[35m (17.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 59ms (ActiveRecord: 31.4ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-25 23:19:40 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (3.2ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (7.6ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [3 times] (8.2ms)
  Rendered categories/show.html.slim within layouts/application (62.5ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (94.6ms)
Completed 200 OK in 1082ms (Views: 1057.9ms | ActiveRecord: 19.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:19:41 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:19:42 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:19:42 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/new" for 127.0.0.1 at 2017-05-25 23:19:45 -0700
Processing by ProductsController#new as HTML
  Parameters: {"category_id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (13.7ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/new.html.slim within layouts/application
  Rendered products/_form.html.slim (54.8ms)
  Rendered products/new.html.slim within layouts/application (72.3ms)
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (23.0ms)
Completed 200 OK in 672ms (Views: 639.8ms | ActiveRecord: 16.2ms)


Started POST "/categories/1/products" for 127.0.0.1 at 2017-05-25 23:20:12 -0700
Processing by ProductsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Rw9COl/42R6LAp3/b/9QFgN31kpKi6uQxMgApc+hqnvxiu2Y+6yRLYTca1fJsth6ELhFzJweaaeih5FTvVNVlg==", "product"=>{"name"=>"skateboard shoes", "logo"=>""}, "commit"=>"Create Product", "category_id"=>"1"}
  [1m[36mWorker Load (2.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (7.5ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (4.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (9.4ms)[0m  [1m[32mINSERT INTO `products` (`name`, `logo`, `category_id`, `created_at`, `updated_at`) VALUES ('skateboard shoes', '', 1, '2017-05-25 23:20:12', '2017-05-25 23:20:12')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 54ms (ActiveRecord: 26.1ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-25 23:20:12 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (5.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (1.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (8.6ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (8.6ms)
  Rendered categories/show.html.slim within layouts/application (53.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (119.5ms)
Completed 200 OK in 1117ms (Views: 1087.1ms | ActiveRecord: 22.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:20:14 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:20:15 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:20:15 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/4/edit" for 127.0.0.1 at 2017-05-25 23:20:21 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (3.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (28.9ms)
  Rendered products/edit.html.slim within layouts/application (78.0ms)
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (66.2ms)
Completed 200 OK in 669ms (Views: 632.3ms | ActiveRecord: 9.2ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-25 23:20:26 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (2.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (6.1ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (32.5ms)
  Rendered categories/show.html.slim within layouts/application (60.2ms)
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (14.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (96.5ms)
Completed 200 OK in 1004ms (Views: 961.0ms | ActiveRecord: 30.7ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:20:35 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (6.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
Completed 500 Internal Server Error in 85ms (ActiveRecord: 13.0ms)


  
CanCan::AccessDenied (You are not authorized to access this page.):
  
cancancan (1.16.0) lib/cancan/ability.rb:217:in `authorize!'
cancancan (1.16.0) lib/cancan/controller_additions.rb:352:in `authorize!'
cancancan (1.16.0) lib/cancan/controller_resource.rb:53:in `authorize_resource'
cancancan (1.16.0) lib/cancan/controller_resource.rb:39:in `load_and_authorize_resource'
cancancan (1.16.0) lib/cancan/controller_resource.rb:12:in `block in add_before_action'
activesupport (5.0.2) lib/active_support/callbacks.rb:398:in `instance_exec'
activesupport (5.0.2) lib/active_support/callbacks.rb:398:in `block in make_lambda'
activesupport (5.0.2) lib/active_support/callbacks.rb:169:in `block (2 levels) in halting'
actionpack (5.0.2) lib/abstract_controller/callbacks.rb:12:in `block (2 levels) in <module:Callbacks>'
activesupport (5.0.2) lib/active_support/callbacks.rb:170:in `block in halting'
activesupport (5.0.2) lib/active_support/callbacks.rb:454:in `block in call'
activesupport (5.0.2) lib/active_support/callbacks.rb:454:in `each'
activesupport (5.0.2) lib/active_support/callbacks.rb:454:in `call'
activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
warden (1.2.7) lib/warden/manager.rb:35:in `catch'
warden (1.2.7) lib/warden/manager.rb:35:in `call'
rack (2.0.2) lib/rack/etag.rb:25:in `call'
rack (2.0.2) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.2) lib/rack/head.rb:12:in `call'
rack (2.0.2) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.2) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (28.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (8.4ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (145.2ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:20:36 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:20:50 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (3.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (10.1ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (38.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (170.9ms)
Completed 200 OK in 1287ms (Views: 1075.0ms | ActiveRecord: 15.4ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:20:53 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:20:53 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles/new" for 127.0.0.1 at 2017-05-25 23:20:57 -0700
Processing by RolesController#new as HTML
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/new.html.slim within layouts/application
  Rendered roles/_form.html.slim (41.5ms)
  Rendered roles/new.html.slim within layouts/application (71.6ms)
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (186.4ms)
Completed 200 OK in 981ms (Views: 935.5ms | ActiveRecord: 12.1ms)


Started POST "/roles" for 127.0.0.1 at 2017-05-25 23:21:08 -0700
Processing by RolesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"BQmGWKatZDQDBL30COvWeA3Q9KdaE+5X5BeC13BXRsSzjCn6AvksBwzaS1yupl4UHh9nIYyGLGCCWBMhAqW5KQ==", "role"=>{"name"=>"boss", "display_name"=>"boss", "comment"=>""}, "commit"=>"Create Role"}
  [1m[36mWorker Load (6.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (25.9ms)[0m  [1m[32mINSERT INTO `roles` (`name`, `created_at`, `updated_at`, `display_name`, `comment`) VALUES ('boss', '2017-05-25 23:21:08', '2017-05-25 23:21:08', 'boss', '')[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/roles
Completed 302 Found in 41ms (ActiveRecord: 35.4ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:21:08 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (9.6ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (32.8ms)
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (11.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (11.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (103.0ms)
Completed 200 OK in 1138ms (Views: 1085.6ms | ActiveRecord: 39.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:21:10 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:21:11 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:21:11 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles/1" for 127.0.0.1 at 2017-05-25 23:21:15 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 1 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (2.8ms)
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (81.7ms)
Completed 200 OK in 637ms (Views: 613.1ms | ActiveRecord: 13.1ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:21:17 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (5.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (8.0ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (31.6ms)
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (6.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (119.7ms)
Completed 200 OK in 841ms (Views: 809.1ms | ActiveRecord: 25.5ms)


Started GET "/roles/1" for 127.0.0.1 at 2017-05-25 23:21:19 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 1 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (6.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (37.4ms)
Completed 200 OK in 439ms (Views: 429.8ms | ActiveRecord: 4.5ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:21:20 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (42.0ms)
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (9.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (135.0ms)
Completed 200 OK in 628ms (Views: 598.5ms | ActiveRecord: 26.1ms)


Started GET "/stations" for 127.0.0.1 at 2017-05-25 23:21:48 -0700
Processing by StationsController#index as HTML
  [1m[36mWorker Load (8.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering stations/index.html.slim within layouts/application
  [1m[36mStation Load (11.2ms)[0m  [1m[34mSELECT `stations`.* FROM `stations`[0m
  Rendered stations/index.html.slim within layouts/application (45.2ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (6.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (217.9ms)
Completed 200 OK in 1551ms (Views: 1406.6ms | ActiveRecord: 31.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:21:50 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:21:51 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:21:51 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/stations/new" for 127.0.0.1 at 2017-05-25 23:21:55 -0700
Processing by StationsController#new as HTML
  [1m[36mWorker Load (8.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering stations/new.html.slim within layouts/application
  Rendered stations/_form.html.slim (75.9ms)
  Rendered stations/new.html.slim within layouts/application (89.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (27.8ms)
Completed 200 OK in 681ms (Views: 522.1ms | ActiveRecord: 16.7ms)


Started GET "/addresses/suggestion.json?term=bei&_type=query&q=bei&_=1495779710700" for 127.0.0.1 at 2017-05-25 23:22:01 -0700
Processing by AddressesController#suggestion as JSON
  Parameters: {"term"=>"bei", "_type"=>"query", "q"=>"bei", "_"=>"1495779710700"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 315ms (ActiveRecord: 0.3ms)


  
SocketError (Failed to open TCP connection to api.map.baidu.com:80 (getaddrinfo: Temporary failure in name resolution)):
  
app/controllers/addresses_controller.rb:66:in `suggestion'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (52.2ms)
Started GET "/addresses/suggestion.json?term=beijing&_type=query&q=beijing&_=1495779710701" for 127.0.0.1 at 2017-05-25 23:22:03 -0700
Processing by AddressesController#suggestion as JSON
  Parameters: {"term"=>"beijing", "_type"=>"query", "q"=>"beijing", "_"=>"1495779710701"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms)


  
SocketError (Failed to open TCP connection to api.map.baidu.com:80 (getaddrinfo: Temporary failure in name resolution)):
  
app/controllers/addresses_controller.rb:66:in `suggestion'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (54.4ms)
Started GET "/addresses/suggestion.json?term=beijin&_type=query&q=beijin&_=1495779710702" for 127.0.0.1 at 2017-05-25 23:22:05 -0700
Processing by AddressesController#suggestion as JSON
  Parameters: {"term"=>"beijin", "_type"=>"query", "q"=>"beijin", "_"=>"1495779710702"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms)


  
SocketError (Failed to open TCP connection to api.map.baidu.com:80 (getaddrinfo: Temporary failure in name resolution)):
  
app/controllers/addresses_controller.rb:66:in `suggestion'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.7ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (51.1ms)
Started GET "/addresses/suggestion.json?term=b&_type=query&q=b&_=1495779710703" for 127.0.0.1 at 2017-05-25 23:22:05 -0700
Processing by AddressesController#suggestion as JSON
  Parameters: {"term"=>"b", "_type"=>"query", "q"=>"b", "_"=>"1495779710703"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.3ms)


  
SocketError (Failed to open TCP connection to api.map.baidu.com:80 (getaddrinfo: Temporary failure in name resolution)):
  
app/controllers/addresses_controller.rb:66:in `suggestion'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.7ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (52.2ms)
Started GET "/addresses/suggestion.json?term=bei&_type=query&q=bei&_=1495779710704" for 127.0.0.1 at 2017-05-25 23:22:51 -0700
Processing by AddressesController#suggestion as JSON
  Parameters: {"term"=>"bei", "_type"=>"query", "q"=>"bei", "_"=>"1495779710704"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms)


  
SocketError (Failed to open TCP connection to api.map.baidu.com:80 (getaddrinfo: Temporary failure in name resolution)):
  
app/controllers/addresses_controller.rb:66:in `suggestion'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (52.9ms)
Started GET "/addresses/suggestion.json?term=b&_type=query&q=b&_=1495779710705" for 127.0.0.1 at 2017-05-25 23:22:54 -0700
Processing by AddressesController#suggestion as JSON
  Parameters: {"term"=>"b", "_type"=>"query", "q"=>"b", "_"=>"1495779710705"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms)


  
SocketError (Failed to open TCP connection to api.map.baidu.com:80 (getaddrinfo: Temporary failure in name resolution)):
  
app/controllers/addresses_controller.rb:66:in `suggestion'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (50.7ms)
Started GET "/addresses/suggestion.json?term=beijing&_type=query&q=beijing&_=1495779710706" for 127.0.0.1 at 2017-05-25 23:23:01 -0700
Processing by AddressesController#suggestion as JSON
  Parameters: {"term"=>"beijing", "_type"=>"query", "q"=>"beijing", "_"=>"1495779710706"}
  [1m[36mWorker Load (0.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.9ms)


  
SocketError (Failed to open TCP connection to api.map.baidu.com:80 (getaddrinfo: Temporary failure in name resolution)):
  
app/controllers/addresses_controller.rb:66:in `suggestion'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.6ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (50.3ms)
Started GET "/price_rules" for 127.0.0.1 at 2017-05-25 23:23:11 -0700
Processing by PriceRulesController#index as HTML
  [1m[36mWorker Load (7.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/index.html.slim within layouts/application
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered price_rules/index.html.slim within layouts/application (64.8ms)
Completed 500 Internal Server Error in 89ms (ActiveRecord: 8.4ms)


  
ActionView::Template::Error (undefined method `categories' for nil:NilClass):
    1: - current_city.categories.each do |category|
    2:   .panel.panel-default
    3:     .panel-heading
    4:       = category.name
  
app/views/price_rules/index.html.slim:1:in `_app_views_price_rules_index_html_slim__2581862207756099977_70036594479120'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (11.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (148.0ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:23:12 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/prices" for 127.0.0.1 at 2017-05-25 23:23:33 -0700
Processing by PricesController#index as HTML
  [1m[36mWorker Load (3.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering prices/index.html.slim within layouts/application
  [1m[36mCategory Load (4.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered prices/index.html.slim within layouts/application (55.1ms)
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (88.7ms)
Completed 200 OK in 1137ms (Views: 1009.5ms | ActiveRecord: 28.4ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:23:36 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:23:36 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/prices" for 127.0.0.1 at 2017-05-25 23:23:39 -0700
Processing by CategoriesController#prices as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (7.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (5.8ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/prices.html.slim within layouts/application
  [1m[36mPrice Load (3.9ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` INNER JOIN `products` ON `prices`.`product_id` = `products`.`id` WHERE `products`.`category_id` = 1 LIMIT 10 OFFSET 0[0m
  Rendered categories/prices.html.slim within layouts/application (38.2ms)
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (216.2ms)
Completed 200 OK in 1091ms (Views: 945.3ms | ActiveRecord: 35.9ms)


Started POST "/categories/1/init_prices" for 127.0.0.1 at 2017-05-25 23:23:42 -0700
Processing by CategoriesController#init_prices as HTML
  Parameters: {"authenticity_token"=>"NfN7LbWF9fxh+1hYwc5/VipaUQFf3syjse5tNrEr0AKDdtSPEdG9z24lrvBng/c6OZXCh4lLDpTXofzAw9kv7w==", "id"=>"1"}
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (5.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (8.2ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`category_id` = 1[0m
  [1m[36mPrice Load (6.7ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO `prices` (`product_id`, `created_at`, `updated_at`) VALUES (1, '2017-05-25 23:23:43', '2017-05-25 23:23:43')[0m
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPrice Load (3.9ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO `prices` (`product_id`, `created_at`, `updated_at`) VALUES (2, '2017-05-25 23:23:43', '2017-05-25 23:23:43')[0m
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPrice Load (0.3ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO `prices` (`product_id`, `created_at`, `updated_at`) VALUES (3, '2017-05-25 23:23:43', '2017-05-25 23:23:43')[0m
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPrice Load (2.4ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  [1m[35m (9.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO `prices` (`product_id`, `created_at`, `updated_at`) VALUES (4, '2017-05-25 23:23:43', '2017-05-25 23:23:43')[0m
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1/prices
Completed 302 Found in 229ms (ActiveRecord: 66.4ms)


Started GET "/categories/1/prices" for 127.0.0.1 at 2017-05-25 23:23:43 -0700
Processing by CategoriesController#prices as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (7.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (4.6ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/prices.html.slim within layouts/application
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` INNER JOIN `products` ON `prices`.`product_id` = `products`.`id` WHERE `products`.`category_id` = 1 LIMIT 10 OFFSET 0[0m
  [1m[36mProduct Load (21.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  [1m[36mProduct Load (4.6ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  Rendered categories/prices.html.slim within layouts/application (79.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (81.3ms)
Completed 200 OK in 997ms (Views: 914.3ms | ActiveRecord: 43.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:23:44 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:23:44 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:23:44 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/price_rules" for 127.0.0.1 at 2017-05-25 23:23:56 -0700
Processing by PriceRulesController#index as HTML
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/index.html.slim within layouts/application
  [1m[36mCity Load (14.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered price_rules/index.html.slim within layouts/application (29.9ms)
Completed 500 Internal Server Error in 94ms (ActiveRecord: 17.7ms)


  
ActionView::Template::Error (undefined method `categories' for nil:NilClass):
    1: - current_city.categories.each do |category|
    2:   .panel.panel-default
    3:     .panel-heading
    4:       = category.name
  
app/views/price_rules/index.html.slim:1:in `_app_views_price_rules_index_html_slim__2581862207756099977_19392540'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (26.4ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (17.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (142.2ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:23:57 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:39:29 -0700
  [1m[36mActiveRecord::SchemaMigration Load (38.9ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (9.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (409.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (234.3ms)
Completed 200 OK in 3406ms (Views: 3252.0ms | ActiveRecord: 45.1ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:39:35 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:39:35 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:44:01 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (90.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (63.6ms)
Completed 200 OK in 854ms (Views: 821.4ms | ActiveRecord: 2.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:44:02 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:44:03 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:44:03 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles/1/edit" for 127.0.0.1 at 2017-05-25 23:44:12 -0700
Processing by RolesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 1 LIMIT 1[0m
  Rendering roles/edit.html.slim within layouts/application
  Rendered roles/_form.html.slim (196.2ms)
  Rendered roles/edit.html.slim within layouts/application (214.0ms)
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (6.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (96.2ms)
Completed 200 OK in 791ms (Views: 751.0ms | ActiveRecord: 14.7ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:44:17 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (28.1ms)
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (6.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (234.8ms)
Completed 200 OK in 734ms (Views: 709.6ms | ActiveRecord: 20.4ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:45:41 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (5.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (113.9ms)
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (6.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (75.9ms)
Completed 200 OK in 913ms (Views: 885.1ms | ActiveRecord: 21.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:45:42 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:45:43 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:45:43 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/2/edit" for 127.0.0.1 at 2017-05-25 23:45:45 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (4.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (6.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (138.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (10.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (169.9ms)
Completed 200 OK in 863ms (Views: 826.9ms | ActiveRecord: 26.6ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:45:52 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (3.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (37.3ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (28.2ms)
Completed 200 OK in 447ms (Views: 433.3ms | ActiveRecord: 8.2ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:47:01 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (21.3ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (93.3ms)
Completed 200 OK in 793ms (Views: 776.6ms | ActiveRecord: 6.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:47:02 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:47:03 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:47:03 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started DELETE "/roles/1" for 127.0.0.1 at 2017-05-25 23:47:06 -0700
Processing by RolesController#destroy as HTML
  Parameters: {"authenticity_token"=>"hQT9ZUVjdNwIlSKfoq5+6VS/13e451CmVht061dTWUQzgVLH4Tc87wdL1DcE4/aFR3BE8W5ykpEwVOUdJaGmqQ==", "id"=>"1"}
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.8ms)[0m  [1m[31mDELETE FROM `workers_roles` WHERE `workers_roles`.`role_id` = 1[0m
  [1m[35mSQL (4.0ms)[0m  [1m[31mDELETE FROM `roles` WHERE `roles`.`id` = 1[0m
  [1m[35m (39.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/roles
Completed 302 Found in 144ms (ActiveRecord: 64.4ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:47:07 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (84.0ms)
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (101.2ms)
Completed 200 OK in 1426ms (Views: 1399.5ms | ActiveRecord: 5.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:47:08 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:47:09 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:47:09 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles/new" for 127.0.0.1 at 2017-05-25 23:47:10 -0700
Processing by RolesController#new as HTML
  [1m[36mWorker Load (4.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/new.html.slim within layouts/application
  Rendered roles/_form.html.slim (35.1ms)
  Rendered roles/new.html.slim within layouts/application (39.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (52.9ms)
Completed 200 OK in 445ms (Views: 426.0ms | ActiveRecord: 14.0ms)


Started POST "/roles" for 127.0.0.1 at 2017-05-25 23:47:29 -0700
Processing by RolesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"obXQZCPCRN8/3qJpWMTjwy5Bx4Wzl4pJOEFB4jYGAPAXMH/Gh5YM7DAAVMH+iWuvPY5UA2UCSH5eDtAURPT/HQ==", "role"=>{"name"=>"fenchengshi", "display_name"=>"fenchengshi", "comment"=>""}, "commit"=>"Create Role"}
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.1ms)[0m  [1m[32mINSERT INTO `roles` (`name`, `created_at`, `updated_at`, `display_name`, `comment`) VALUES ('fenchengshi', '2017-05-25 23:47:29', '2017-05-25 23:47:29', 'fenchengshi', '')[0m
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/roles
Completed 302 Found in 34ms (ActiveRecord: 16.9ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:47:29 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (6.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (32.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (155.8ms)
Completed 200 OK in 964ms (Views: 949.1ms | ActiveRecord: 9.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:47:30 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:47:30 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:47:30 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles/new" for 127.0.0.1 at 2017-05-25 23:47:47 -0700
Processing by RolesController#new as HTML
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/new.html.slim within layouts/application
  Rendered roles/_form.html.slim (83.4ms)
  Rendered roles/new.html.slim within layouts/application (103.0ms)
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (41.7ms)
Completed 200 OK in 432ms (Views: 423.3ms | ActiveRecord: 3.8ms)


Started POST "/roles" for 127.0.0.1 at 2017-05-25 23:47:50 -0700
Processing by RolesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"xL4RxeGIwbu2iwSITE3CMqb/gAhuXj4+UkdOqlyPR9ZyO75nRdyJiLlV8iDqAEpetTATjrjL/Ak0CN9cLn24Ow==", "role"=>{"name"=>"yunying", "display_name"=>"yunying", "comment"=>""}, "commit"=>"Create Role"}
  [1m[36mWorker Load (3.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO `roles` (`name`, `created_at`, `updated_at`, `display_name`, `comment`) VALUES ('yunying', '2017-05-25 23:47:50', '2017-05-25 23:47:50', 'yunying', '')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/roles
Completed 302 Found in 51ms (ActiveRecord: 11.4ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:47:50 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (40.5ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (100.9ms)
Completed 200 OK in 780ms (Views: 758.0ms | ActiveRecord: 5.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:47:51 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:47:52 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:47:52 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles/new" for 127.0.0.1 at 2017-05-25 23:48:00 -0700
Processing by RolesController#new as HTML
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/new.html.slim within layouts/application
  Rendered roles/_form.html.slim (36.7ms)
  Rendered roles/new.html.slim within layouts/application (45.4ms)
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (104.6ms)
Completed 200 OK in 609ms (Views: 591.5ms | ActiveRecord: 12.8ms)


Started POST "/roles" for 127.0.0.1 at 2017-05-25 23:48:03 -0700
Processing by RolesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"1p3BWYo5nABlVwcLNHzhes9mq9VzDR6kYdFsCZhI0X5gGG77Lm3UM2qJ8aOSMWkW3Kk4U6WY3JMHnv3/6roukw==", "role"=>{"name"=>"admin", "display_name"=>"admin", "comment"=>""}, "commit"=>"Create Role"}
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.7ms)[0m  [1m[32mINSERT INTO `roles` (`name`, `created_at`, `updated_at`, `display_name`, `comment`) VALUES ('admin', '2017-05-25 23:48:03', '2017-05-25 23:48:03', 'admin', '')[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/roles
Completed 302 Found in 27ms (ActiveRecord: 13.7ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-25 23:48:03 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (39.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (56.9ms)
Completed 200 OK in 764ms (Views: 744.6ms | ActiveRecord: 7.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:48:04 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:48:05 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:48:05 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:48:10 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (58.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (184.3ms)
Completed 200 OK in 915ms (Views: 893.8ms | ActiveRecord: 17.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:48:11 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:48:11 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:48:11 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/2/edit" for 127.0.0.1 at 2017-05-25 23:48:14 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (4.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (0.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (109.3ms)
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (98.4ms)
Completed 200 OK in 594ms (Views: 557.3ms | ActiveRecord: 26.7ms)


Started PATCH "/workers/2" for 127.0.0.1 at 2017-05-25 23:48:18 -0700
Processing by WorkersController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"CBvIpvI36eZxYsYNB4ItFcmNZgLHzsIfuJu5kybd0cS+nmcEVmOh1X68MKWhz6V52kL1hBFbACje1ChlVC8uKQ==", "worker"=>{"role_ids"=>["", "2"], "city_ids"=>[""]}, "commit"=>"Update Worker", "id"=>"2"}
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` WHERE `roles`.`id` = 2[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO `workers_roles` (`worker_id`, `role_id`) VALUES (2, 2)[0m
  [1m[36mCity Load (9.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` WHERE 1=0[0m
  [1m[36mCity Load (9.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/workers
Completed 302 Found in 148ms (ActiveRecord: 36.8ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-25 23:48:18 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (64.2ms)
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (383.7ms)
Completed 200 OK in 1161ms (Views: 1130.4ms | ActiveRecord: 13.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:48:20 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:48:20 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:48:20 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users" for 127.0.0.1 at 2017-05-25 23:48:37 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (9.1ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (77.9ms)
Completed 500 Internal Server Error in 136ms (ActiveRecord: 13.5ms)


  
ActionView::Template::Error (undefined method `mobile' for #<User:0x007fef86a0f000>):
    12:   tbody
    13:     - @users.each do |user|
    14:       tr
    15:         td = user.mobile
    16:         td = user.name
    17:         td = link_to 'Show', user
    18:         td = link_to 'Edit', edit_user_path(user)
  
app/views/users/index.html.slim:15:in `block in _app_views_users_index_html_slim__1405321569442206091_70333370779480'
app/views/users/index.html.slim:13:in `_app_views_users_index_html_slim__1405321569442206091_70333370779480'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (19.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (103.7ms)
Started GET "/users" for 127.0.0.1 at 2017-05-25 23:50:15 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (6.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (76.6ms)
Completed 500 Internal Server Error in 247ms (ActiveRecord: 16.4ms)


  
ActionView::Template::Error (undefined method `name' for #<User:0x007fef87275208>):
    13:     - @users.each do |user|
    14:       tr
    15:         td = user.email
    16:         td = user.name
    17:         td = link_to 'Show', user
    18:         td = link_to 'Edit', edit_user_path(user)
    19:         td = link_to 'Destroy', user, data: { confirm: 'Are you sure?' }, method: :delete
  
app/views/users/index.html.slim:16:in `block in _app_views_users_index_html_slim__1405321569442206091_70333371398140'
app/views/users/index.html.slim:13:in `_app_views_users_index_html_slim__1405321569442206091_70333371398140'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (12.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (8.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (136.5ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:50:16 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/users" for 127.0.0.1 at 2017-05-25 23:55:28 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (3.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (47.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (74.7ms)
Completed 200 OK in 1052ms (Views: 941.5ms | ActiveRecord: 15.2ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:55:30 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:55:30 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/edit" for 127.0.0.1 at 2017-05-25 23:55:34 -0700
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (10.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/edit.html.slim within layouts/application
  Rendered users/_form.html.slim (16.7ms)
  Rendered users/edit.html.slim within layouts/application (28.7ms)
  [1m[36mCACHE (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (109.4ms)
Completed 200 OK in 886ms (Views: 803.1ms | ActiveRecord: 19.7ms)


Started GET "/users/1/edit" for 127.0.0.1 at 2017-05-25 23:57:06 -0700
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (6.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/edit.html.slim within layouts/application
  Rendered users/_form.html.slim (21.6ms)
  Rendered users/edit.html.slim within layouts/application (41.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (114.7ms)
Completed 200 OK in 1059ms (Views: 957.0ms | ActiveRecord: 11.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:57:07 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:57:09 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:57:09 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users" for 127.0.0.1 at 2017-05-25 23:57:13 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (3.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (37.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (22.2ms)
Completed 200 OK in 492ms (Views: 407.2ms | ActiveRecord: 12.2ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-25 23:57:15 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (5.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (0.3ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (0.3ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mCoupon Load (0.3ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (32.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (66.0ms)
Completed 200 OK in 795ms (Views: 567.1ms | ActiveRecord: 49.6ms)


Started GET "/users/1/user_cards/1/charge" for 127.0.0.1 at 2017-05-25 23:57:22 -0700
Processing by UserCardsController#charge as HTML
  Parameters: {"user_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (2.4ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering user_cards/charge.html.slim within layouts/application
  Rendered user_cards/charge.html.slim within layouts/application (26.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (37.1ms)
Completed 200 OK in 489ms (Views: 451.2ms | ActiveRecord: 7.4ms)


Started POST "/users/1/user_cards/1/charge" for 127.0.0.1 at 2017-05-25 23:57:31 -0700
Processing by UserCardsController#charge as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"L7UrJeFM+y6bk2Q81WJcEFMAtBoGBuvpx8rHSomK4q+ZMISHRRizHZRNkpRzL9R8QM8nnNCTKd6hhVa8+3gdQg==", "user_card_log"=>{"real_money"=>"8", "fake_money"=>"8"}, "commit"=>"Create User card log", "user_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (2.2ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mUserCard Load (1.7ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.7ms)[0m  [1m[32mINSERT INTO `user_card_logs` (`kind`, `real_money`, `fake_money`, `loggable_type`, `loggable_id`, `user_card_id`, `created_at`, `updated_at`) VALUES (1, 8.0, 8.0, 'Worker', 2, 1, '2017-05-25 23:57:31', '2017-05-25 23:57:31')[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.7ms)[0m  [1m[33mUPDATE `user_cards` SET `real_money` = 8.0, `fake_money` = 8.0, `updated_at` = '2017-05-25 23:57:31' WHERE `user_cards`.`id` = 1[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/1
Completed 302 Found in 101ms (ActiveRecord: 20.8ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-25 23:57:31 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (8.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (3.1ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (3.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (6.4ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (3.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCoupon Load (0.4ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (100.8ms)
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (78.4ms)
Completed 200 OK in 987ms (Views: 801.9ms | ActiveRecord: 42.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:57:32 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-25 23:57:33 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:57:33 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-25 23:57:36 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (1.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  Rendered coupons/_form.html.slim (30.8ms)
  Rendered coupons/new.html.slim within layouts/application (46.4ms)
Completed 500 Internal Server Error in 90ms (ActiveRecord: 2.1ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@user, @coupon]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/coupons/_form.html.slim:1:in `_app_views_coupons__form_html_slim___1798393250227912131_70333421058140'
app/views/coupons/new.html.slim:3:in `_app_views_coupons_new_html_slim___3256250207797160810_70333421194360'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (14.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (56.9ms)
Started GET "/users/1/coupons_lists" for 127.0.0.1 at 2017-05-25 23:59:31 -0700
  
ActionController::RoutingError (No route matches [GET] "/users/1/coupons_lists"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.5ms)
  Rendered collection of /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [266 times] (698.4ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (15.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.5ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (2766.8ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-25 23:59:35 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/users/1/user_cards/1/charge" for 127.0.0.1 at 2017-05-26 00:00:36 -0700
Processing by UserCardsController#charge as HTML
  Parameters: {"user_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (5.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (1.7ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering user_cards/charge.html.slim within layouts/application
  Rendered user_cards/charge.html.slim within layouts/application (10.5ms)
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (60.9ms)
Completed 200 OK in 814ms (Views: 777.5ms | ActiveRecord: 18.6ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:00:38 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:00:38 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:00:44 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (4.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (4.7ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (20.1ms)
Completed 500 Internal Server Error in 113ms (ActiveRecord: 9.2ms)


  
ActionView::Template::Error (Mysql2::Error: Unknown column 'user_card_charge_settings.city_id' in 'where clause': SELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0):
    12:           th
    13: 
    14:       tbody
    15:         - @user_card_charge_settings.each do |user_card_charge_setting|
    16:           tr
    17:             td = user_card_charge_setting.min
    18:             td = user_card_charge_setting.money_give
  
app/views/user_card_charge_settings/index.html.slim:15:in `_app_views_user_card_charge_settings_index_html_slim__2658069040242610451_70333371069420'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (36.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (79.5ms)
Started GET "/users/1/user_cards/1/charge" for 127.0.0.1 at 2017-05-26 00:01:10 -0700
Processing by UserCardsController#charge as HTML
  Parameters: {"user_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (2.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (0.3ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering user_cards/charge.html.slim within layouts/application
  Rendered user_cards/charge.html.slim within layouts/application (66.4ms)
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (96.9ms)
Completed 200 OK in 1861ms (Views: 1829.2ms | ActiveRecord: 13.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:01:12 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:01:15 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:01:15 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/users/1/user_cards/1/charge" for 127.0.0.1 at 2017-05-26 00:01:31 -0700
Processing by UserCardsController#charge as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"GsOmNVe/Zyok2bbw0QnMD3ADknTHjSeUaXKeLo2xlVKsRgmX8+svGSsHQFh3RERjY8wB8hEY5aMPPQ/Y/0Nqvw==", "user_card_log"=>{"real_money"=>"8", "fake_money"=>"8"}, "commit"=>"Create User card log", "user_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (0.3ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mUserCard Load (0.9ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (17.2ms)[0m  [1m[32mINSERT INTO `user_card_logs` (`kind`, `real_money`, `fake_money`, `loggable_type`, `loggable_id`, `user_card_id`, `created_at`, `updated_at`) VALUES (1, 8.0, 8.0, 'Worker', 2, 1, '2017-05-26 00:01:31', '2017-05-26 00:01:31')[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE `user_cards` SET `real_money` = 16.0, `fake_money` = 16.0, `updated_at` = '2017-05-26 00:01:31' WHERE `user_cards`.`id` = 1[0m
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/1
Completed 302 Found in 69ms (ActiveRecord: 33.6ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 00:01:31 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (5.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (0.3ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (0.4ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (2.6ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.1ms)
  Rendered users/show.html.slim within layouts/application (109.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (43.2ms)
Completed 200 OK in 897ms (Views: 748.9ms | ActiveRecord: 22.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:01:32 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:01:33 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:01:33 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/settlement_rules" for 127.0.0.1 at 2017-05-26 00:01:43 -0700
Processing by SettlementRulesController#index as HTML
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 20ms (ActiveRecord: 3.4ms)


  
NoMethodError (undefined method `settlement_rules' for nil:NilClass):
  
app/controllers/settlement_rules_controller.rb:7:in `index'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (46.8ms)
Started GET "/users/1" for 127.0.0.1 at 2017-05-26 00:01:47 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (11.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (4.7ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (3.3ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (2.7ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (3.0ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (94.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (35.7ms)
Completed 200 OK in 873ms (Views: 729.3ms | ActiveRecord: 32.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:01:48 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:01:50 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:01:50 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:02:01 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (4.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (4.6ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (20.6ms)
Completed 500 Internal Server Error in 46ms (ActiveRecord: 11.2ms)


  
ActionView::Template::Error (Mysql2::Error: Unknown column 'user_card_charge_settings.city_id' in 'where clause': SELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0):
    12:           th
    13: 
    14:       tbody
    15:         - @user_card_charge_settings.each do |user_card_charge_setting|
    16:           tr
    17:             td = user_card_charge_setting.min
    18:             td = user_card_charge_setting.money_give
  
app/views/user_card_charge_settings/index.html.slim:15:in `_app_views_user_card_charge_settings_index_html_slim__2658069040242610451_70333371566820'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (15.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.5ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (70.4ms)
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:04:29 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (4.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (3.9ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (22.3ms)
Completed 500 Internal Server Error in 83ms (ActiveRecord: 9.0ms)


  
ActionView::Template::Error (Mysql2::Error: Unknown column 'user_card_charge_settings.city_id' in 'where clause': SELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0):
    12:           th
    13: 
    14:       tbody
    15:         - @user_card_charge_settings.each do |user_card_charge_setting|
    16:           tr
    17:             td = user_card_charge_setting.min
    18:             td = user_card_charge_setting.money_give
  
app/views/user_card_charge_settings/index.html.slim:15:in `_app_views_user_card_charge_settings_index_html_slim__2658069040242610451_70333421491900'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (25.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (10.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (6.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (131.2ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:04:30 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 00:04:47 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (2.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (35.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (20.1ms)
Completed 200 OK in 317ms (Views: 304.2ms | ActiveRecord: 5.5ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:04:48 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:04:48 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/2/edit" for 127.0.0.1 at 2017-05-26 00:04:55 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (2.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (43.2ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (20.2ms)
Completed 200 OK in 387ms (Views: 348.5ms | ActiveRecord: 12.9ms)


Started PATCH "/workers/2" for 127.0.0.1 at 2017-05-26 00:04:59 -0700
Processing by WorkersController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"UT5wUoaonLr++t5imCQJ3cw+1Qk/Woadlth+ld2Tlavnu9/wIvzUifEkKMo+aYGx3/FGj+nPRKrwl+9jr2FqRg==", "worker"=>{"role_ids"=>["", "2", "3", "4"], "city_ids"=>[""]}, "commit"=>"Update Worker", "id"=>"2"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` WHERE `roles`.`id` IN (2, 3, 4)[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[35mSQL (12.6ms)[0m  [1m[32mINSERT INTO `workers_roles` (`worker_id`, `role_id`) VALUES (2, 3)[0m
  [1m[35mSQL (11.4ms)[0m  [1m[32mINSERT INTO `workers_roles` (`worker_id`, `role_id`) VALUES (2, 4)[0m
  [1m[36mCity Load (5.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` WHERE 1=0[0m
  [1m[36mCity Load (2.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/workers
Completed 302 Found in 141ms (ActiveRecord: 41.3ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 00:04:59 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (4.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (41.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (86.2ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (206.6ms)
Completed 200 OK in 957ms (Views: 892.9ms | ActiveRecord: 51.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:05:00 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:05:01 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:05:01 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/cities" for 127.0.0.1 at 2017-05-26 00:05:12 -0700
Processing by CitiesController#index as HTML
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering cities/index.html.slim within layouts/application
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered cities/index.html.slim within layouts/application (23.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (55.4ms)
Completed 200 OK in 427ms (Views: 393.6ms | ActiveRecord: 5.5ms)


Started GET "/cities/new" for 127.0.0.1 at 2017-05-26 00:05:14 -0700
Processing by CitiesController#new as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering cities/new.html.slim within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories`[0m
  Rendered cities/_form.html.slim (134.8ms)
  Rendered cities/new.html.slim within layouts/application (147.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (42.9ms)
Completed 200 OK in 637ms (Views: 573.3ms | ActiveRecord: 21.4ms)


Started GET "/regions/search.json?term=beijing&_type=query&q=beijing&_=1495782301271" for 127.0.0.1 at 2017-05-26 00:05:26 -0700
Processing by RegionsController#search as JSON
  Parameters: {"term"=>"beijing", "_type"=>"query", "q"=>"beijing", "_"=>"1495782301271"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRegion Load (6.9ms)[0m  [1m[34mSELECT `regions`.* FROM `regions` WHERE (level = 2 and name like '%beijing%')[0m
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 7.6ms)


Started GET "/regions/search.json?term=b&_type=query&q=b&_=1495782301272" for 127.0.0.1 at 2017-05-26 00:05:29 -0700
Processing by RegionsController#search as JSON
  Parameters: {"term"=>"b", "_type"=>"query", "q"=>"b", "_"=>"1495782301272"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRegion Load (0.4ms)[0m  [1m[34mSELECT `regions`.* FROM `regions` WHERE (level = 2 and name like '%b%')[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.7ms)


Started GET "/regions/search.json?term=beij&_type=query&q=beij&_=1495782301273" for 127.0.0.1 at 2017-05-26 00:05:53 -0700
Processing by RegionsController#search as JSON
  Parameters: {"term"=>"beij", "_type"=>"query", "q"=>"beij", "_"=>"1495782301273"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRegion Load (0.2ms)[0m  [1m[34mSELECT `regions`.* FROM `regions` WHERE (level = 2 and name like '%beij%')[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms)


Started GET "/regions/search.json?term=beijng&_type=query&q=beijng&_=1495782301274" for 127.0.0.1 at 2017-05-26 00:05:54 -0700
Processing by RegionsController#search as JSON
  Parameters: {"term"=>"beijng", "_type"=>"query", "q"=>"beijng", "_"=>"1495782301274"}
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRegion Load (0.3ms)[0m  [1m[34mSELECT `regions`.* FROM `regions` WHERE (level = 2 and name like '%beijng%')[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started POST "/cities" for 127.0.0.1 at 2017-05-26 00:06:05 -0700
Processing by CitiesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Hc5dZmVy55afpGBiF/8E+JeDuIZKOXVEFf0Eb6xZ+M6rS/LEwSavpZB6lsqxsoyUhEwrAJyst3NzspWZ3qsHIw==", "city"=>{"name"=>"Beijing", "region_id"=>"", "category_ids"=>[""]}, "commit"=>"Create City"}
  [1m[36mWorker Load (3.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (2.4ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` WHERE 1=0[0m
  [1m[35m (5.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO `cities` (`name`, `created_at`, `updated_at`) VALUES ('Beijing', '2017-05-26 00:06:05', '2017-05-26 00:06:05')[0m
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/cities/1
Completed 302 Found in 54ms (ActiveRecord: 16.2ms)


Started GET "/cities/1" for 127.0.0.1 at 2017-05-26 00:06:05 -0700
Processing by CitiesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering cities/show.html.slim within layouts/application
  Rendered cities/show.html.slim within layouts/application (34.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (105.5ms)
Completed 200 OK in 813ms (Views: 769.9ms | ActiveRecord: 15.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:06:06 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:06:06 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:06:06 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/cities" for 127.0.0.1 at 2017-05-26 00:06:14 -0700
Processing by CitiesController#index as HTML
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering cities/index.html.slim within layouts/application
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (9.4ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  Rendered cities/index.html.slim within layouts/application (42.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (26.0ms)
Completed 200 OK in 402ms (Views: 385.7ms | ActiveRecord: 13.2ms)


Started GET "/cities/1/edit" for 127.0.0.1 at 2017-05-26 00:06:16 -0700
Processing by CitiesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering cities/edit.html.slim within layouts/application
  [1m[36mCategory Load (6.3ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  [1m[36mCategory Load (2.4ms)[0m  [1m[34mSELECT `categories`.* FROM `categories`[0m
  Rendered cities/_form.html.slim (61.9ms)
  Rendered cities/edit.html.slim within layouts/application (79.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (54.2ms)
Completed 200 OK in 463ms (Views: 431.7ms | ActiveRecord: 18.7ms)


Started GET "/regions/search.json?term=beijing&_type=query&q=beijing&_=1495782366540" for 127.0.0.1 at 2017-05-26 00:06:21 -0700
Processing by RegionsController#search as JSON
  Parameters: {"term"=>"beijing", "_type"=>"query", "q"=>"beijing", "_"=>"1495782366540"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRegion Load (0.3ms)[0m  [1m[34mSELECT `regions`.* FROM `regions` WHERE (level = 2 and name like '%beijing%')[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/cities" for 127.0.0.1 at 2017-05-26 00:06:23 -0700
Processing by CitiesController#index as HTML
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering cities/index.html.slim within layouts/application
  [1m[36mCity Load (3.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  Rendered cities/index.html.slim within layouts/application (24.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (40.1ms)
Completed 200 OK in 502ms (Views: 491.1ms | ActiveRecord: 7.4ms)


Started GET "/cities/1/edit" for 127.0.0.1 at 2017-05-26 00:06:28 -0700
Processing by CitiesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering cities/edit.html.slim within layouts/application
  [1m[36mCategory Load (10.8ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  [1m[36mCategory Load (3.7ms)[0m  [1m[34mSELECT `categories`.* FROM `categories`[0m
  Rendered cities/_form.html.slim (44.3ms)
  Rendered cities/edit.html.slim within layouts/application (60.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (24.2ms)
Completed 200 OK in 456ms (Views: 432.4ms | ActiveRecord: 17.9ms)


Started PATCH "/cities/1" for 127.0.0.1 at 2017-05-26 00:06:31 -0700
Processing by CitiesController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"YaJzzNEV6YurDcMUW65DwP5tfRBl2wyRNcHe8b0ARB7XJ9xudUGhuKTTNbz948us7aLulrNOzqZTjk8Hz/K78w==", "city"=>{"name"=>"Beijing", "region_id"=>"", "category_ids"=>["", "1"]}, "commit"=>"Update City", "id"=>"1"}
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (5.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCategory Load (1.7ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` WHERE `categories`.`id` = 1[0m
  [1m[36mCategory Load (1.7ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  [1m[35mSQL (17.0ms)[0m  [1m[32mINSERT INTO `categories_cities` (`city_id`, `category_id`) VALUES (1, 1)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/cities/1
Completed 302 Found in 102ms (ActiveRecord: 42.7ms)


Started GET "/cities/1" for 127.0.0.1 at 2017-05-26 00:06:32 -0700
Processing by CitiesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (6.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering cities/show.html.slim within layouts/application
  Rendered cities/show.html.slim within layouts/application (31.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (64.8ms)
Completed 200 OK in 714ms (Views: 694.2ms | ActiveRecord: 11.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:06:32 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:06:33 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:06:33 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/prices" for 127.0.0.1 at 2017-05-26 00:06:41 -0700
Processing by PricesController#index as HTML
  [1m[36mWorker Load (9.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering prices/index.html.slim within layouts/application
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered prices/index.html.slim within layouts/application (32.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (22.8ms)
Completed 200 OK in 354ms (Views: 304.3ms | ActiveRecord: 11.5ms)


Started GET "/categories/1/prices" for 127.0.0.1 at 2017-05-26 00:06:43 -0700
Processing by CategoriesController#prices as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (4.6ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/prices.html.slim within layouts/application
  [1m[36mPrice Load (5.4ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` INNER JOIN `products` ON `prices`.`product_id` = `products`.`id` WHERE `products`.`category_id` = 1 LIMIT 10 OFFSET 0[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  Rendered categories/prices.html.slim within layouts/application (94.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (46.7ms)
Completed 200 OK in 583ms (Views: 492.8ms | ActiveRecord: 28.5ms)


Started POST "/categories/1/init_prices" for 127.0.0.1 at 2017-05-26 00:06:45 -0700
Processing by CategoriesController#init_prices as HTML
  Parameters: {"authenticity_token"=>"WcN4NDoGkFm5LkaSetXcj0aK0yS9DPdZLqC/hCPW7LjvRteWnlLYarbwsDrcmFTjVUVAomuZNW5I7y5yUSQTVQ==", "id"=>"1"}
  [1m[36mWorker Load (5.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (6.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`category_id` = 1[0m
  [1m[36mPrice Load (0.4ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  [1m[36mPrice Load (1.9ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  [1m[36mPrice Load (3.1ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  [1m[36mPrice Load (0.5ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
Redirected to http://localhost:3000/categories/1/prices
Completed 302 Found in 84ms (ActiveRecord: 18.7ms)


Started GET "/categories/1/prices" for 127.0.0.1 at 2017-05-26 00:06:45 -0700
Processing by CategoriesController#prices as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (2.1ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/prices.html.slim within layouts/application
  [1m[36mPrice Load (2.5ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` INNER JOIN `products` ON `prices`.`product_id` = `products`.`id` WHERE `products`.`category_id` = 1 LIMIT 10 OFFSET 0[0m
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (2.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  Rendered categories/prices.html.slim within layouts/application (64.2ms)
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (118.1ms)
Completed 200 OK in 836ms (Views: 791.8ms | ActiveRecord: 18.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:06:46 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:06:47 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:06:47 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started PUT "/prices/1" for 127.0.0.1 at 2017-05-26 00:07:00 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price1"=>"8"}, "id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (2.6ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[33mUPDATE `prices` SET `price1` = 8.0, `updated_at` = '2017-05-26 00:07:00' WHERE `prices`.`id` = 1[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 30ms (ActiveRecord: 8.7ms)


Started PUT "/prices/1" for 127.0.0.1 at 2017-05-26 00:07:06 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price2"=>"5"}, "id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.2ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE `prices` SET `price2` = 5.0, `updated_at` = '2017-05-26 00:07:06' WHERE `prices`.`id` = 1[0m
  [1m[35m (10.1ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 33ms (ActiveRecord: 11.7ms)


Started PUT "/prices/1" for 127.0.0.1 at 2017-05-26 00:07:08 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price3"=>"4"}, "id"=>"1"}
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (3.5ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.5ms)[0m  [1m[33mUPDATE `prices` SET `price3` = 4.0, `updated_at` = '2017-05-26 00:07:08' WHERE `prices`.`id` = 1[0m
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 44ms (ActiveRecord: 13.9ms)


Started PUT "/prices/1" for 127.0.0.1 at 2017-05-26 00:07:11 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price4"=>"3"}, "id"=>"1"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (3.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[33mUPDATE `prices` SET `price4` = 3.0, `updated_at` = '2017-05-26 00:07:11' WHERE `prices`.`id` = 1[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 14ms (ActiveRecord: 8.1ms)


Started PUT "/prices/1" for 127.0.0.1 at 2017-05-26 00:07:22 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price5"=>"3"}, "id"=>"1"}
  [1m[36mWorker Load (1.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (2.2ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.1ms)[0m  [1m[33mUPDATE `prices` SET `price5` = 3.0, `updated_at` = '2017-05-26 00:07:22' WHERE `prices`.`id` = 1[0m
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 35ms (ActiveRecord: 12.1ms)


Started PUT "/prices/1" for 127.0.0.1 at 2017-05-26 00:07:26 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price6"=>"2"}, "id"=>"1"}
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.3ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[33mUPDATE `prices` SET `price6` = 2.0, `updated_at` = '2017-05-26 00:07:26' WHERE `prices`.`id` = 1[0m
  [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 32ms (ActiveRecord: 18.3ms)


Started PUT "/prices/2" for 127.0.0.1 at 2017-05-26 00:07:33 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price1"=>"16"}, "id"=>"2"}
  [1m[36mWorker Load (4.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.5ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 2 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE `prices` SET `price1` = 16.0, `updated_at` = '2017-05-26 00:07:33' WHERE `prices`.`id` = 2[0m
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 40ms (ActiveRecord: 11.2ms)


Started PUT "/prices/2" for 127.0.0.1 at 2017-05-26 00:07:37 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price2"=>"12"}, "id"=>"2"}
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.3ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 2 LIMIT 1[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[33mUPDATE `prices` SET `price2` = 12.0, `updated_at` = '2017-05-26 00:07:37' WHERE `prices`.`id` = 2[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 17ms (ActiveRecord: 7.4ms)


Started PUT "/prices/2" for 127.0.0.1 at 2017-05-26 00:07:42 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price4"=>"8"}, "id"=>"2"}
  [1m[36mWorker Load (2.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (3.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.9ms)[0m  [1m[33mUPDATE `prices` SET `price4` = 8.0, `updated_at` = '2017-05-26 00:07:42' WHERE `prices`.`id` = 2[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 29ms (ActiveRecord: 13.8ms)


Started PUT "/prices/2" for 127.0.0.1 at 2017-05-26 00:07:46 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price3"=>"10"}, "id"=>"2"}
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.2ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.4ms)[0m  [1m[33mUPDATE `prices` SET `price3` = 10.0, `updated_at` = '2017-05-26 00:07:46' WHERE `prices`.`id` = 2[0m
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 31ms (ActiveRecord: 14.8ms)


Started PUT "/prices/2" for 127.0.0.1 at 2017-05-26 00:07:53 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price5"=>"6"}, "id"=>"2"}
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.2ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[33mUPDATE `prices` SET `price5` = 6.0, `updated_at` = '2017-05-26 00:07:53' WHERE `prices`.`id` = 2[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 18ms (ActiveRecord: 5.9ms)


Started PUT "/prices/2" for 127.0.0.1 at 2017-05-26 00:08:00 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price6"=>"5"}, "id"=>"2"}
  [1m[36mWorker Load (2.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.8ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 2 LIMIT 1[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[33mUPDATE `prices` SET `price6` = 5.0, `updated_at` = '2017-05-26 00:08:00' WHERE `prices`.`id` = 2[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 14ms (ActiveRecord: 9.0ms)


Started PUT "/prices/3" for 127.0.0.1 at 2017-05-26 00:08:04 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price1"=>"8"}, "id"=>"3"}
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.2ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.1ms)[0m  [1m[33mUPDATE `prices` SET `price1` = 8.0, `updated_at` = '2017-05-26 00:08:04' WHERE `prices`.`id` = 3[0m
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 29ms (ActiveRecord: 13.9ms)


Started PUT "/prices/3" for 127.0.0.1 at 2017-05-26 00:08:08 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price2"=>"5"}, "id"=>"3"}
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.3ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 3 LIMIT 1[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `prices` SET `price2` = 5.0, `updated_at` = '2017-05-26 00:08:08' WHERE `prices`.`id` = 3[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 16ms (ActiveRecord: 5.8ms)


Started PUT "/prices/3" for 127.0.0.1 at 2017-05-26 00:08:11 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price3"=>"4"}, "id"=>"3"}
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (1.5ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[33mUPDATE `prices` SET `price3` = 4.0, `updated_at` = '2017-05-26 00:08:11' WHERE `prices`.`id` = 3[0m
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 24ms (ActiveRecord: 8.7ms)


Started PUT "/prices/3" for 127.0.0.1 at 2017-05-26 00:08:15 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price4"=>"3"}, "id"=>"3"}
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.3ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[33mUPDATE `prices` SET `price4` = 3.0, `updated_at` = '2017-05-26 00:08:15' WHERE `prices`.`id` = 3[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 16ms (ActiveRecord: 6.3ms)


Started PUT "/prices/1" for 127.0.0.1 at 2017-05-26 00:08:21 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price4"=>"3.5"}, "id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.6ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[33mUPDATE `prices` SET `price4` = 3.5, `updated_at` = '2017-05-26 00:08:21' WHERE `prices`.`id` = 1[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 17ms (ActiveRecord: 6.2ms)


Started PUT "/prices/3" for 127.0.0.1 at 2017-05-26 00:08:25 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price4"=>"3.5"}, "id"=>"3"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.3ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  [1m[33mUPDATE `prices` SET `price4` = 3.5, `updated_at` = '2017-05-26 00:08:25' WHERE `prices`.`id` = 3[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 14ms (ActiveRecord: 7.1ms)


Started PUT "/prices/3" for 127.0.0.1 at 2017-05-26 00:08:29 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price5"=>"3"}, "id"=>"3"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.3ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 3 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[33mUPDATE `prices` SET `price5` = 3.0, `updated_at` = '2017-05-26 00:08:29' WHERE `prices`.`id` = 3[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 15ms (ActiveRecord: 7.3ms)


Started PUT "/prices/3" for 127.0.0.1 at 2017-05-26 00:08:32 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price6"=>"2"}, "id"=>"3"}
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (1.5ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[33mUPDATE `prices` SET `price6` = 2.0, `updated_at` = '2017-05-26 00:08:32' WHERE `prices`.`id` = 3[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 15ms (ActiveRecord: 8.3ms)


Started PUT "/prices/4" for 127.0.0.1 at 2017-05-26 00:08:37 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price1"=>"6"}, "id"=>"4"}
  [1m[36mWorker Load (1.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (2.9ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.0ms)[0m  [1m[33mUPDATE `prices` SET `price1` = 6.0, `updated_at` = '2017-05-26 00:08:37' WHERE `prices`.`id` = 4[0m
  [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 39ms (ActiveRecord: 20.9ms)


Started PUT "/prices/4" for 127.0.0.1 at 2017-05-26 00:08:45 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price2"=>"5"}, "id"=>"4"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.6ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 4 LIMIT 1[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  [1m[33mUPDATE `prices` SET `price2` = 5.0, `updated_at` = '2017-05-26 00:08:45' WHERE `prices`.`id` = 4[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 16ms (ActiveRecord: 7.3ms)


Started PUT "/prices/4" for 127.0.0.1 at 2017-05-26 00:08:48 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price3"=>"4"}, "id"=>"4"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (1.2ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 4 LIMIT 1[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE `prices` SET `price3` = 4.0, `updated_at` = '2017-05-26 00:08:48' WHERE `prices`.`id` = 4[0m
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 19ms (ActiveRecord: 9.3ms)


Started PUT "/prices/4" for 127.0.0.1 at 2017-05-26 00:08:52 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price4"=>"3"}, "id"=>"4"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.2ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 4 LIMIT 1[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.1ms)[0m  [1m[33mUPDATE `prices` SET `price4` = 3.0, `updated_at` = '2017-05-26 00:08:52' WHERE `prices`.`id` = 4[0m
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 17ms (ActiveRecord: 6.5ms)


Started PUT "/prices/4" for 127.0.0.1 at 2017-05-26 00:08:55 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price5"=>"2.5"}, "id"=>"4"}
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (2.7ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[33mUPDATE `prices` SET `price5` = 2.5, `updated_at` = '2017-05-26 00:08:55' WHERE `prices`.`id` = 4[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 19ms (ActiveRecord: 7.5ms)


Started PUT "/prices/4" for 127.0.0.1 at 2017-05-26 00:08:58 -0700
Processing by PricesController#update as JSON
  Parameters: {"price"=>{"price6"=>"2"}, "id"=>"4"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPrice Load (0.4ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`id` = 4 LIMIT 1[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (24.4ms)[0m  [1m[33mUPDATE `prices` SET `price6` = 2.0, `updated_at` = '2017-05-26 00:08:58' WHERE `prices`.`id` = 4[0m
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 47ms (ActiveRecord: 31.0ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 00:09:05 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (46.2ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (51.5ms)
Completed 200 OK in 503ms (Views: 488.0ms | ActiveRecord: 8.0ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-26 00:09:08 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (36.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (58.5ms)
Completed 200 OK in 411ms (Views: 387.7ms | ActiveRecord: 11.8ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:09:21 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (4.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (27.0ms)
Completed 200 OK in 395ms (Views: 383.1ms | ActiveRecord: 4.1ms)


Started GET "/roles/4/edit" for 127.0.0.1 at 2017-05-26 00:09:24 -0700
Processing by RolesController#edit as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/edit.html.slim within layouts/application
  Rendered roles/_form.html.slim (17.9ms)
  Rendered roles/edit.html.slim within layouts/application (36.9ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (36.4ms)
Completed 200 OK in 484ms (Views: 472.6ms | ActiveRecord: 5.1ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-26 00:09:52 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (34.0ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (37.9ms)
Completed 200 OK in 458ms (Views: 445.2ms | ActiveRecord: 9.0ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:09:54 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (7.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (25.5ms)
Completed 200 OK in 429ms (Views: 415.2ms | ActiveRecord: 1.9ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:11:47 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (3.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (23.2ms)
  [1m[36mRole Load (6.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (8.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (113.5ms)
Completed 200 OK in 1152ms (Views: 1116.5ms | ActiveRecord: 23.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:11:48 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:11:49 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:11:49 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles" for 127.0.0.1 at 2017-05-26 00:13:41 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (47.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (106.6ms)
Completed 200 OK in 570ms (Views: 547.9ms | ActiveRecord: 17.8ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:13:44 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (1.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (20.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (24.8ms)
Completed 200 OK in 426ms (Views: 411.2ms | ActiveRecord: 7.4ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-26 00:13:55 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (43.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (60.9ms)
Completed 200 OK in 522ms (Views: 509.1ms | ActiveRecord: 10.2ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:14:03 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (2.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (16.6ms)
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (114.8ms)
Completed 200 OK in 606ms (Views: 568.9ms | ActiveRecord: 13.4ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-26 00:14:33 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (20.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (20.2ms)
Completed 200 OK in 462ms (Views: 452.5ms | ActiveRecord: 6.3ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:14:48 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (3.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (22.0ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (21.0ms)
Completed 200 OK in 441ms (Views: 429.3ms | ActiveRecord: 5.5ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-26 00:14:52 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (6.4ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (37.2ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (39.9ms)
Completed 200 OK in 384ms (Views: 370.7ms | ActiveRecord: 9.5ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:15:38 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (4.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (36.8ms)
Completed 500 Internal Server Error in 55ms (ActiveRecord: 5.1ms)


  
SyntaxError (/home/user/Desktop/workspace/qiye/app/views/roles/show.html.slim:16: syntax error, unexpected tLABEL
ls.escape_html_safe((renderer: BootstrapPagination::Rails)))
                              ^):
  
app/views/roles/show.html.slim:16: syntax error, unexpected tLABEL
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (7.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (56.2ms)
Started GET "/roles" for 127.0.0.1 at 2017-05-26 00:15:51 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (8.8ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (43.1ms)
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (164.7ms)
Completed 200 OK in 1515ms (Views: 1452.7ms | ActiveRecord: 26.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:15:53 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:15:58 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:15:58 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:18:46 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (23.1ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (28.8ms)
Completed 200 OK in 433ms (Views: 420.2ms | ActiveRecord: 5.9ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:20:17 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (4.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (25.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (48.6ms)
Completed 200 OK in 506ms (Views: 489.2ms | ActiveRecord: 10.2ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:21:16 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (7.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (97.1ms)
Completed 200 OK in 913ms (Views: 870.3ms | ActiveRecord: 7.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:21:17 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:21:18 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:21:18 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:21:19 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (19.6ms)
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (97.9ms)
Completed 200 OK in 566ms (Views: 532.0ms | ActiveRecord: 13.0ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:21:22 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (4.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (21.2ms)
Completed 200 OK in 474ms (Views: 465.5ms | ActiveRecord: 5.2ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 00:21:33 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (17.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (23.7ms)
Completed 200 OK in 457ms (Views: 423.2ms | ActiveRecord: 6.3ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-26 00:21:35 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (35.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (21.8ms)
Completed 200 OK in 362ms (Views: 352.5ms | ActiveRecord: 4.7ms)


Started GET "/categories" for 127.0.0.1 at 2017-05-26 00:21:41 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (2.2ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (28.5ms)
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (26.2ms)
Completed 200 OK in 375ms (Views: 359.5ms | ActiveRecord: 9.7ms)


Started GET "/cities" for 127.0.0.1 at 2017-05-26 00:21:45 -0700
Processing by CitiesController#index as HTML
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering cities/index.html.slim within layouts/application
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (1.8ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  Rendered cities/index.html.slim within layouts/application (34.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (32.3ms)
Completed 200 OK in 383ms (Views: 367.1ms | ActiveRecord: 6.6ms)


Started GET "/prices" for 127.0.0.1 at 2017-05-26 00:21:52 -0700
Processing by PricesController#index as HTML
  [1m[36mWorker Load (1.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering prices/index.html.slim within layouts/application
  [1m[36mCategory Load (1.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered prices/index.html.slim within layouts/application (29.8ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (22.0ms)
Completed 200 OK in 403ms (Views: 395.9ms | ActiveRecord: 3.9ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 00:21:54 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (4.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (21.5ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/index.html.slim within layouts/application (41.2ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (33.3ms)
Completed 200 OK in 426ms (Views: 372.2ms | ActiveRecord: 30.7ms)


Started GET "/coupon_lists/new" for 127.0.0.1 at 2017-05-26 00:21:57 -0700
Processing by CouponListsController#new as HTML
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/new.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (118.2ms)
  Rendered coupon_lists/new.html.slim within layouts/application (154.3ms)
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (111.9ms)
Completed 200 OK in 725ms (Views: 656.1ms | ActiveRecord: 13.5ms)


Started POST "/coupon_lists" for 127.0.0.1 at 2017-05-26 00:23:16 -0700
Processing by CouponListsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"MgcfySRHy4pueg1/jO3FYkea9GL+7icGZk1Oc/IJbyeEgrBrgBODuWGk+9cqoE0OVFVn5Ch75TEAAt+FgPuQyg==", "coupon_list"=>{"name"=>"ç«¯åˆèŠ‚å¤§ä¼˜æƒ ", "validity_type"=>"0", "valid_from"=>"2017-05-26", "valid_to"=>"2017-05-31", "fixed_begin_term"=>"", "fixed_term"=>""}, "commit"=>"Create Coupon list"}
  [1m[36mWorker Load (6.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (11.5ms)[0m  [1m[32mINSERT INTO `coupon_lists` (`name`, `validity_type`, `valid_from`, `valid_to`, `created_at`, `updated_at`) VALUES ('ç«¯åˆèŠ‚å¤§ä¼˜æƒ ', 0, '2017-05-26', '2017-05-31', '2017-05-26 00:23:16', '2017-05-26 00:23:16')[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/coupon_lists/1
Completed 302 Found in 91ms (ActiveRecord: 21.0ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 00:23:17 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (4.8ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (17.2ms)
  [1m[36mOrderPromotion Load (0.5ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (0.3ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (409.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (109.3ms)
Completed 200 OK in 1216ms (Views: 888.5ms | ActiveRecord: 307.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:23:18 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:23:19 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:23:19 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 00:23:25 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.4ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (26.0ms)
  Rendered order_promotions/new.html.slim within layouts/application (40.4ms)
Completed 500 Internal Server Error in 54ms (ActiveRecord: 0.7ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333421600100'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333421795560'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (28.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (13.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.2ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (123.3ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 00:23:40 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.2ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (62.6ms)
  [1m[36mOrderPromotion Load (2.6ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (4.6ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (122.6ms)
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (48.8ms)
Completed 200 OK in 952ms (Views: 932.7ms | ActiveRecord: 11.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:23:41 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:23:44 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:23:44 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/promotion_rules/new" for 127.0.0.1 at 2017-05-26 00:23:47 -0700
Processing by PromotionRulesController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.5ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering promotion_rules/new.html.slim within layouts/application
  Rendered promotion_rules/_form.html.slim (13.4ms)
  Rendered promotion_rules/new.html.slim within layouts/application (48.3ms)
Completed 500 Internal Server Error in 77ms (ActiveRecord: 2.3ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @promotion_rule]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/promotion_rules/_form.html.slim:1:in `_app_views_promotion_rules__form_html_slim__4518230481427888513_70333420439660'
app/views/promotion_rules/new.html.slim:3:in `_app_views_promotion_rules_new_html_slim__647517746535724029_70333420528060'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (17.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.4ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (68.9ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 00:23:54 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.5ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (9.1ms)
  [1m[36mOrderPromotion Load (1.7ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (1.1ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (94.0ms)
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (15.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (253.6ms)
Completed 200 OK in 1147ms (Views: 1091.0ms | ActiveRecord: 33.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:23:55 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:23:58 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:23:58 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 00:24:45 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (4.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (9.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (17.3ms)
  Rendered coupon_lists/index.html.slim within layouts/application (63.1ms)
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (163.8ms)
Completed 200 OK in 805ms (Views: 779.9ms | ActiveRecord: 21.1ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 00:24:47 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (5.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.1ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (20.9ms)
  [1m[36mOrderPromotion Load (1.3ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (5.3ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (126.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (185.5ms)
Completed 200 OK in 1519ms (Views: 1466.7ms | ActiveRecord: 22.1ms)


Started GET "/orders" for 127.0.0.1 at 2017-05-26 00:25:07 -0700
Processing by OrdersController#index as HTML
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering orders/index.html.slim within layouts/application
  [1m[36mOrder Load (6.2ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` ORDER BY `orders`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered orders/index.html.slim within layouts/application (32.8ms)
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (150.2ms)
Completed 200 OK in 613ms (Views: 541.7ms | ActiveRecord: 17.5ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:25:15 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (6.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (8.4ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (42.7ms)
Completed 500 Internal Server Error in 84ms (ActiveRecord: 17.5ms)


  
ActionView::Template::Error (Mysql2::Error: Unknown column 'user_card_charge_settings.city_id' in 'where clause': SELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0):
    12:           th
    13: 
    14:       tbody
    15:         - @user_card_charge_settings.each do |user_card_charge_setting|
    16:           tr
    17:             td = user_card_charge_setting.min
    18:             td = user_card_charge_setting.money_give
  
app/views/user_card_charge_settings/index.html.slim:15:in `_app_views_user_card_charge_settings_index_html_slim__2658069040242610451_70333420222960'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (16.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (9.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (65.9ms)
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:33:36 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (5.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (5.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (1.5ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (64.2ms)
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  Rendered layouts/_menu.slim (91.6ms)
Completed 200 OK in 983ms (Views: 935.4ms | ActiveRecord: 14.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:33:37 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:33:39 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:33:39 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 00:33:41 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (53.0ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (64.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (81.3ms)
Completed 200 OK in 511ms (Views: 478.4ms | ActiveRecord: 6.9ms)


Started POST "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:33:53 -0700
Processing by UserCardChargeSettingsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"wpwnwD9OcE8+nNEcmS8P8yDCNuPrna355wQahEVDFmV0GYhimxo4fDFCJ7Q/YoefMw2lZT0Ib86BS4tyN7HpiA==", "user_card_charge_setting"=>{"min"=>"25", "money_give"=>"50"}, "commit"=>"Create User card charge setting"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (9.1ms)[0m  [1m[32mINSERT INTO `user_card_charge_settings` (`min`, `money_give`, `created_at`, `updated_at`) VALUES (25.0, 50.0, '2017-05-26 00:33:53', '2017-05-26 00:33:53')[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings/1
Completed 302 Found in 27ms (ActiveRecord: 13.7ms)


Started GET "/user_card_charge_settings/1" for 127.0.0.1 at 2017-05-26 00:33:53 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (1.0ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (20.1ms)
  [1m[36mRole Load (6.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (8.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (102.6ms)
Completed 200 OK in 884ms (Views: 832.3ms | ActiveRecord: 21.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:33:54 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:33:55 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:33:55 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:33:58 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (3.8ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (23.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  Rendered layouts/_menu.slim (45.5ms)
Completed 200 OK in 441ms (Views: 423.9ms | ActiveRecord: 7.2ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 00:34:04 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (2.0ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (31.3ms)
  Rendered coupon_lists/index.html.slim within layouts/application (70.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (30.2ms)
Completed 200 OK in 432ms (Views: 421.4ms | ActiveRecord: 4.0ms)


Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 00:34:08 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (4.9ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (61.6ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (85.5ms)
  [1m[36mRole Load (7.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (6.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (148.3ms)
Completed 200 OK in 618ms (Views: 569.5ms | ActiveRecord: 25.2ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 00:34:13 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.4ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (8.1ms)
  [1m[36mOrderPromotion Load (1.1ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (0.6ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (80.0ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (38.8ms)
Completed 200 OK in 480ms (Views: 465.9ms | ActiveRecord: 6.4ms)


Started GET "/coupon_lists/1/promotion_rules/new" for 127.0.0.1 at 2017-05-26 00:34:17 -0700
Processing by PromotionRulesController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.2ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering promotion_rules/new.html.slim within layouts/application
  Rendered promotion_rules/_form.html.slim (19.3ms)
  Rendered promotion_rules/new.html.slim within layouts/application (35.5ms)
Completed 500 Internal Server Error in 69ms (ActiveRecord: 4.5ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @promotion_rule]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/promotion_rules/_form.html.slim:1:in `_app_views_promotion_rules__form_html_slim__4518230481427888513_70333420322160'
app/views/promotion_rules/new.html.slim:3:in `_app_views_promotion_rules_new_html_slim__647517746535724029_70333420397860'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (7.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.4ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (56.8ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 00:37:19 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.2ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (19.0ms)
  [1m[36mOrderPromotion Load (10.9ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (0.4ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (96.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (7.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (62.9ms)
Completed 200 OK in 1003ms (Views: 972.2ms | ActiveRecord: 20.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:37:20 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:37:23 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:37:23 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 00:37:35 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (61.7ms)
  Rendered order_promotions/new.html.slim within layouts/application (72.6ms)
Completed 500 Internal Server Error in 101ms (ActiveRecord: 3.2ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_36955660'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_42272560'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (11.4ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (54.8ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 00:37:40 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.4ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (41.2ms)
  [1m[36mOrderPromotion Load (3.0ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (6.1ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (74.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (86.4ms)
Completed 200 OK in 1024ms (Views: 995.7ms | ActiveRecord: 16.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:37:41 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:37:44 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:37:44 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/promotion_rules/new" for 127.0.0.1 at 2017-05-26 00:37:46 -0700
Processing by PromotionRulesController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (4.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (8.0ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering promotion_rules/new.html.slim within layouts/application
  Rendered promotion_rules/_form.html.slim (22.2ms)
  Rendered promotion_rules/new.html.slim within layouts/application (45.4ms)
Completed 500 Internal Server Error in 85ms (ActiveRecord: 12.0ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @promotion_rule]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/promotion_rules/_form.html.slim:1:in `_app_views_promotion_rules__form_html_slim__4518230481427888513_70333358757060'
app/views/promotion_rules/new.html.slim:3:in `_app_views_promotion_rules_new_html_slim__647517746535724029_70333359520260'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (11.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (10.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (57.7ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 00:37:50 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.1ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (7.7ms)
  [1m[36mOrderPromotion Load (1.1ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (0.7ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.3ms)
  Rendered coupon_lists/show.html.slim within layouts/application (76.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (97.0ms)
Completed 200 OK in 1086ms (Views: 1046.7ms | ActiveRecord: 10.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:37:51 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:37:54 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:37:54 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:39:05 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (9.8ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (24.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  Rendered layouts/_menu.slim (20.4ms)
Completed 200 OK in 348ms (Views: 325.5ms | ActiveRecord: 15.4ms)


Started GET "/price_rules" for 127.0.0.1 at 2017-05-26 00:39:12 -0700
Processing by PriceRulesController#index as HTML
  [1m[36mWorker Load (7.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/index.html.slim within layouts/application
  [1m[36mCity Load (3.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered price_rules/index.html.slim within layouts/application (38.9ms)
Completed 500 Internal Server Error in 78ms (ActiveRecord: 11.2ms)


  
ActionView::Template::Error (undefined method `categories' for nil:NilClass):
    1: - current_city.categories.each do |category|
    2:   .panel.panel-default
    3:     .panel-heading
    4:       = category.name
  
app/views/price_rules/index.html.slim:1:in `_app_views_price_rules_index_html_slim___3756435112053516130_70333374936660'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (8.4ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (52.0ms)
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:39:23 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (3.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (1.6ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (25.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  Rendered layouts/_menu.slim (89.9ms)
Completed 200 OK in 868ms (Views: 823.3ms | ActiveRecord: 8.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:39:24 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:39:27 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:39:27 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/settlement_rules" for 127.0.0.1 at 2017-05-26 00:39:36 -0700
Processing by SettlementRulesController#index as HTML
  [1m[36mWorker Load (2.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 33ms (ActiveRecord: 3.4ms)


  
NoMethodError (undefined method `settlement_rules' for nil:NilClass):
  
app/controllers/settlement_rules_controller.rb:7:in `index'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (7.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (52.9ms)
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:39:38 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (4.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (1.7ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (27.5ms)
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (10.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  Rendered layouts/_menu.slim (95.3ms)
Completed 200 OK in 1023ms (Views: 961.1ms | ActiveRecord: 31.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:39:39 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:39:42 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:39:42 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users" for 127.0.0.1 at 2017-05-26 00:39:45 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (5.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (32.6ms)
Completed 200 OK in 343ms (Views: 281.4ms | ActiveRecord: 2.7ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 00:39:48 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (8.3ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (4.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (1.5ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (0.4ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (125.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (21.0ms)
Completed 200 OK in 689ms (Views: 581.1ms | ActiveRecord: 27.0ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 00:39:52 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  Rendered coupons/_form.html.slim (28.3ms)
  Rendered coupons/new.html.slim within layouts/application (42.2ms)
Completed 500 Internal Server Error in 81ms (ActiveRecord: 2.7ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@user, @coupon]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/coupons/_form.html.slim:1:in `_app_views_coupons__form_html_slim___1798393250227912131_70333369779080'
app/views/coupons/new.html.slim:3:in `_app_views_coupons_new_html_slim___3256250207797160810_70333376831940'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (16.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (59.2ms)
Started GET "/users/1" for 127.0.0.1 at 2017-05-26 00:39:55 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (4.1ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (1.8ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (0.3ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (136.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (51.8ms)
Completed 200 OK in 1479ms (Views: 1342.5ms | ActiveRecord: 19.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:39:57 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:40:00 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:40:00 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/user_cards/1/charge" for 127.0.0.1 at 2017-05-26 00:45:50 -0700
Processing by UserCardsController#charge as HTML
  Parameters: {"user_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (8.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (0.3ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (10.2ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering user_cards/charge.html.slim within layouts/application
  Rendered user_cards/charge.html.slim within layouts/application (78.7ms)
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (186.0ms)
Completed 200 OK in 1033ms (Views: 958.3ms | ActiveRecord: 33.2ms)


Started POST "/users/1/user_cards/1/charge" for 127.0.0.1 at 2017-05-26 00:45:55 -0700
Processing by UserCardsController#charge as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"HxPb/XVHorsuWBVmplp7/Ve7FHjglv2FY24crlg8VseplnRf0RPqiCGG484AF/ORRHSH/jYDP7IFIY1YKs6pKg==", "user_card_log"=>{"real_money"=>"0.0", "fake_money"=>"0.0"}, "commit"=>"Create User card log", "user_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (4.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (1.5ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mUserCard Load (11.5ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  [1m[35m (5.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (37.9ms)[0m  [1m[32mINSERT INTO `user_card_logs` (`kind`, `loggable_type`, `loggable_id`, `user_card_id`, `created_at`, `updated_at`) VALUES (1, 'Worker', 2, 1, '2017-05-26 00:45:55', '2017-05-26 00:45:55')[0m
  [1m[35m (44.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/1
Completed 302 Found in 155ms (ActiveRecord: 108.0ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 00:45:55 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (10.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (4.3ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (1.4ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (2.5ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.1ms)
  Rendered users/show.html.slim within layouts/application (193.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (15.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (152.2ms)
Completed 200 OK in 2325ms (Views: 2066.3ms | ActiveRecord: 50.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:45:58 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:45:59 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:45:59 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 00:49:24 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (9.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  Rendered coupons/_form.html.slim (23.2ms)
  Rendered coupons/new.html.slim within layouts/application (28.0ms)
Completed 500 Internal Server Error in 61ms (ActiveRecord: 12.8ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@user, @coupon]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/coupons/_form.html.slim:1:in `_app_views_coupons__form_html_slim___1798393250227912131_70333370386860'
app/views/coupons/new.html.slim:3:in `_app_views_coupons_new_html_slim___3256250207797160810_70333366300660'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (8.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (56.7ms)
Started GET "/users/1" for 127.0.0.1 at 2017-05-26 00:49:31 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (4.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (1.1ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (15.7ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (0.9ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (88.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (78.3ms)
Completed 200 OK in 1400ms (Views: 1289.9ms | ActiveRecord: 33.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:49:33 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:49:36 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:49:36 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:50:28 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (2.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (8.4ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (28.3ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  Rendered layouts/_menu.slim (39.3ms)
Completed 200 OK in 411ms (Views: 331.1ms | ActiveRecord: 14.6ms)


Started GET "/user_card_charge_settings/1" for 127.0.0.1 at 2017-05-26 00:50:40 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (11.7ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (25.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (36.8ms)
Completed 200 OK in 441ms (Views: 411.3ms | ActiveRecord: 16.5ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:50:43 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (4.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (1.5ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` IS NULL ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (19.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  Rendered layouts/_menu.slim (32.8ms)
Completed 200 OK in 473ms (Views: 453.5ms | ActiveRecord: 8.8ms)


Started GET "/user_card_charge_settings/1/edit" for 127.0.0.1 at 2017-05-26 00:50:48 -0700
Processing by UserCardChargeSettingsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (1.0ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/edit.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (17.9ms)
  Rendered user_card_charge_settings/edit.html.slim within layouts/application (30.3ms)
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (77.6ms)
Completed 200 OK in 566ms (Views: 544.7ms | ActiveRecord: 10.0ms)


Started PATCH "/user_card_charge_settings/1" for 127.0.0.1 at 2017-05-26 00:50:56 -0700
Processing by UserCardChargeSettingsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"jz2KziocGVMe9GfFChhr4MOREFFhUq1nmeV3I2ZSV9o5uCVsjkhRYBEqkW2sVeOM0F6D17fHb1D/qubVFKCoNw==", "user_card_charge_setting"=>{"min"=>"100", "money_give"=>"50.0"}, "commit"=>"Update User card charge setting", "id"=>"1"}
  [1m[36mWorker Load (4.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (0.3ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 1 LIMIT 1[0m
  [1m[35m (9.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (25.4ms)[0m  [1m[33mUPDATE `user_card_charge_settings` SET `min` = 100.0, `updated_at` = '2017-05-26 00:50:56' WHERE `user_card_charge_settings`.`id` = 1[0m
  [1m[35m (23.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings/1
Completed 302 Found in 89ms (ActiveRecord: 63.5ms)


Started GET "/user_card_charge_settings/1" for 127.0.0.1 at 2017-05-26 00:50:56 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (1.1ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (14.2ms)
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (39.8ms)
Completed 200 OK in 762ms (Views: 748.0ms | ActiveRecord: 4.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:50:57 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:50:58 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:50:58 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/settlement_rules" for 127.0.0.1 at 2017-05-26 00:51:02 -0700
Processing by SettlementRulesController#index as HTML
  [1m[36mWorker Load (8.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
Completed 500 Internal Server Error in 47ms (ActiveRecord: 11.8ms)


  
NoMethodError (undefined method `settlement_rules' for nil:NilClass):
  
app/controllers/settlement_rules_controller.rb:7:in `index'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (7.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (53.4ms)
Started GET "/user_card_charge_settings/1" for 127.0.0.1 at 2017-05-26 00:51:04 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (5.4ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (47.2ms)
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (9.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (137.2ms)
Completed 200 OK in 954ms (Views: 905.9ms | ActiveRecord: 21.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:51:05 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:51:08 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:51:08 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/stations" for 127.0.0.1 at 2017-05-26 00:51:13 -0700
Processing by StationsController#index as HTML
  [1m[36mWorker Load (4.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering stations/index.html.slim within layouts/application
  [1m[36mStation Load (52.7ms)[0m  [1m[34mSELECT `stations`.* FROM `stations`[0m
  Rendered stations/index.html.slim within layouts/application (68.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (67.2ms)
Completed 200 OK in 478ms (Views: 325.9ms | ActiveRecord: 72.1ms)


Started GET "/stations/new" for 127.0.0.1 at 2017-05-26 00:51:15 -0700
Processing by StationsController#new as HTML
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering stations/new.html.slim within layouts/application
  Rendered stations/_form.html.slim (33.4ms)
  Rendered stations/new.html.slim within layouts/application (37.4ms)
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (78.0ms)
Completed 200 OK in 505ms (Views: 386.9ms | ActiveRecord: 58.4ms)


Started GET "/addresses/suggestion.json?term=beijng&_type=query&q=beijng&_=1495785068498" for 127.0.0.1 at 2017-05-26 00:52:05 -0700
Processing by AddressesController#suggestion as JSON
  Parameters: {"term"=>"beijng", "_type"=>"query", "q"=>"beijng", "_"=>"1495785068498"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Started GET "/stations" for 127.0.0.1 at 2017-05-26 00:52:30 -0700
Processing by StationsController#index as HTML
  [1m[36mWorker Load (3.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering stations/index.html.slim within layouts/application
  [1m[36mStation Load (2.4ms)[0m  [1m[34mSELECT `stations`.* FROM `stations`[0m
  Rendered stations/index.html.slim within layouts/application (25.0ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (30.6ms)
Completed 200 OK in 513ms (Views: 502.3ms | ActiveRecord: 7.6ms)


Completed 500 Internal Server Error in 25074ms (ActiveRecord: 0.3ms)


  
SocketError (Failed to open TCP connection to api.map.baidu.com:80 (getaddrinfo: Temporary failure in name resolution)):
  
app/controllers/addresses_controller.rb:66:in `suggestion'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (4.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (12.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (13.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (133.8ms)
Started GET "/orders" for 127.0.0.1 at 2017-05-26 00:52:34 -0700
Processing by OrdersController#index as HTML
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering orders/index.html.slim within layouts/application
  [1m[36mOrder Load (4.2ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` ORDER BY `orders`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered orders/index.html.slim within layouts/application (20.6ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (34.3ms)
Completed 200 OK in 370ms (Views: 356.8ms | ActiveRecord: 7.9ms)


Started GET "/users" for 127.0.0.1 at 2017-05-26 00:52:37 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (3.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (8.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (12.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (8.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (109.1ms)
Completed 200 OK in 566ms (Views: 490.8ms | ActiveRecord: 22.7ms)


Started GET "/stations" for 127.0.0.1 at 2017-05-26 00:52:39 -0700
Processing by StationsController#index as HTML
  [1m[36mWorker Load (3.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering stations/index.html.slim within layouts/application
  [1m[36mStation Load (5.0ms)[0m  [1m[34mSELECT `stations`.* FROM `stations`[0m
  Rendered stations/index.html.slim within layouts/application (45.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (22.8ms)
Completed 200 OK in 413ms (Views: 398.9ms | ActiveRecord: 9.6ms)


Started GET "/factories" for 127.0.0.1 at 2017-05-26 00:52:42 -0700
Processing by FactoriesController#index as HTML
  [1m[36mWorker Load (3.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering factories/index.html.slim within layouts/application
  [1m[36mFactory Load (11.4ms)[0m  [1m[34mSELECT  `factories`.* FROM `factories` ORDER BY `factories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered factories/index.html.slim within layouts/application (34.6ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (38.6ms)
Completed 200 OK in 344ms (Views: 310.0ms | ActiveRecord: 16.9ms)


Started GET "/couriers" for 127.0.0.1 at 2017-05-26 00:52:44 -0700
Processing by CouriersController#index as HTML
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering couriers/index.html.slim within layouts/application
  [1m[36mCourier Load (16.8ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` ORDER BY `couriers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered couriers/index.html.slim within layouts/application (28.0ms)
Completed 500 Internal Server Error in 49ms (ActiveRecord: 18.7ms)


  
ActionView::Template::Error (Mysql2::Error: Table 'nezha.couriers' doesn't exist: SELECT  `couriers`.* FROM `couriers` ORDER BY `couriers`.`updated_at` DESC LIMIT 10 OFFSET 0):
    11:       th
    12: 
    13:   tbody
    14:     - @couriers.each do |courier|
    15:       tr
    16:         td = courier.mobile
    17:         td = courier.name
  
app/views/couriers/index.html.slim:14:in `_app_views_couriers_index_html_slim__3094067013633352728_70333419878480'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (24.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (58.6ms)
Started GET "/couriers" for 127.0.0.1 at 2017-05-26 00:54:01 -0700
Processing by CouriersController#index as HTML
  [1m[36mWorker Load (12.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering couriers/index.html.slim within layouts/application
  [1m[36mCourier Load (1.2ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` ORDER BY `couriers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered couriers/index.html.slim within layouts/application (47.6ms)
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (78.8ms)
Completed 200 OK in 982ms (Views: 957.2ms | ActiveRecord: 18.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:54:02 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:54:04 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:54:04 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/price_rules" for 127.0.0.1 at 2017-05-26 00:54:09 -0700
Processing by PriceRulesController#index as HTML
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/index.html.slim within layouts/application
  [1m[36mCity Load (4.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered price_rules/index.html.slim within layouts/application (111.9ms)
Completed 500 Internal Server Error in 163ms (ActiveRecord: 4.5ms)


  
ActionView::Template::Error (undefined method `categories' for nil:NilClass):
    1: - current_city.categories.each do |category|
    2:   .panel.panel-default
    3:     .panel-heading
    4:       = category.name
  
app/views/price_rules/index.html.slim:1:in `_app_views_price_rules_index_html_slim___3756435112053516130_45064420'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (13.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (10.7ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (81.5ms)
Started GET "/couriers" for 127.0.0.1 at 2017-05-26 00:54:38 -0700
Processing by CouriersController#index as HTML
  [1m[36mWorker Load (3.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering couriers/index.html.slim within layouts/application
  [1m[36mCourier Load (8.6ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` ORDER BY `couriers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered couriers/index.html.slim within layouts/application (50.9ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (109.4ms)
Completed 200 OK in 920ms (Views: 869.8ms | ActiveRecord: 13.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:54:39 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:54:42 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:54:42 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories" for 127.0.0.1 at 2017-05-26 00:54:51 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (5.2ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (70.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (24.8ms)
Completed 200 OK in 373ms (Views: 358.2ms | ActiveRecord: 8.1ms)


Started GET "/prices" for 127.0.0.1 at 2017-05-26 00:54:56 -0700
Processing by PricesController#index as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering prices/index.html.slim within layouts/application
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered prices/index.html.slim within layouts/application (48.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (24.1ms)
Completed 200 OK in 377ms (Views: 362.2ms | ActiveRecord: 2.3ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 00:58:44 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (43.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (34.2ms)
Completed 200 OK in 383ms (Views: 363.0ms | ActiveRecord: 6.7ms)


Started GET "/workers/2/edit" for 127.0.0.1 at 2017-05-26 00:58:46 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (3.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (68.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.slim (61.5ms)
Completed 200 OK in 462ms (Views: 437.3ms | ActiveRecord: 17.2ms)


Started PATCH "/workers/2" for 127.0.0.1 at 2017-05-26 00:58:49 -0700
Processing by WorkersController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"EQoJI4k6+aYQUZzsH+xswzVOPAktCIq8rpZqxqEoiiKnj6aBLW6xlR+PakS5oeSvJoGvj/udSIvI2fsw09p1zw==", "worker"=>{"role_ids"=>["", "2", "3", "4"], "city_ids"=>["", "1"]}, "commit"=>"Update Worker", "id"=>"2"}
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (0.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` WHERE `roles`.`id` IN (2, 3, 4)[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` WHERE `cities`.`id` = 1[0m
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[35mSQL (8.4ms)[0m  [1m[32mINSERT INTO `cities_workers` (`city_id`, `worker_id`) VALUES (1, 2)[0m
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/workers
Completed 302 Found in 98ms (ActiveRecord: 28.4ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 00:58:50 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (3.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (6.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (11.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (63.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (97.8ms)
Completed 200 OK in 922ms (Views: 891.7ms | ActiveRecord: 25.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:58:51 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:58:51 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:58:51 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/price_rules" for 127.0.0.1 at 2017-05-26 00:59:00 -0700
Processing by PriceRulesController#index as HTML
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/index.html.slim within layouts/application
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (5.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  [1m[36mPriceRule Load (4.5ms)[0m  [1m[34mSELECT `price_rules`.* FROM `price_rules` WHERE `price_rules`.`city_id` = 1 AND `price_rules`.`category_id` = 1[0m
  Rendered price_rules/index.html.slim within layouts/application (75.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (28.2ms)
Completed 200 OK in 426ms (Views: 397.6ms | ActiveRecord: 17.7ms)


Started GET "/price_rules/new?category=1" for 127.0.0.1 at 2017-05-26 00:59:04 -0700
Processing by PriceRulesController#new as HTML
  Parameters: {"category"=>"1"}
  [1m[36mWorker Load (2.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/new.html.slim within layouts/application
  [1m[36mCategory Load (12.4ms)[0m  [1m[34mSELECT `categories`.* FROM `categories`[0m
  Rendered price_rules/_form.html.slim (73.8ms)
  Rendered price_rules/new.html.slim within layouts/application (79.6ms)
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (27.7ms)
Completed 200 OK in 468ms (Views: 391.2ms | ActiveRecord: 22.2ms)


Started POST "/price_rules" for 127.0.0.1 at 2017-05-26 00:59:12 -0700
Processing by PriceRulesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"xzJi5D2DuitiltUYs1l1sdMq6VZNn3b5e7AK6qWpxv1xt81GmdfyGG1II7AVFP3dwOV60JsKtM4d/5sc11s5EA==", "price_rule"=>{"grade"=>"1", "category_id"=>"1", "from_date(1i)"=>"2017", "from_date(2i)"=>"5", "from_date(3i)"=>"26"}, "commit"=>"Create Price rule"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO `price_rules` (`grade`, `city_id`, `category_id`, `from_date`, `created_at`, `updated_at`) VALUES (1, 1, 1, '2017-05-26', '2017-05-26 00:59:12', '2017-05-26 00:59:12')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/price_rules/1
Completed 302 Found in 40ms (ActiveRecord: 9.4ms)


Started GET "/price_rules/1" for 127.0.0.1 at 2017-05-26 00:59:12 -0700
Processing by PriceRulesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (6.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPriceRule Load (0.5ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering price_rules/show.html.slim within layouts/application
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPrice Load (1.7ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` INNER JOIN `products` ON `prices`.`product_id` = `products`.`id` WHERE `products`.`category_id` = 1 LIMIT 10 OFFSET 0[0m
  [1m[36mProduct Load (2.8ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mProduct Load (2.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  Rendered price_rules/show.html.slim within layouts/application (110.5ms)
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (154.5ms)
Completed 200 OK in 985ms (Views: 911.0ms | ActiveRecord: 30.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:59:13 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 00:59:14 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 00:59:14 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/orders" for 127.0.0.1 at 2017-05-26 00:59:33 -0700
Processing by OrdersController#index as HTML
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering orders/index.html.slim within layouts/application
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` ORDER BY `orders`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered orders/index.html.slim within layouts/application (45.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (27.5ms)
Completed 200 OK in 371ms (Views: 360.6ms | ActiveRecord: 5.0ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:59:35 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (5.1ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (29.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (23.6ms)
Completed 200 OK in 400ms (Views: 384.9ms | ActiveRecord: 10.0ms)


Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 00:59:37 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (2.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (18.4ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (51.0ms)
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (8.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (67.9ms)
Completed 200 OK in 479ms (Views: 459.6ms | ActiveRecord: 14.3ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 00:59:40 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (8.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (2.2ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (24.2ms)
  [1m[36mRole Load (6.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (10.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (150.9ms)
Completed 200 OK in 704ms (Views: 652.6ms | ActiveRecord: 36.4ms)


Started GET "/orders" for 127.0.0.1 at 2017-05-26 00:59:44 -0700
Processing by OrdersController#index as HTML
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering orders/index.html.slim within layouts/application
  [1m[36mOrder Load (5.2ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` ORDER BY `orders`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered orders/index.html.slim within layouts/application (25.7ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (47.9ms)
Completed 200 OK in 410ms (Views: 390.9ms | ActiveRecord: 13.6ms)


Started GET "/users" for 127.0.0.1 at 2017-05-26 00:59:46 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (17.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (18.3ms)
Completed 200 OK in 391ms (Views: 326.5ms | ActiveRecord: 11.5ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 00:59:50 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (11.1ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (5.6ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (1.1ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (4.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (0.3ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (1.3ms)
  Rendered users/show.html.slim within layouts/application (104.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (6.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (150.9ms)
Completed 200 OK in 738ms (Views: 619.4ms | ActiveRecord: 37.1ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 00:59:56 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (3.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  Rendered coupons/_form.html.slim (31.1ms)
  Rendered coupons/new.html.slim within layouts/application (51.7ms)
Completed 500 Internal Server Error in 81ms (ActiveRecord: 3.9ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@user, @coupon]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/coupons/_form.html.slim:1:in `_app_views_coupons__form_html_slim___1798393250227912131_70333422153040'
app/views/coupons/new.html.slim:3:in `_app_views_coupons_new_html_slim___3256250207797160810_70333422425180'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (8.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (54.8ms)
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:04:24 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  Rendered coupons/_form.html.slim (23.0ms)
  Rendered coupons/new.html.slim within layouts/application (55.8ms)
Completed 500 Internal Server Error in 246ms (ActiveRecord: 0.7ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@user, @coupon]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/coupons/_form.html.slim:1:in `_app_views_coupons__form_html_slim___1798393250227912131_70333372266520'
app/views/coupons/new.html.slim:3:in `_app_views_coupons_new_html_slim___3256250207797160810_70333371409640'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (31.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (22.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (145.9ms)
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:05:13 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:05:13 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 01:05:16 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (3.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (251.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (620.9ms)
Completed 200 OK in 2217ms (Views: 2162.0ms | ActiveRecord: 41.6ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 01:05:26 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (2.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (7.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (12.6ms)
  Rendered coupon_lists/index.html.slim within layouts/application (107.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (93.5ms)
Completed 200 OK in 613ms (Views: 565.0ms | ActiveRecord: 38.4ms)


Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 01:05:29 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (3.8ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (46.3ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (76.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (8.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (57.5ms)
Completed 200 OK in 432ms (Views: 401.9ms | ActiveRecord: 16.7ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 01:05:32 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.7ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (51.4ms)
  [1m[36mOrderPromotion Load (0.4ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (3.0ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (146.2ms)
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (125.4ms)
Completed 200 OK in 600ms (Views: 564.2ms | ActiveRecord: 24.2ms)


Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 01:05:36 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.2ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (18.6ms)
  Rendered order_promotions/new.html.slim within layouts/application (44.2ms)
Completed 500 Internal Server Error in 65ms (ActiveRecord: 1.5ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333421525700'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333421639340'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (17.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (70.5ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 01:05:38 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (18.3ms)
  [1m[36mOrderPromotion Load (22.3ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (0.4ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (99.2ms)
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (145.0ms)
Completed 200 OK in 1211ms (Views: 1157.1ms | ActiveRecord: 36.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:05:39 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:05:42 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:05:42 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/promotion_rules/new" for 127.0.0.1 at 2017-05-26 01:05:44 -0700
Processing by PromotionRulesController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering promotion_rules/new.html.slim within layouts/application
  Rendered promotion_rules/_form.html.slim (5.7ms)
  Rendered promotion_rules/new.html.slim within layouts/application (40.6ms)
Completed 500 Internal Server Error in 51ms (ActiveRecord: 0.7ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @promotion_rule]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/promotion_rules/_form.html.slim:1:in `_app_views_promotion_rules__form_html_slim__4518230481427888513_70333365603960'
app/views/promotion_rules/new.html.slim:3:in `_app_views_promotion_rules_new_html_slim__647517746535724029_70333365705420'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (25.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (15.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (112.0ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 01:05:47 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (3.0ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (23.8ms)
  [1m[36mOrderPromotion Load (2.2ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (4.0ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (87.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (91.4ms)
Completed 200 OK in 980ms (Views: 933.2ms | ActiveRecord: 20.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:05:48 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:05:51 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:05:51 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users" for 127.0.0.1 at 2017-05-26 01:06:06 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (6.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (9.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (29.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (23.2ms)
Completed 200 OK in 412ms (Views: 350.2ms | ActiveRecord: 22.4ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 01:06:09 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (0.3ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (0.2ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (0.3ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (62.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (9.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (150.2ms)
Completed 200 OK in 818ms (Views: 645.0ms | ActiveRecord: 20.4ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:07:44 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 81ms (ActiveRecord: 0.8ms)


  
NameError (uninitialized constant CouponsController::Coupcon):
  
app/controllers/coupons_controller.rb:18:in `new'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (7.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (12.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (133.1ms)
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:07:51 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:07:51 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:08:36 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (18.3ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (230.4ms)
  Rendered coupons/new.html.slim within layouts/application (233.9ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (6.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (569.3ms)
Completed 200 OK in 1733ms (Views: 1479.7ms | ActiveRecord: 39.3ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:08:40 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:08:40 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupons" for 127.0.0.1 at 2017-05-26 01:08:47 -0700
  
AbstractController::ActionNotFound (The action 'index' could not be found for CouponsController):
  
actionpack (5.0.2) lib/abstract_controller/base.rb:121:in `process'
actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
warden (1.2.7) lib/warden/manager.rb:35:in `catch'
warden (1.2.7) lib/warden/manager.rb:35:in `call'
rack (2.0.2) lib/rack/etag.rb:25:in `call'
rack (2.0.2) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.2) lib/rack/head.rb:12:in `call'
rack (2.0.2) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.2) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/unknown_action.html.erb within rescues/layout
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/unknown_action.html.erb within rescues/layout (1.1ms)
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:08:57 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (12.7ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (43.0ms)
  Rendered coupons/new.html.slim within layouts/application (57.5ms)
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (132.4ms)
Completed 200 OK in 1032ms (Views: 992.1ms | ActiveRecord: 19.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:08:58 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:09:01 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:09:01 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/users/1/coupons" for 127.0.0.1 at 2017-05-26 01:09:06 -0700
Processing by CouponsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"HwsCro+1FNEW67IzYIJx2NkOQcS4Co82D6bCtiep5TKpjq0MK+Fc4hk1RJvGz/m0ysHSQm6fTQFp6VNAVVsa3w==", "coupon"=>{"coupon_list_id"=>""}, "commit"=>"Create Coupon", "user_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.1ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 67ms (ActiveRecord: 13.6ms)


  
NoMethodError (undefined method `validity_type' for nil:NilClass):
  
app/models/coupon.rb:6:in `block in <class:Coupon>'
app/controllers/coupons_controller.rb:7:in `create'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (73.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (26.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (230.6ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:09:08 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:09:29 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:09:29 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users" for 127.0.0.1 at 2017-05-26 01:09:32 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (4.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (46.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (81.2ms)
Completed 200 OK in 515ms (Views: 424.9ms | ActiveRecord: 16.7ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 01:09:35 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (1.8ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (0.2ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (0.3ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (53.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (6.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (115.1ms)
Completed 200 OK in 1083ms (Views: 792.2ms | ActiveRecord: 37.6ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:09:40 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (6.9ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (31.4ms)
  Rendered coupons/new.html.slim within layouts/application (67.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (24.0ms)
Completed 200 OK in 479ms (Views: 462.7ms | ActiveRecord: 10.8ms)


Started GET "/coupons" for 127.0.0.1 at 2017-05-26 01:10:40 -0700
  
AbstractController::ActionNotFound (The action 'index' could not be found for CouponsController):
  
actionpack (5.0.2) lib/abstract_controller/base.rb:121:in `process'
actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
warden (1.2.7) lib/warden/manager.rb:35:in `catch'
warden (1.2.7) lib/warden/manager.rb:35:in `call'
rack (2.0.2) lib/rack/etag.rb:25:in `call'
rack (2.0.2) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.2) lib/rack/head.rb:12:in `call'
rack (2.0.2) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.2) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/unknown_action.html.erb within rescues/layout
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/unknown_action.html.erb within rescues/layout (2.9ms)
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:10:42 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (1.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (12.8ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (3.2ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (56.5ms)
  Rendered coupons/new.html.slim within layouts/application (90.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (76.0ms)
Completed 200 OK in 1131ms (Views: 1105.5ms | ActiveRecord: 21.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:10:43 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:10:47 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:10:47 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:10:49 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (20.8ms)
  Rendered coupons/new.html.slim within layouts/application (31.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (50.2ms)
Completed 200 OK in 383ms (Views: 372.9ms | ActiveRecord: 4.7ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:10:51 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (3.5ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (26.0ms)
  Rendered coupons/new.html.slim within layouts/application (38.3ms)
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (16.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (73.3ms)
Completed 200 OK in 578ms (Views: 529.7ms | ActiveRecord: 25.9ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:10:54 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (1.3ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (20.6ms)
  Rendered coupons/new.html.slim within layouts/application (40.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (32.6ms)
Completed 200 OK in 449ms (Views: 434.0ms | ActiveRecord: 6.5ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:11:18 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (1.9ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (32.7ms)
  Rendered coupons/new.html.slim within layouts/application (39.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (30.6ms)
Completed 200 OK in 450ms (Views: 440.7ms | ActiveRecord: 4.2ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:12:17 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (27.5ms)
  Rendered coupons/new.html.slim within layouts/application (44.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (30.8ms)
Completed 200 OK in 528ms (Views: 515.1ms | ActiveRecord: 4.0ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:12:29 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (5.1ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (39.5ms)
  Rendered coupons/new.html.slim within layouts/application (73.0ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (28.9ms)
Completed 200 OK in 451ms (Views: 422.2ms | ActiveRecord: 7.4ms)


Started GET "/users" for 127.0.0.1 at 2017-05-26 01:12:32 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (14.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (22.6ms)
Completed 200 OK in 406ms (Views: 328.5ms | ActiveRecord: 13.9ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 01:12:42 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (2.5ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (0.7ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (0.3ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (81.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (6.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (119.1ms)
Completed 200 OK in 664ms (Views: 560.1ms | ActiveRecord: 27.7ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:13:40 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (4.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (11.7ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (51.1ms)
  Rendered coupons/new.html.slim within layouts/application (66.2ms)
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (5.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (346.8ms)
Completed 200 OK in 1008ms (Views: 962.4ms | ActiveRecord: 40.0ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:13:44 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (9.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (52.2ms)
  Rendered coupons/new.html.slim within layouts/application (66.4ms)
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (13.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (83.0ms)
Completed 200 OK in 557ms (Views: 512.8ms | ActiveRecord: 31.0ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:13:45 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (6.9ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (65.9ms)
  Rendered coupons/new.html.slim within layouts/application (69.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (27.5ms)
Completed 200 OK in 441ms (Views: 423.0ms | ActiveRecord: 10.7ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:13:47 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (3.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (0.4ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (25.7ms)
  Rendered coupons/new.html.slim within layouts/application (46.9ms)
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (89.0ms)
Completed 200 OK in 561ms (Views: 528.1ms | ActiveRecord: 10.7ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:13:58 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (5.7ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (37.8ms)
  Rendered coupons/new.html.slim within layouts/application (45.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (103.5ms)
Completed 200 OK in 999ms (Views: 977.0ms | ActiveRecord: 17.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:13:59 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:14:00 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:14:00 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:14:02 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (9.5ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (32.7ms)
  Rendered coupons/new.html.slim within layouts/application (41.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (29.3ms)
Completed 200 OK in 440ms (Views: 402.5ms | ActiveRecord: 14.5ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:14:04 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (16.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (11.9ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (33.8ms)
  Rendered coupons/new.html.slim within layouts/application (47.0ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (38.6ms)
Completed 200 OK in 475ms (Views: 429.5ms | ActiveRecord: 31.2ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:14:06 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (1.6ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (37.1ms)
  Rendered coupons/new.html.slim within layouts/application (58.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (26.6ms)
Completed 200 OK in 459ms (Views: 442.1ms | ActiveRecord: 7.2ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:14:07 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (4.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (9.6ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (27.8ms)
  Rendered coupons/new.html.slim within layouts/application (35.4ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (65.1ms)
Completed 200 OK in 627ms (Views: 598.1ms | ActiveRecord: 23.2ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:14:22 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (19.3ms)
  Rendered coupons/new.html.slim within layouts/application (41.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (41.8ms)
Completed 200 OK in 511ms (Views: 497.9ms | ActiveRecord: 4.6ms)


Started POST "/users/1/coupons" for 127.0.0.1 at 2017-05-26 01:14:27 -0700
Processing by CouponsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"8f8KGWntQbOqh7nIdfN1qjTj7fQ0zEhbTNGK9VZvEMNHeqW7zbkJgKVZT2DTvv3GJyx+cuJZimwqnhsDJJ3vLg==", "coupon"=>{"coupon_list_id"=>""}, "commit"=>"Create Coupon", "user_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (4.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 38ms (ActiveRecord: 7.7ms)


  
NoMethodError (undefined method `validity_type' for nil:NilClass):
  
app/models/coupon.rb:6:in `block in <class:Coupon>'
app/controllers/coupons_controller.rb:7:in `create'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (33.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (28.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (239.1ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:14:28 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:14:37 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:14:37 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:14:45 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (4.2ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (42.5ms)
  Rendered coupons/new.html.slim within layouts/application (57.8ms)
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (9.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (12.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (147.3ms)
Completed 200 OK in 695ms (Views: 643.2ms | ActiveRecord: 42.6ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 01:15:08 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (6.4ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (5.8ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (1.1ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (134.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (84.4ms)
Completed 200 OK in 1096ms (Views: 1006.5ms | ActiveRecord: 24.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:15:09 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:15:12 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:15:12 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/user_cards/1/charge" for 127.0.0.1 at 2017-05-26 01:15:54 -0700
Processing by UserCardsController#charge as HTML
  Parameters: {"user_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (2.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (14.2ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering user_cards/charge.html.slim within layouts/application
  Rendered user_cards/charge.html.slim within layouts/application (28.8ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (7.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (136.6ms)
Completed 200 OK in 636ms (Views: 569.8ms | ActiveRecord: 41.0ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:16:00 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (3.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (3.0ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (43.4ms)
  Rendered coupons/new.html.slim within layouts/application (64.1ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (51.7ms)
Completed 200 OK in 498ms (Views: 483.1ms | ActiveRecord: 9.1ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 01:16:02 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (45.5ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (38.6ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (9.9ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (0.7ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (208.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (73.4ms)
Completed 200 OK in 1145ms (Views: 942.7ms | ActiveRecord: 110.3ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:16:11 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (0.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (37.4ms)
  Rendered coupons/new.html.slim within layouts/application (59.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (80.7ms)
Completed 200 OK in 573ms (Views: 544.6ms | ActiveRecord: 8.0ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 01:17:21 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (8.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (5.8ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (12.1ms)
  Rendered coupon_lists/index.html.slim within layouts/application (95.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (24.0ms)
Completed 200 OK in 389ms (Views: 350.1ms | ActiveRecord: 16.1ms)


Started GET "/users" for 127.0.0.1 at 2017-05-26 01:22:19 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (3.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (7.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (27.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (68.2ms)
Completed 200 OK in 572ms (Views: 476.1ms | ActiveRecord: 27.3ms)


Started GET "/users/1/edit" for 127.0.0.1 at 2017-05-26 01:22:23 -0700
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/edit.html.slim within layouts/application
  Rendered users/_form.html.slim (17.8ms)
  Rendered users/edit.html.slim within layouts/application (23.6ms)
Completed 500 Internal Server Error in 101ms (ActiveRecord: 5.2ms)


  
SyntaxError (/home/user/Desktop/workspace/qiye/app/views/users/_form.html.slim:8: syntax error, unexpected tLABEL
ls.escape_html_safe((renderer: BootstrapPagination::Rails)))
                              ^):
  
app/views/users/_form.html.slim:8: syntax error, unexpected tLABEL
app/views/users/edit.html.slim:3:in `_app_views_users_edit_html_slim___4211245119970514849_70333372036880'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (19.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (21.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (11.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (130.1ms)
Started GET "/users" for 127.0.0.1 at 2017-05-26 01:22:27 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (39.2ms)
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (57.5ms)
Completed 200 OK in 1001ms (Views: 918.2ms | ActiveRecord: 13.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:22:28 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:22:32 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:22:32 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1" for 127.0.0.1 at 2017-05-26 01:22:39 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (2.2ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (6.7ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (22.2ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (11.8ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (101.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (33.1ms)
Completed 200 OK in 684ms (Views: 537.2ms | ActiveRecord: 56.0ms)


Started GET "/users/1/edit" for 127.0.0.1 at 2017-05-26 01:22:55 -0700
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/edit.html.slim within layouts/application
  Rendered users/_form.html.slim (15.9ms)
  Rendered users/edit.html.slim within layouts/application (32.1ms)
Completed 500 Internal Server Error in 130ms (ActiveRecord: 14.8ms)


  
SyntaxError (/home/user/Desktop/workspace/qiye/app/views/users/_form.html.slim:8: syntax error, unexpected tLABEL
ls.escape_html_safe((renderer: BootstrapPagination::Rails)))
                              ^):
  
app/views/users/_form.html.slim:8: syntax error, unexpected tLABEL
app/views/users/edit.html.slim:3:in `_app_views_users_edit_html_slim___4211245119970514849_70333421295380'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (14.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (52.3ms)
Started GET "/users/1/edit" for 127.0.0.1 at 2017-05-26 01:23:08 -0700
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (5.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (7.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/edit.html.slim within layouts/application
  Rendered users/_form.html.slim (39.7ms)
  Rendered users/edit.html.slim within layouts/application (56.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (71.9ms)
Completed 200 OK in 1109ms (Views: 978.5ms | ActiveRecord: 23.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:23:10 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:23:12 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:23:12 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users" for 127.0.0.1 at 2017-05-26 01:23:17 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (16.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (62.7ms)
Completed 200 OK in 558ms (Views: 492.7ms | ActiveRecord: 8.0ms)


Started GET "/stations" for 127.0.0.1 at 2017-05-26 01:23:23 -0700
Processing by StationsController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering stations/index.html.slim within layouts/application
  [1m[36mStation Load (18.0ms)[0m  [1m[34mSELECT `stations`.* FROM `stations`[0m
  Rendered stations/index.html.slim within layouts/application (73.3ms)
  [1m[36mRole Load (6.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (120.7ms)
Completed 200 OK in 559ms (Views: 426.0ms | ActiveRecord: 54.9ms)


Started GET "/factories" for 127.0.0.1 at 2017-05-26 01:23:26 -0700
Processing by FactoriesController#index as HTML
  [1m[36mWorker Load (3.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering factories/index.html.slim within layouts/application
  [1m[36mFactory Load (48.0ms)[0m  [1m[34mSELECT  `factories`.* FROM `factories` ORDER BY `factories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered factories/index.html.slim within layouts/application (138.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (40.9ms)
Completed 200 OK in 434ms (Views: 304.8ms | ActiveRecord: 110.2ms)


Started GET "/stations" for 127.0.0.1 at 2017-05-26 01:23:28 -0700
Processing by StationsController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering stations/index.html.slim within layouts/application
  [1m[36mStation Load (1.5ms)[0m  [1m[34mSELECT `stations`.* FROM `stations`[0m
  Rendered stations/index.html.slim within layouts/application (48.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (203.8ms)
Completed 200 OK in 968ms (Views: 949.8ms | ActiveRecord: 10.8ms)


Started GET "/stations/new" for 127.0.0.1 at 2017-05-26 01:23:29 -0700
Processing by StationsController#new as HTML
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering stations/new.html.slim within layouts/application
  Rendered stations/_form.html.slim (96.2ms)
  Rendered stations/new.html.slim within layouts/application (129.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (143.4ms)
Completed 200 OK in 981ms (Views: 849.6ms | ActiveRecord: 9.9ms)


Started GET "/price_rules" for 127.0.0.1 at 2017-05-26 01:23:39 -0700
Processing by PriceRulesController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/index.html.slim within layouts/application
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (22.6ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  [1m[36mPriceRule Load (0.4ms)[0m  [1m[34mSELECT `price_rules`.* FROM `price_rules` WHERE `price_rules`.`city_id` = 1 AND `price_rules`.`category_id` = 1[0m
  [1m[36mCategory Load (4.1ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendered price_rules/index.html.slim within layouts/application (138.1ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (24.4ms)
Completed 200 OK in 423ms (Views: 361.6ms | ActiveRecord: 50.7ms)


Started GET "/price_rules/1/edit" for 127.0.0.1 at 2017-05-26 01:23:43 -0700
Processing by PriceRulesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPriceRule Load (1.9ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`id` = 1 LIMIT 1[0m
  Rendering price_rules/edit.html.slim within layouts/application
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT `categories`.* FROM `categories`[0m
  Rendered price_rules/_form.html.slim (66.8ms)
  Rendered price_rules/edit.html.slim within layouts/application (82.2ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (53.2ms)
Completed 200 OK in 448ms (Views: 420.8ms | ActiveRecord: 7.3ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:25:42 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (3.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (17.9ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (88.2ms)
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (9.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (237.3ms)
Completed 200 OK in 2058ms (Views: 1739.8ms | ActiveRecord: 82.6ms)


Started GET "/users" for 127.0.0.1 at 2017-05-26 01:26:01 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (9.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (20.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (9.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (113.9ms)
Completed 200 OK in 1194ms (Views: 1088.5ms | ActiveRecord: 35.4ms)


Started GET "/users/1/edit" for 127.0.0.1 at 2017-05-26 01:26:04 -0700
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (4.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/edit.html.slim within layouts/application
  Rendered users/_form.html.slim (30.1ms)
  Rendered users/edit.html.slim within layouts/application (50.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (15.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (118.8ms)
Completed 200 OK in 763ms (Views: 655.9ms | ActiveRecord: 33.1ms)


Started GET "/users" for 127.0.0.1 at 2017-05-26 01:26:06 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (33.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (125.3ms)
Completed 200 OK in 1256ms (Views: 1163.7ms | ActiveRecord: 14.3ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 01:26:07 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (8.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (4.4ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (2.9ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (6.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (3.1ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (150.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (98.0ms)
Completed 200 OK in 1166ms (Views: 1027.3ms | ActiveRecord: 42.5ms)


Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:26:12 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  Rendered coupons/_form.html.slim (13.8ms)
  Rendered coupons/new.html.slim within layouts/application (39.9ms)
Completed 500 Internal Server Error in 68ms (ActiveRecord: 1.9ms)


  
SyntaxError (/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:9: syntax error, unexpected keyword_end, expecting ')'
concat(("</div>".freeze)); end; @output_buffer.safe_concat((
                              ^
/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:11: syntax error, unexpected keyword_ensure, expecting ')'
          ensure
                ^
/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:13: syntax error, unexpected keyword_end, expecting ')'
          end
             ^):
  
app/views/coupons/_form.html.slim:9: syntax error, unexpected keyword_end, expecting ')'
app/views/coupons/_form.html.slim:11: syntax error, unexpected keyword_ensure, expecting ')'
app/views/coupons/_form.html.slim:13: syntax error, unexpected keyword_end, expecting ')'
app/views/coupons/new.html.slim:3:in `_app_views_coupons_new_html_slim___3256250207797160810_70333368124760'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (12.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (57.3ms)
Started GET "/users/1" for 127.0.0.1 at 2017-05-26 01:27:05 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (7.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (3.2ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (3.5ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (2.2ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (2.5ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered users/show.html.slim within layouts/application (85.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (90.0ms)
Completed 200 OK in 1229ms (Views: 1117.3ms | ActiveRecord: 32.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:27:06 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:27:10 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:27:10 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:27:53 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  Rendered coupons/_form.html.slim (14.3ms)
  Rendered coupons/new.html.slim within layouts/application (27.0ms)
Completed 500 Internal Server Error in 51ms (ActiveRecord: 3.9ms)


  
SyntaxError (/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:9: syntax error, unexpected keyword_end, expecting ')'
concat(("</div>".freeze)); end; @output_buffer.safe_concat((
                              ^
/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:10: syntax error, unexpected keyword_ensure, expecting ')'
          ensure
                ^
/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:12: syntax error, unexpected keyword_end, expecting ')'
          end
             ^):
  
app/views/coupons/_form.html.slim:9: syntax error, unexpected keyword_end, expecting ')'
app/views/coupons/_form.html.slim:10: syntax error, unexpected keyword_ensure, expecting ')'
app/views/coupons/_form.html.slim:12: syntax error, unexpected keyword_end, expecting ')'
app/views/coupons/new.html.slim:3:in `_app_views_coupons_new_html_slim___3256250207797160810_42764900'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (12.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (57.7ms)
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:28:37 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (5.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (0.6ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists` INNER JOIN `promotion_rules` ON `promotion_rules`.`coupon_list_id` = `coupon_lists`.`id` WHERE (promotion_rules.start_on <= '2017-05-26' and promotion_rules.end_on >= '2017-05-26')[0m
  Rendered coupons/_form.html.slim (83.4ms)
  Rendered coupons/new.html.slim within layouts/application (104.8ms)
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (12.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (183.0ms)
Completed 200 OK in 1914ms (Views: 1866.2ms | ActiveRecord: 26.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:28:39 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:28:41 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:28:41 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:29:34 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  Rendered coupons/_form.html.slim (7.8ms)
  Rendered coupons/new.html.slim within layouts/application (31.0ms)
Completed 500 Internal Server Error in 62ms (ActiveRecord: 4.9ms)


  
SyntaxError (/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:5: syntax error, unexpected ','
association :coupon_list <!--, collection: CouponList.can_be
                              ^
/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:5: syntax error, unexpected ')', expecting keyword_do_LAMBDA or tLAMBEG
 CouponList.can_be_assigns-->))).to_s)); 
                              ^
/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:9: syntax error, unexpected keyword_end, expecting ')'
concat(("</div>".freeze)); end; @output_buffer.safe_concat((
                              ^
/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:10: syntax error, unexpected keyword_ensure, expecting ')'
          ensure
                ^
/home/user/Desktop/workspace/qiye/app/views/coupons/_form.html.slim:12: syntax error, unexpected keyword_end, expecting ')'
          end
             ^):
  
app/views/coupons/_form.html.slim:5: syntax error, unexpected ','
app/views/coupons/_form.html.slim:5: syntax error, unexpected ')', expecting keyword_do_LAMBDA or tLAMBEG
app/views/coupons/_form.html.slim:9: syntax error, unexpected keyword_end, expecting ')'
app/views/coupons/_form.html.slim:10: syntax error, unexpected keyword_ensure, expecting ')'
app/views/coupons/_form.html.slim:12: syntax error, unexpected keyword_end, expecting ')'
app/views/coupons/new.html.slim:3:in `_app_views_coupons_new_html_slim___3256250207797160810_70333374919400'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (33.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (203.4ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:29:35 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/users/1/coupons/new" for 127.0.0.1 at 2017-05-26 01:35:18 -0700
Processing by CouponsController#new as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mWorker Load (3.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering coupons/new.html.slim within layouts/application
  [1m[36mCouponList Load (1.6ms)[0m  [1m[34mSELECT `coupon_lists`.* FROM `coupon_lists`[0m
  Rendered coupons/_form.html.slim (49.2ms)
  Rendered coupons/new.html.slim within layouts/application (79.2ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (78.9ms)
Completed 200 OK in 1055ms (Views: 1020.5ms | ActiveRecord: 14.5ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:35:21 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:35:21 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/users/1/coupons" for 127.0.0.1 at 2017-05-26 01:35:27 -0700
Processing by CouponsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"i87nOd12YsWxe1Uo6mK57JLOZD/BUQlNBqTOx0lhllI9S0ibeSIq9r6lo4BMLzGAgQH3uRfEy3pg618xO5Npvw==", "coupon"=>{"coupon_list_id"=>"1"}, "commit"=>"Create Coupon", "user_id"=>"1"}
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCouponList Load (9.7ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  [1m[35mSQL (106.1ms)[0m  [1m[32mINSERT INTO `coupons` (`coupon_list_id`, `user_id`, `valid_from`, `valid_to`, `created_at`, `updated_at`) VALUES (1, 1, '2017-05-26', '2017-05-31', '2017-05-26 01:35:27', '2017-05-26 01:35:27')[0m
  [1m[35m (59.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/users/1
Completed 302 Found in 204ms (ActiveRecord: 181.4ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 01:35:27 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (5.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (5.5ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (61.8ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (26.6ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (9.7ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mCouponList Load (12.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendered collection of coupons/_coupon.html.slim [1 times] (28.3ms)
  Rendered users/show.html.slim within layouts/application (210.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (63.4ms)
Completed 200 OK in 1086ms (Views: 862.3ms | ActiveRecord: 140.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:35:28 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:35:30 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:35:30 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/prices" for 127.0.0.1 at 2017-05-26 01:35:41 -0700
Processing by PricesController#index as HTML
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering prices/index.html.slim within layouts/application
  [1m[36mCategory Load (2.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered prices/index.html.slim within layouts/application (39.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (12.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (82.3ms)
Completed 200 OK in 422ms (Views: 380.5ms | ActiveRecord: 25.4ms)


Started GET "/categories" for 127.0.0.1 at 2017-05-26 01:35:43 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (7.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (11.8ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (34.4ms)
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (26.2ms)
Completed 200 OK in 375ms (Views: 338.7ms | ActiveRecord: 21.1ms)


Started GET "/cities" for 127.0.0.1 at 2017-05-26 01:35:47 -0700
Processing by CitiesController#index as HTML
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering cities/index.html.slim within layouts/application
  [1m[36mCity Load (9.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (3.2ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  Rendered cities/index.html.slim within layouts/application (62.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (29.2ms)
Completed 200 OK in 464ms (Views: 431.5ms | ActiveRecord: 16.3ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 01:35:49 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (2.0ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (29.8ms)
  Rendered coupon_lists/index.html.slim within layouts/application (53.2ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (72.7ms)
Completed 200 OK in 508ms (Views: 491.5ms | ActiveRecord: 5.9ms)


Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 01:35:55 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.5ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (46.5ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (56.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (38.2ms)
Completed 200 OK in 460ms (Views: 427.3ms | ActiveRecord: 7.5ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:36:05 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (163.2ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (185.9ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (23.9ms)
Completed 200 OK in 688ms (Views: 494.4ms | ActiveRecord: 167.2ms)


Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 01:36:09 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (6.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (21.5ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (46.0ms)
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (122.0ms)
Completed 200 OK in 566ms (Views: 516.8ms | ActiveRecord: 23.8ms)


Started POST "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:36:18 -0700
Processing by UserCardChargeSettingsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"mdXfad3JP1bV/I1xZqD34za4Wj9mhvKLpFbLTHNR/covUHDLeZ13Zdoie9nA7X+PJXfJubATMLzCGVq6AaMCJw==", "user_card_charge_setting"=>{"min"=>"100", "money_give"=>"50"}, "commit"=>"Create User card charge setting"}
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (34.7ms)[0m  [1m[32mINSERT INTO `user_card_charge_settings` (`min`, `money_give`, `created_at`, `updated_at`) VALUES (100.0, 50.0, '2017-05-26 01:36:18', '2017-05-26 01:36:18')[0m
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings/2
Completed 302 Found in 93ms (ActiveRecord: 40.2ms)


Started GET "/user_card_charge_settings/2" for 127.0.0.1 at 2017-05-26 01:36:18 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (2.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (3.3ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 2 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (63.0ms)
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (203.5ms)
Completed 200 OK in 1141ms (Views: 1102.5ms | ActiveRecord: 10.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:36:19 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:36:21 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:36:21 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:36:24 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (10.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (2.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (2.2ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (70.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (48.4ms)
Completed 200 OK in 615ms (Views: 583.2ms | ActiveRecord: 16.3ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 01:38:20 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (3.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (5.8ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (11.5ms)
  Rendered coupon_lists/index.html.slim within layouts/application (43.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (25.5ms)
Completed 200 OK in 416ms (Views: 378.5ms | ActiveRecord: 10.8ms)


Started GET "/coupon_lists/new" for 127.0.0.1 at 2017-05-26 01:38:23 -0700
Processing by CouponListsController#new as HTML
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/new.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (51.2ms)
  Rendered coupon_lists/new.html.slim within layouts/application (64.3ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (74.8ms)
Completed 200 OK in 481ms (Views: 455.2ms | ActiveRecord: 11.8ms)


Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 01:38:26 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (4.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (3.0ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (45.8ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (83.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (5.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (104.5ms)
Completed 200 OK in 607ms (Views: 559.5ms | ActiveRecord: 16.9ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 01:38:30 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (4.7ms)
  [1m[36mOrderPromotion Load (22.7ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (4.2ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (135.4ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (9.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (85.4ms)
Completed 200 OK in 530ms (Views: 463.6ms | ActiveRecord: 46.6ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:38:37 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (2.2ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (18.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (86.8ms)
Completed 200 OK in 644ms (Views: 613.0ms | ActiveRecord: 20.7ms)


Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 01:38:49 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (5.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (49.9ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (78.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (71.0ms)
Completed 200 OK in 545ms (Views: 525.9ms | ActiveRecord: 10.3ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:38:52 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.3ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (28.1ms)
  [1m[36mRole Load (9.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (159.7ms)
Completed 200 OK in 921ms (Views: 887.0ms | ActiveRecord: 18.6ms)


Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 01:41:13 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (32.9ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (61.3ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (823.5ms)
Completed 200 OK in 2380ms (Views: 2277.6ms | ActiveRecord: 26.2ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:41:22 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:41:22 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:41:26 -0700
Processing by UserCardChargeSettingsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"YyoV1ohjKnhlOBv7qIwCTiCBiy2qXZr/iqEuhv+0U77Vr7p0LDdiS2rm7VMOwYoiM04Yq3zIWMjs7r9wjUasUw==", "user_card_charge_setting"=>{"min"=>"200", "money_give"=>"150"}, "commit"=>"Create User card charge setting"}
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (3.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO `user_card_charge_settings` (`min`, `money_give`, `created_at`, `updated_at`) VALUES (200.0, 150.0, '2017-05-26 01:41:26', '2017-05-26 01:41:26')[0m
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings/3
Completed 302 Found in 49ms (ActiveRecord: 10.2ms)


Started GET "/user_card_charge_settings/3" for 127.0.0.1 at 2017-05-26 01:41:27 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (1.9ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 3 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (20.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (8.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (84.6ms)
Completed 200 OK in 958ms (Views: 936.1ms | ActiveRecord: 13.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:41:28 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:41:30 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:41:30 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:41:35 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.5ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (34.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (44.2ms)
Completed 200 OK in 478ms (Views: 429.6ms | ActiveRecord: 6.5ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:43:30 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (5.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.3ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (40.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (110.5ms)
Completed 200 OK in 912ms (Views: 874.7ms | ActiveRecord: 16.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:43:30 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:43:33 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:43:33 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 01:43:55 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (9.3ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (12.8ms)
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (832.0ms)
Completed 200 OK in 1362ms (Views: 1184.0ms | ActiveRecord: 11.7ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:44:03 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:44:03 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:44:09 -0700
Processing by UserCardChargeSettingsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"t9wkXaMYoqcMbsv2nYxo+DhtAyj6J0+YBncCI62kbl4BWYv/B0zqlAOwPV47weCUK6KQriyyja9gOJPV31aRsw==", "user_card_charge_setting"=>{"min"=>"300", "money_give"=>"250"}, "commit"=>"Create User card charge setting"}
  [1m[36mWorker Load (4.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO `user_card_charge_settings` (`min`, `money_give`, `created_at`, `updated_at`) VALUES (300.0, 250.0, '2017-05-26 01:44:09', '2017-05-26 01:44:09')[0m
  [1m[35m (11.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings/4
Completed 302 Found in 38ms (ActiveRecord: 18.7ms)


Started GET "/user_card_charge_settings/4" for 127.0.0.1 at 2017-05-26 01:44:09 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (2.5ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 4 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (16.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (154.6ms)
Completed 200 OK in 1004ms (Views: 985.9ms | ActiveRecord: 12.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:44:10 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:44:13 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:44:13 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:44:38 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.3ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (51.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (30.2ms)
Completed 200 OK in 616ms (Views: 580.0ms | ActiveRecord: 4.5ms)


Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 01:45:20 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (4.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (5.7ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (9.1ms)
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (892.9ms)
Completed 200 OK in 1637ms (Views: 1530.2ms | ActiveRecord: 10.1ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:45:28 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:45:28 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:45:38 -0700
Processing by UserCardChargeSettingsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"28JGZ6973mEyKDOrla0gG31RYfMnveucWCMYnnd9xoJtR+nFCy+WUj32xQMz4Kh3bp7ydfEoKas+bIloBY85bw==", "user_card_charge_setting"=>{"min"=>"500", "money_give"=>"400"}, "commit"=>"Create User card charge setting"}
  [1m[36mWorker Load (3.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (22.2ms)[0m  [1m[32mINSERT INTO `user_card_charge_settings` (`min`, `money_give`, `created_at`, `updated_at`) VALUES (500.0, 400.0, '2017-05-26 01:45:38', '2017-05-26 01:45:38')[0m
  [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings/5
Completed 302 Found in 94ms (ActiveRecord: 40.9ms)


Started GET "/user_card_charge_settings/5" for 127.0.0.1 at 2017-05-26 01:45:38 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (2.2ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 5 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (31.0ms)
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (128.0ms)
Completed 200 OK in 957ms (Views: 937.3ms | ActiveRecord: 13.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:45:39 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:45:41 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:45:41 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings/5/edit" for 127.0.0.1 at 2017-05-26 01:45:43 -0700
Processing by UserCardChargeSettingsController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (1.6ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 5 LIMIT 1[0m
  Rendering user_card_charge_settings/edit.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (21.5ms)
  Rendered user_card_charge_settings/edit.html.slim within layouts/application (37.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (98.4ms)
Completed 200 OK in 519ms (Views: 501.6ms | ActiveRecord: 7.9ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:45:46 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (3.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.3ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (32.0ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (25.7ms)
Completed 200 OK in 465ms (Views: 451.8ms | ActiveRecord: 6.8ms)


Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 01:46:42 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (17.4ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (39.4ms)
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (894.0ms)
Completed 200 OK in 2145ms (Views: 2089.1ms | ActiveRecord: 13.9ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:46:50 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:46:50 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:46:53 -0700
Processing by UserCardChargeSettingsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"r8YpwaOsNYnIvxUSbTPufiwb8TXoYTCgGc3Geyoy7EQZQ4ZjB/h9usdh47rLfmYSP9Risz708pd/gleNWMATqQ==", "user_card_charge_setting"=>{"min"=>"50", "money_give"=>"10"}, "commit"=>"Create User card charge setting"}
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.5ms)[0m  [1m[32mINSERT INTO `user_card_charge_settings` (`min`, `money_give`, `created_at`, `updated_at`) VALUES (50.0, 10.0, '2017-05-26 01:46:53', '2017-05-26 01:46:53')[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings/6
Completed 302 Found in 44ms (ActiveRecord: 10.2ms)


Started GET "/user_card_charge_settings/6" for 127.0.0.1 at 2017-05-26 01:46:53 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (0.5ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 6 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (20.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (7.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (109.4ms)
Completed 200 OK in 943ms (Views: 921.9ms | ActiveRecord: 14.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:46:54 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:46:56 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:46:56 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:46:59 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (5.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.3ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (30.1ms)
  [1m[36mRole Load (8.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (6.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (150.9ms)
Completed 200 OK in 1736ms (Views: 1682.3ms | ActiveRecord: 24.2ms)


Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 01:47:53 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (31.6ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (41.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (809.0ms)
Completed 200 OK in 2029ms (Views: 1964.5ms | ActiveRecord: 14.5ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:48:00 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:48:00 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:48:06 -0700
Processing by UserCardChargeSettingsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"i0Sb6qu69mzhY/fT17yi2+wtgOc6Bz6M3ajLJ0rHMFo9wTRID+6+X+69AXtx8Sq3/+ITYeyS/Lu751rRODXPtw==", "user_card_charge_setting"=>{"min"=>"10", "money_give"=>"2"}, "commit"=>"Create User card charge setting"}
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO `user_card_charge_settings` (`min`, `money_give`, `created_at`, `updated_at`) VALUES (10.0, 2.0, '2017-05-26 01:48:06', '2017-05-26 01:48:06')[0m
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings/7
Completed 302 Found in 38ms (ActiveRecord: 7.9ms)


Started GET "/user_card_charge_settings/7" for 127.0.0.1 at 2017-05-26 01:48:06 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mWorker Load (0.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (3.2ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 7 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  Rendered user_card_charge_settings/show.html.slim within layouts/application (9.1ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (106.5ms)
Completed 200 OK in 1248ms (Views: 1216.4ms | ActiveRecord: 6.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:48:08 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:48:10 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:48:10 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:48:54 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.4ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (57.1ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (1194.5ms)
Completed 200 OK in 2814ms (Views: 2553.9ms | ActiveRecord: 88.4ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:49:01 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:49:01 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings/new" for 127.0.0.1 at 2017-05-26 01:49:04 -0700
Processing by UserCardChargeSettingsController#new as HTML
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering user_card_charge_settings/new.html.slim within layouts/application
  Rendered user_card_charge_settings/_form.html.slim (26.6ms)
  Rendered user_card_charge_settings/new.html.slim within layouts/application (37.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (24.0ms)
Completed 200 OK in 394ms (Views: 386.3ms | ActiveRecord: 3.5ms)


Started POST "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:49:11 -0700
Processing by UserCardChargeSettingsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"1S/u9g6lkjIErfIgYnaPfAcP9hk75RM3C4JZVMLMNydjqkFUqvHaAQtzBIjEOwcQFMBln+1w0QBtzciisD7Iyg==", "user_card_charge_setting"=>{"min"=>"6", "money_give"=>"1"}, "commit"=>"Create User card charge setting"}
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (4.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (14.3ms)[0m  [1m[32mINSERT INTO `user_card_charge_settings` (`min`, `money_give`, `created_at`, `updated_at`, `city_id`) VALUES (6.0, 1.0, '2017-05-26 01:49:11', '2017-05-26 01:49:11', 1)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings/8
Completed 302 Found in 51ms (ActiveRecord: 25.7ms)


Started GET "/user_card_charge_settings/8" for 127.0.0.1 at 2017-05-26 01:49:11 -0700
Processing by UserCardChargeSettingsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[36mWorker Load (7.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (1.0ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 8 LIMIT 1[0m
  Rendering user_card_charge_settings/show.html.slim within layouts/application
  [1m[36mCity Load (4.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendered user_card_charge_settings/show.html.slim within layouts/application (30.8ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (3.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (126.0ms)
Completed 200 OK in 961ms (Views: 925.9ms | ActiveRecord: 21.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:49:12 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:49:14 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:49:14 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:49:18 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (3.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (8.9ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (47.3ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (41.5ms)
Completed 200 OK in 602ms (Views: 572.7ms | ActiveRecord: 15.6ms)


Started DELETE "/user_card_charge_settings/2" for 127.0.0.1 at 2017-05-26 01:49:32 -0700
Processing by UserCardChargeSettingsController#destroy as HTML
  Parameters: {"authenticity_token"=>"KlHC1w/tXh1gKYh5FAahf9jH01d4Xns09BB6XAFTwFGc1G11q7kWLm/3ftGySykTywhA0a7LuQOSX+uqc6E/vA==", "id"=>"2"}
  [1m[36mWorker Load (1.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCardChargeSetting Load (1.7ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.4ms)[0m  [1m[31mDELETE FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 2[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_card_charge_settings
Completed 302 Found in 48ms (ActiveRecord: 9.3ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 01:49:32 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (3.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.3ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (20.7ms)
  [1m[36mRole Load (4.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (99.8ms)
Completed 200 OK in 1001ms (Views: 966.4ms | ActiveRecord: 16.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:49:33 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:49:36 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:49:36 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/settlement_rules" for 127.0.0.1 at 2017-05-26 01:49:50 -0700
Processing by SettlementRulesController#index as HTML
  [1m[36mWorker Load (7.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering settlement_rules/index.html.slim within layouts/application
  [1m[36mSettlementRule Load (20.1ms)[0m  [1m[34mSELECT  `settlement_rules`.* FROM `settlement_rules` WHERE `settlement_rules`.`city_id` = 1 ORDER BY `settlement_rules`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered settlement_rules/index.html.slim within layouts/application (30.9ms)
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (88.2ms)
Completed 200 OK in 882ms (Views: 703.0ms | ActiveRecord: 125.6ms)


Started GET "/settlement_rules/new" for 127.0.0.1 at 2017-05-26 01:49:53 -0700
Processing by SettlementRulesController#new as HTML
  [1m[36mWorker Load (4.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering settlement_rules/new.html.slim within layouts/application
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (10.1ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  Rendered settlement_rules/_form.html.slim (118.6ms)
  Rendered settlement_rules/new.html.slim within layouts/application (125.4ms)
  [1m[36mRole Load (7.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (98.1ms)
Completed 200 OK in 1147ms (Views: 901.6ms | ActiveRecord: 217.0ms)


Started GET "/settlement_rules" for 127.0.0.1 at 2017-05-26 01:49:56 -0700
Processing by SettlementRulesController#index as HTML
  [1m[36mWorker Load (4.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering settlement_rules/index.html.slim within layouts/application
  [1m[36mSettlementRule Load (5.4ms)[0m  [1m[34mSELECT  `settlement_rules`.* FROM `settlement_rules` WHERE `settlement_rules`.`city_id` = 1 ORDER BY `settlement_rules`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of templates [0 times] (0.3ms)
  Rendered settlement_rules/index.html.slim within layouts/application (43.0ms)
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (105.3ms)
Completed 200 OK in 953ms (Views: 914.0ms | ActiveRecord: 18.9ms)


Started GET "/prices" for 127.0.0.1 at 2017-05-26 01:49:59 -0700
Processing by PricesController#index as HTML
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering prices/index.html.slim within layouts/application
  [1m[36mCategory Load (4.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered prices/index.html.slim within layouts/application (30.3ms)
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (42.5ms)
Completed 200 OK in 400ms (Views: 368.9ms | ActiveRecord: 9.9ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 01:50:02 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (5.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (2.7ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (15.4ms)
  Rendered coupon_lists/index.html.slim within layouts/application (86.3ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (23.3ms)
Completed 200 OK in 411ms (Views: 368.5ms | ActiveRecord: 21.7ms)


Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 01:50:05 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (9.8ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (82.5ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (99.2ms)
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (103.3ms)
Completed 200 OK in 589ms (Views: 551.2ms | ActiveRecord: 25.7ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 01:50:07 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.6ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (9.0ms)
  [1m[36mOrderPromotion Load (0.3ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (3.0ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (107.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (107.9ms)
Completed 200 OK in 603ms (Views: 573.9ms | ActiveRecord: 17.2ms)


Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 01:50:10 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.6ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (22.2ms)
  Rendered order_promotions/new.html.slim within layouts/application (53.1ms)
Completed 500 Internal Server Error in 86ms (ActiveRecord: 1.9ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333526493840'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333526558300'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (144.5ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 01:52:04 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.9ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (30.0ms)
  [1m[36mOrderPromotion Load (8.6ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (0.3ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (74.1ms)
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (4.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (89.2ms)
Completed 200 OK in 1053ms (Views: 1026.2ms | ActiveRecord: 21.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:52:05 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:52:09 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:52:09 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/prices" for 127.0.0.1 at 2017-05-26 01:53:36 -0700
Processing by PricesController#index as HTML
  [1m[36mWorker Load (2.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering prices/index.html.slim within layouts/application
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered prices/index.html.slim within layouts/application (32.5ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (25.3ms)
Completed 200 OK in 419ms (Views: 409.5ms | ActiveRecord: 4.8ms)


Started GET "/categories/1/prices" for 127.0.0.1 at 2017-05-26 01:53:39 -0700
Processing by CategoriesController#prices as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (4.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/prices.html.slim within layouts/application
  [1m[36mPrice Load (13.6ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` INNER JOIN `products` ON `prices`.`product_id` = `products`.`id` WHERE `products`.`category_id` = 1 LIMIT 10 OFFSET 0[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  Rendered categories/prices.html.slim within layouts/application (75.1ms)
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (102.7ms)
Completed 200 OK in 524ms (Views: 383.0ms | ActiveRecord: 106.1ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 01:53:42 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (2.5ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (7.9ms)
  Rendered coupon_lists/index.html.slim within layouts/application (48.8ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (111.2ms)
Completed 200 OK in 558ms (Views: 529.6ms | ActiveRecord: 12.5ms)


Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 01:53:45 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.2ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (66.3ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (90.2ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (104.1ms)
Completed 200 OK in 751ms (Views: 730.0ms | ActiveRecord: 10.2ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 01:53:48 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.8ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (22.0ms)
  [1m[36mOrderPromotion Load (0.3ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (2.0ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.1ms)
  Rendered coupon_lists/show.html.slim within layouts/application (114.2ms)
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (120.7ms)
Completed 200 OK in 762ms (Views: 731.5ms | ActiveRecord: 21.7ms)


Started GET "/coupon_lists/1/promotion_rules/new" for 127.0.0.1 at 2017-05-26 01:57:41 -0700
Processing by PromotionRulesController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering promotion_rules/new.html.slim within layouts/application
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered promotion_rules/_form.html.slim (179.8ms)
  Rendered promotion_rules/new.html.slim within layouts/application (201.3ms)
  [1m[36mRole Load (6.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (662.7ms)
Completed 200 OK in 2317ms (Views: 1990.6ms | ActiveRecord: 58.7ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:57:49 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:57:49 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/coupon_lists/1/promotion_rules" for 127.0.0.1 at 2017-05-26 01:57:54 -0700
Processing by PromotionRulesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"MwglyUNjs94qqgQAxnBO/xi7ePdBBYRtYgE1zBXnluOFjYpr5zf77SV08qhgPcaTC3TrcZeQRloETqQ6ZxVpDg==", "promotion_rule"=>{"city_ids"=>["", "1"], "start_on"=>"2017-05-26", "end_on"=>"2017-05-31"}, "commit"=>"Create Promotion rule", "coupon_list_id"=>"1"}
  [1m[36mWorker Load (2.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  [1m[35m (20.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` WHERE `cities`.`id` = 1[0m
  [1m[35mSQL (33.2ms)[0m  [1m[32mINSERT INTO `promotion_rules` (`coupon_list_id`, `start_on`, `end_on`, `created_at`, `updated_at`) VALUES (1, '2017-05-26', '2017-05-31', '2017-05-26 01:57:54', '2017-05-26 01:57:54')[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `cities_promotion_rules` (`city_id`, `promotion_rule_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-05-26 01:57:54', '2017-05-26 01:57:54')[0m
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/coupon_lists/1
Completed 302 Found in 310ms (ActiveRecord: 106.2ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 01:57:54 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (10.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (33.0ms)
  [1m[36mOrderPromotion Load (1.7ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (5.4ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (2.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (33.9ms)
  Rendered coupon_lists/show.html.slim within layouts/application (137.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (122.8ms)
Completed 200 OK in 982ms (Views: 938.5ms | ActiveRecord: 33.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:57:55 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:57:58 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:57:58 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/promotion_rules/1/edit" for 127.0.0.1 at 2017-05-26 01:58:04 -0700
Processing by PromotionRulesController#edit as HTML
  Parameters: {"coupon_list_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering promotion_rules/edit.html.slim within layouts/application
  Rendered promotion_rules/_form.html.slim (19.0ms)
  Rendered promotion_rules/edit.html.slim within layouts/application (37.0ms)
Completed 500 Internal Server Error in 78ms (ActiveRecord: 2.2ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @promotion_rule]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/promotion_rules/_form.html.slim:1:in `_app_views_promotion_rules__form_html_slim__4518230481427888513_70333358752260'
app/views/promotion_rules/edit.html.slim:3:in `_app_views_promotion_rules_edit_html_slim__4483456818561283539_70333352765880'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (10.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.7ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (58.3ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 01:58:17 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (15.3ms)
  [1m[36mOrderPromotion Load (0.3ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (1.0ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (24.6ms)
  Rendered coupon_lists/show.html.slim within layouts/application (111.1ms)
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (12.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (7.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (151.1ms)
Completed 200 OK in 1162ms (Views: 1131.0ms | ActiveRecord: 26.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:58:18 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 01:58:22 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 01:58:22 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/promotion_rules/1/edit" for 127.0.0.1 at 2017-05-26 02:00:20 -0700
Processing by PromotionRulesController#edit as HTML
  Parameters: {"coupon_list_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering promotion_rules/edit.html.slim within layouts/application
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered promotion_rules/_form.html.slim (59.0ms)
  Rendered promotion_rules/edit.html.slim within layouts/application (62.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (685.4ms)
Completed 200 OK in 1775ms (Views: 1640.1ms | ActiveRecord: 43.9ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 02:00:25 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.5ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (23.6ms)
  [1m[36mOrderPromotion Load (4.0ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (6.9ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (7.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (28.5ms)
  Rendered coupon_lists/show.html.slim within layouts/application (156.8ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (70.9ms)
Completed 200 OK in 683ms (Views: 640.2ms | ActiveRecord: 29.1ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:00:29 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:00:29 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/promotion_rules/1/edit" for 127.0.0.1 at 2017-05-26 02:00:42 -0700
Processing by PromotionRulesController#edit as HTML
  Parameters: {"coupon_list_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering promotion_rules/edit.html.slim within layouts/application
  [1m[36mCity Load (4.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered promotion_rules/_form.html.slim (32.3ms)
  Rendered promotion_rules/edit.html.slim within layouts/application (57.9ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (132.6ms)
Completed 200 OK in 643ms (Views: 617.5ms | ActiveRecord: 16.8ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 02:00:44 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.9ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (14.3ms)
  [1m[36mOrderPromotion Load (0.4ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (1.6ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (4.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (35.5ms)
  Rendered coupon_lists/show.html.slim within layouts/application (97.9ms)
  [1m[36mRole Load (9.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (24.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (241.3ms)
Completed 200 OK in 1046ms (Views: 961.2ms | ActiveRecord: 50.1ms)


Started DELETE "/workers/sign_out" for 127.0.0.1 at 2017-05-26 02:08:46 -0700
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"P0JTr/LoH6bFl/eZc5ZxPIhYjzO/bKGhRv8yE6Oq5kSJx/wNVrxXlcpJATHV2/lQm5cctWn5Y5YgsKPl0VgZqQ=="}
  [1m[36mWorker Load (4.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (35.7ms)[0m  [1m[33mUPDATE `workers` SET `remember_created_at` = NULL, `updated_at` = '2017-05-26 02:08:47' WHERE `workers`.`id` = 2[0m
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/workers/sign_in
Completed 302 Found in 189ms (ActiveRecord: 46.1ms)


Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-26 02:08:47 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (12.1ms)
  Rendered devise/sessions/new.html.slim within layouts/application (263.6ms)
  Rendered layouts/_menu.slim (79.7ms)
Completed 200 OK in 1018ms (Views: 915.0ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:08:48 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:08:49 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:08:49 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/password/new" for 127.0.0.1 at 2017-05-26 02:10:01 -0700
Processing by Devise::PasswordsController#new as HTML
  Rendering devise/passwords/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (11.4ms)
  Rendered devise/passwords/new.html.slim within layouts/application (34.5ms)
  Rendered layouts/_menu.slim (21.8ms)
Completed 200 OK in 532ms (Views: 521.9ms | ActiveRecord: 0.0ms)


Started POST "/workers/password" for 127.0.0.1 at 2017-05-26 02:10:12 -0700
Processing by Devise::PasswordsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"CbvtdPe+J+nhr3UOsk3eR2FsQpjZb8tArV/+Z1o3vfu8UFBMwc2MNKwbEtTTwgeNCmQVm6WojZfFquy8t5InBQ==", "worker"=>{"email"=>"16126240@bjtu.edu.cn"}, "commit"=>"Send me reset password instructions"}
  [1m[36mWorker Load (11.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`email` = '16126240@bjtu.edu.cn' ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`reset_password_token` = '8a2510aa8c165e99c20ee3649098574181ea4d77ce5c6b58af3f5ee83028ae73' ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (23.9ms)[0m  [1m[33mUPDATE `workers` SET `reset_password_token` = '8a2510aa8c165e99c20ee3649098574181ea4d77ce5c6b58af3f5ee83028ae73', `reset_password_sent_at` = '2017-05-26 02:10:13', `updated_at` = '2017-05-26 02:10:13' WHERE `workers`.`id` = 2[0m
  [1m[35m (12.4ms)[0m  [1m[35mCOMMIT[0m
  Rendering devise/mailer/reset_password_instructions.html.slim
  Rendered devise/mailer/reset_password_instructions.html.slim (7.8ms)
Devise::Mailer#reset_password_instructions: processed outbound mail in 459.1ms
Sent mail to 16126240@bjtu.edu.cn (385.8ms)
Date: Fri, 26 May 2017 02:10:14 -0700
From: please-change-me-at-config-initializers-devise@example.com
Reply-To: please-change-me-at-config-initializers-devise@example.com
To: 16126240@bjtu.edu.cn
Message-ID: <5927f0f6f2588_99228d3ef01769d@ubuntu.mail>
Subject: Reset password instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<p>Hello 16126240@bjtu.edu.cn!</p><p>Someone has requested a link to change your password. You can do this through the link below.</p><p><a href="http://localhost:3001/workers/password/edit?reset_password_token=f7zvyyp5r9fkXLChVuXJ">Change my password</a></p><p>If you didn't request this, please ignore this email.</p><p>Your password won't change until you access the link above and create a new one.</p>
Redirected to http://localhost:3000/workers/sign_in
Completed 302 Found in 2540ms (ActiveRecord: 48.2ms)


Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-26 02:10:15 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (9.3ms)
  Rendered devise/sessions/new.html.slim within layouts/application (83.3ms)
  Rendered layouts/_menu.slim (41.6ms)
Completed 200 OK in 1141ms (Views: 1130.2ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:10:16 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:10:17 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:10:17 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/workers/sign_in" for 127.0.0.1 at 2017-05-26 02:14:09 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"SbuBiG0+tlqSQYD426AVU2+NhI+G/vuNwlsuMq582D38UDywW00dh9/15yK6L8yZBIXTjPo5vVqqrjzpQ9lCww==", "worker"=>{"email"=>"16126240@bjtu.edu.cn", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mWorker Load (202.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`email` = '16126240@bjtu.edu.cn' ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (48.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (101.1ms)[0m  [1m[33mUPDATE `workers` SET `current_sign_in_at` = '2017-05-26 02:14:10', `sign_in_count` = 2, `updated_at` = '2017-05-26 02:14:10' WHERE `workers`.`id` = 2[0m
  [1m[35m (76.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (34.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
Redirected to http://localhost:3000/workers
Completed 302 Found in 1258ms (ActiveRecord: 463.8ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 02:14:10 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (22.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (3.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (11.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (37.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (105.8ms)
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (17.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (209.1ms)
Completed 200 OK in 1281ms (Views: 1154.2ms | ActiveRecord: 97.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:14:12 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:14:13 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:14:13 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-26 02:14:18 -0700
Processing by Devise::SessionsController#new as HTML
  [1m[36mWorker Load (18.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (15.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
Redirected to http://localhost:3000/workers
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 39ms (ActiveRecord: 34.2ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:14:18 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:14:19 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:14:19 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/new" for 127.0.0.1 at 2017-05-26 02:14:32 -0700
Processing by WorkersController#new as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/new.html.slim within layouts/application
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (63.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/new.html.slim within layouts/application (143.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (6.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (45.7ms)
Completed 200 OK in 752ms (Views: 640.5ms | ActiveRecord: 77.2ms)


Started GET "/workers/2/reset_password" for 127.0.0.1 at 2017-05-26 02:15:10 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (46.8ms)
Completed 500 Internal Server Error in 76ms (ActiveRecord: 0.4ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333525785200'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (24.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.4ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (71.3ms)
Started GET "/workers" for 127.0.0.1 at 2017-05-26 02:15:13 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (24.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (12.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (78.5ms)
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (98.5ms)
Completed 200 OK in 871ms (Views: 816.7ms | ActiveRecord: 50.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:15:14 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:15:17 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:15:17 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/2/edit" for 127.0.0.1 at 2017-05-26 02:15:18 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (4.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (8.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (60.9ms)
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (46.2ms)
Completed 200 OK in 438ms (Views: 405.0ms | ActiveRecord: 22.3ms)


Started GET "/workers/new" for 127.0.0.1 at 2017-05-26 02:15:54 -0700
Processing by WorkersController#new as HTML
  [1m[36mWorker Load (3.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/new.html.slim within layouts/application
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/new.html.slim within layouts/application (65.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (38.2ms)
Completed 200 OK in 478ms (Views: 465.8ms | ActiveRecord: 7.6ms)


Started POST "/workers" for 127.0.0.1 at 2017-05-26 02:16:40 -0700
Processing by WorkersController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"L6cJj3AWwnV1ltxPlPJe/c/be0kheyZvmqPdU19SvSmidve8Ru3/84V2ahO7tx/MRr7af8AAmMFQ5MOh0CSh5A==", "worker"=>{"email"=>"operator@163.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>["", "3"], "city_ids"=>["", "1"]}, "commit"=>"Create Worker"}
  [1m[36mWorker Load (11.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` WHERE `roles`.`id` = 3[0m
  [1m[36mCity Load (3.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` WHERE `cities`.`id` = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mWorker Exists (14.7ms)[0m  [1m[34mSELECT  1 AS one FROM `workers` WHERE `workers`.`email` = BINARY 'operator@163.com' LIMIT 1[0m
  [1m[35mSQL (29.1ms)[0m  [1m[32mINSERT INTO `workers` (`email`, `encrypted_password`, `created_at`, `updated_at`) VALUES ('operator@163.com', '$2a$11$aSIDY/b7BCwxU4c0Wf4zbOHF2jtFbNxCUuwLZZWUNGmdL02FdY9Cq', '2017-05-26 02:16:40', '2017-05-26 02:16:40')[0m
  [1m[35mSQL (47.5ms)[0m  [1m[32mINSERT INTO `workers_roles` (`worker_id`, `role_id`) VALUES (3, 3)[0m
  [1m[35mSQL (56.5ms)[0m  [1m[32mINSERT INTO `cities_workers` (`city_id`, `worker_id`) VALUES (1, 3)[0m
  [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/workers
Completed 302 Found in 619ms (ActiveRecord: 300.1ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 02:16:40 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (118.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (9.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (8.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (5.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (4.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (63.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (63.7ms)
Completed 200 OK in 729ms (Views: 574.8ms | ActiveRecord: 147.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:16:41 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:16:42 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:16:42 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles" for 127.0.0.1 at 2017-05-26 02:17:08 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (2.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (26.6ms)
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (5.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (74.3ms)
Completed 200 OK in 432ms (Views: 410.8ms | ActiveRecord: 14.2ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 02:17:10 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (4.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (2.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (7.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (2.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (60.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (42.9ms)
Completed 200 OK in 486ms (Views: 457.5ms | ActiveRecord: 24.9ms)


Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 02:17:13 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (5.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (14.8ms)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 5.1ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333367243340'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (12.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (52.4ms)
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 02:20:30 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 400 Bad Request in 70ms (ActiveRecord: 0.6ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: worker):
  
app/controllers/workers_controller.rb:82:in `worker_params'
app/controllers/workers_controller.rb:39:in `reset_password'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (25.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (109.8ms)
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 02:22:20 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (0.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 400 Bad Request in 80ms (ActiveRecord: 0.9ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: worker):
  
app/controllers/workers_controller.rb:82:in `worker_params'
app/controllers/workers_controller.rb:39:in `reset_password'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (24.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (107.1ms)
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 02:23:55 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (4.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 400 Bad Request in 98ms (ActiveRecord: 4.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: worker):
  
app/controllers/workers_controller.rb:90:in `worker_params'
app/controllers/workers_controller.rb:40:in `block in reset_password'
app/controllers/workers_controller.rb:39:in `reset_password'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (26.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (17.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (14.7ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (151.4ms)
Started GET "/workers/3" for 127.0.0.1 at 2017-05-26 02:24:20 -0700
Processing by WorkersController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (3.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 3 LIMIT 1[0m
  Rendering workers/show.html.slim within layouts/application
  Rendered workers/show.html.slim within layouts/application (674.9ms)
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (6.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (2660.3ms)
Completed 200 OK in 4727ms (Views: 4364.5ms | ActiveRecord: 357.4ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:24:26 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:24:26 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 02:24:32 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (6.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (115.9ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (169.4ms)
Completed 200 OK in 714ms (Views: 690.7ms | ActiveRecord: 12.8ms)


Started GET "/workers/3/edit" for 127.0.0.1 at 2017-05-26 02:24:40 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (4.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 3 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (80.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (56.0ms)
Completed 200 OK in 522ms (Views: 482.9ms | ActiveRecord: 19.6ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 02:24:43 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (5.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (152.5ms)
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 02:24:45 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (25.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 400 Bad Request in 45ms (ActiveRecord: 25.1ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: worker):
  
app/controllers/workers_controller.rb:90:in `worker_params'
app/controllers/workers_controller.rb:40:in `block in reset_password'
app/controllers/workers_controller.rb:39:in `reset_password'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (74.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (206.9ms)
  [1m[36mRole Load (9.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (120.7ms)
Completed 200 OK in 2323ms (Views: 2263.9ms | ActiveRecord: 26.2ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 02:24:49 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (5.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (6.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (2.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (128.1ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (188.4ms)
Completed 200 OK in 1314ms (Views: 1267.6ms | ActiveRecord: 25.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:24:50 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:24:54 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:24:54 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 02:33:18 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (11.1ms)
Completed 500 Internal Server Error in 436ms (ActiveRecord: 295.7ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333418897320'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (26.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.7ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (135.3ms)
Started GET "/cable" for 127.0.0.1 at 2017-05-26 02:33:28 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 02:33:28 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/3" for 127.0.0.1 at 2017-05-26 04:00:34 -0700
Processing by WorkersController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (1.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 3 LIMIT 1[0m
  Rendering workers/show.html.slim within layouts/application
  Rendered workers/show.html.slim within layouts/application (42.2ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (686.5ms)
Completed 200 OK in 1711ms (Views: 1663.7ms | ActiveRecord: 22.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:00:36 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:00:37 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:00:37 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/3/edit" for 127.0.0.1 at 2017-05-26 04:00:45 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 3 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mRole Load (6.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (14.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (102.1ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (96.4ms)
Completed 200 OK in 639ms (Views: 599.5ms | ActiveRecord: 33.1ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 04:00:47 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (5.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (2.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (10.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (6.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (84.2ms)
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (8.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (122.7ms)
Completed 200 OK in 571ms (Views: 516.0ms | ActiveRecord: 45.3ms)


Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 04:00:52 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (4.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (44.8ms)
Completed 500 Internal Server Error in 81ms (ActiveRecord: 4.2ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333453411180'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (14.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (5.5ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (78.9ms)
Started GET "/workers" for 127.0.0.1 at 2017-05-26 04:01:20 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (6.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (6.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (2.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (81.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (149.1ms)
Completed 200 OK in 1316ms (Views: 1283.0ms | ActiveRecord: 28.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:01:21 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:01:25 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:01:25 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 04:04:13 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (0.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (38.6ms)
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (40.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (665.1ms)
Completed 200 OK in 1107ms (Views: 1015.3ms | ActiveRecord: 55.1ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:04:19 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:04:19 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/workers" for 127.0.0.1 at 2017-05-26 04:04:27 -0700
Processing by WorkersController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"dOLdqF3Ji/sRlxXTFb1abaC046giBfxtGQjNx5zdUCX5MyObazK2feF3o486+BtcKdFCnsN+QsPTT9M1E6tM6A==", "worker"=>{"password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create Worker"}
  [1m[36mWorker Load (5.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.8ms)[0m  [1m[31mROLLBACK[0m
  Rendering workers/new.html.slim within layouts/application
  [1m[36mRole Load (4.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (3.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/new.html.slim within layouts/application (90.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (99.8ms)
Completed 200 OK in 2925ms (Views: 2521.5ms | ActiveRecord: 29.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:04:30 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:04:31 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:04:31 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 04:04:39 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (2.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (12.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (2.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (86.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (52.5ms)
Completed 200 OK in 553ms (Views: 520.5ms | ActiveRecord: 26.5ms)


Started GET "/workers/3/edit" for 127.0.0.1 at 2017-05-26 04:05:13 -0700
Processing by WorkersController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 3 LIMIT 1[0m
  Rendering workers/edit.html.slim within layouts/application
  [1m[36mRole Load (7.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (4.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/edit.html.slim within layouts/application (85.9ms)
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (82.8ms)
Completed 200 OK in 552ms (Views: 515.8ms | ActiveRecord: 30.0ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 04:05:18 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (8.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (3.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (60.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (45.5ms)
Completed 200 OK in 469ms (Views: 445.8ms | ActiveRecord: 19.6ms)


Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 04:05:23 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (3.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (39.1ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (4.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (7.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (90.3ms)
Completed 200 OK in 514ms (Views: 490.5ms | ActiveRecord: 16.4ms)


Started POST "/workers" for 127.0.0.1 at 2017-05-26 04:05:29 -0700
Processing by WorkersController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"966aFP3uFMPKwJYV/3mo37VIeCvUphFOLL7oZPnlXHF6f2QnyxUpRTogIEnQPOnuPC3ZHTXdr+Dm+faWdpNAvA==", "worker"=>{"password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create Worker"}
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering workers/new.html.slim within layouts/application
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/new.html.slim within layouts/application (72.3ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (54.2ms)
Completed 200 OK in 1065ms (Views: 725.4ms | ActiveRecord: 31.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:05:31 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:05:31 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:05:31 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 04:05:37 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (3.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (4.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (120.9ms)
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (77.6ms)
Completed 200 OK in 563ms (Views: 532.4ms | ActiveRecord: 25.6ms)


Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 04:07:22 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (36.1ms)
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (96.8ms)
Completed 200 OK in 572ms (Views: 563.0ms | ActiveRecord: 5.6ms)


Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 04:16:11 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (25.3ms)
Completed 500 Internal Server Error in 62ms (ActiveRecord: 1.2ms)


  
SyntaxError (/home/user/Desktop/workspace/qiye/app/views/workers/reset_password.html.slim:3: syntax error, unexpected tLABEL
mple_form_for(@worker),method: :put do |f|; 
                              ^
/home/user/Desktop/workspace/qiye/app/views/workers/reset_password.html.slim:13: syntax error, unexpected keyword_ensure, expecting end-of-input
          ensure
                ^):
  
app/views/workers/reset_password.html.slim:3: syntax error, unexpected tLABEL
app/views/workers/reset_password.html.slim:13: syntax error, unexpected keyword_ensure, expecting end-of-input
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (21.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (8.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (172.5ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:16:12 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 04:17:44 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (39.4ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (13.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (95.5ms)
Completed 200 OK in 843ms (Views: 816.0ms | ActiveRecord: 21.5ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:17:46 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:17:46 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started PUT "/workers" for 127.0.0.1 at 2017-05-26 04:17:59 -0700
  
ActionController::RoutingError (No route matches [PUT] "/workers"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendered collection of /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [266 times] (1784.5ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (57.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (20334.8ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:18:21 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/workers/password" for 127.0.0.1 at 2017-05-26 04:20:16 -0700
Processing by WorkersController#show as HTML
  Parameters: {"id"=>"password"}
  [1m[36mWorker Load (200.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mWorker Load (40.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 0 LIMIT 1[0m
Completed 404 Not Found in 282ms (ActiveRecord: 241.5ms)


  
ActiveRecord::RecordNotFound (Couldn't find Worker with 'id'=password):
  
app/controllers/workers_controller.rb:77:in `set_worker'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (12.4ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (23.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (189.9ms)
Started GET "/workers/3/password" for 127.0.0.1 at 2017-05-26 04:20:28 -0700
  
ActionController::RoutingError (No route matches [GET] "/workers/3/password"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (10.4ms)
Started GET "/workers/" for 127.0.0.1 at 2017-05-26 04:20:45 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (533.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (159.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (224.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (60.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (88.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (3.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (929.1ms)
  Rendered collection of /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [266 times] (2310.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (154.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (27893.0ms)
  [1m[36mRole Load (48.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (26.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (12.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (216.3ms)
Completed 200 OK in 14434ms (Views: 12967.6ms | ActiveRecord: 1159.5ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:21:01 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:21:01 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 04:21:04 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (134.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (80.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (152.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (20.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (8.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (3.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (292.6ms)
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (8.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (146.7ms)
Completed 200 OK in 978ms (Views: 558.9ms | ActiveRecord: 416.9ms)


Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 04:21:12 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (40.3ms)
  [1m[36mRole Load (107.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (23.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (18.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (360.7ms)
Completed 200 OK in 965ms (Views: 773.0ms | ActiveRecord: 151.7ms)


Started GET "/workers/3/reset_password/edit" for 127.0.0.1 at 2017-05-26 04:21:56 -0700
  
ActionController::RoutingError (No route matches [GET] "/workers/3/reset_password/edit"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.5.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.2) lib/rack/method_override.rb:22:in `call'
rack (2.0.2) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.2) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.8.2) lib/puma/configuration.rb:224:in `call'
puma (3.8.2) lib/puma/server.rb:600:in `handle_request'
puma (3.8.2) lib/puma/server.rb:435:in `process_client'
puma (3.8.2) lib/puma/server.rb:299:in `block in run'
puma (3.8.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendered collection of /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [266 times] (1338.7ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (18.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (46.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (35543.1ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:22:32 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 04:25:22 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (191.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (26.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (74.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (194.3ms)
  [1m[36mRole Load (141.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (96.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (81.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (1359.7ms)
Completed 200 OK in 4018ms (Views: 3355.8ms | ActiveRecord: 623.9ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:25:33 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:25:33 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/roles" for 127.0.0.1 at 2017-05-26 04:27:57 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (18.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (25.8ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (79.3ms)
  [1m[36mRole Load (63.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (49.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (280.6ms)
Completed 200 OK in 2029ms (Views: 1798.9ms | ActiveRecord: 161.4ms)


Started GET "/roles/4" for 127.0.0.1 at 2017-05-26 04:28:21 -0700
Processing by RolesController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (24.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/show.html.slim within layouts/application
  Rendered roles/show.html.slim within layouts/application (16.1ms)
  [1m[36mRole Load (15.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (104.6ms)
Completed 200 OK in 761ms (Views: 693.1ms | ActiveRecord: 44.7ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-26 04:28:46 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (129.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (31.4ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (50.0ms)
  [1m[36mRole Load (17.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (26.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (8.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (130.5ms)
Completed 200 OK in 1589ms (Views: 1249.1ms | ActiveRecord: 214.9ms)


Started GET "/roles/4/edit" for 127.0.0.1 at 2017-05-26 04:28:48 -0700
Processing by RolesController#edit as HTML
  Parameters: {"id"=>"4"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` WHERE `roles`.`id` = 4 LIMIT 1[0m
  Rendering roles/edit.html.slim within layouts/application
  Rendered roles/_form.html.slim (24.1ms)
  Rendered roles/edit.html.slim within layouts/application (51.1ms)
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (122.7ms)
Completed 200 OK in 681ms (Views: 619.1ms | ActiveRecord: 15.6ms)


Started GET "/cities" for 127.0.0.1 at 2017-05-26 04:29:18 -0700
Processing by CitiesController#index as HTML
  [1m[36mWorker Load (146.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering cities/index.html.slim within layouts/application
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (202.2ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  Rendered cities/index.html.slim within layouts/application (580.3ms)
  [1m[36mRole Load (15.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (13.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (8.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (197.5ms)
Completed 200 OK in 1896ms (Views: 1174.0ms | ActiveRecord: 714.5ms)


Started GET "/cities/new" for 127.0.0.1 at 2017-05-26 04:29:44 -0700
Processing by CitiesController#new as HTML
  [1m[36mWorker Load (5.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering cities/new.html.slim within layouts/application
  [1m[36mCategory Load (41.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories`[0m
  Rendered cities/_form.html.slim (95.9ms)
  Rendered cities/new.html.slim within layouts/application (110.5ms)
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (135.6ms)
Completed 200 OK in 775ms (Views: 699.3ms | ActiveRecord: 54.6ms)


Started GET "/regions/search.json?term=tai&_type=query&q=tai&_=1495797930979" for 127.0.0.1 at 2017-05-26 04:29:56 -0700
Processing by RegionsController#search as JSON
  Parameters: {"term"=>"tai", "_type"=>"query", "q"=>"tai", "_"=>"1495797930979"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRegion Load (40.0ms)[0m  [1m[34mSELECT `regions`.* FROM `regions` WHERE (level = 2 and name like '%tai%')[0m
Completed 200 OK in 73ms (Views: 0.2ms | ActiveRecord: 69.3ms)


Started GET "/regions/search.json?term=taiyuan&_type=query&q=taiyuan&_=1495797930980" for 127.0.0.1 at 2017-05-26 04:29:57 -0700
Processing by RegionsController#search as JSON
  Parameters: {"term"=>"taiyuan", "_type"=>"query", "q"=>"taiyuan", "_"=>"1495797930980"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRegion Load (56.4ms)[0m  [1m[34mSELECT `regions`.* FROM `regions` WHERE (level = 2 and name like '%taiyuan%')[0m
Completed 200 OK in 60ms (Views: 0.2ms | ActiveRecord: 56.9ms)


Started GET "/regions/search.json?term=t&_type=query&q=t&_=1495797930981" for 127.0.0.1 at 2017-05-26 04:30:00 -0700
Processing by RegionsController#search as JSON
  Parameters: {"term"=>"t", "_type"=>"query", "q"=>"t", "_"=>"1495797930981"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRegion Load (48.0ms)[0m  [1m[34mSELECT `regions`.* FROM `regions` WHERE (level = 2 and name like '%t%')[0m
Completed 200 OK in 52ms (Views: 0.2ms | ActiveRecord: 48.3ms)


Started GET "/cities" for 127.0.0.1 at 2017-05-26 04:30:34 -0700
Processing by CitiesController#index as HTML
  [1m[36mWorker Load (0.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering cities/index.html.slim within layouts/application
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (5.3ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  Rendered cities/index.html.slim within layouts/application (76.3ms)
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (126.6ms)
Completed 200 OK in 621ms (Views: 598.8ms | ActiveRecord: 19.1ms)


Started GET "/cities/1/edit" for 127.0.0.1 at 2017-05-26 04:30:38 -0700
Processing by CitiesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering cities/edit.html.slim within layouts/application
  [1m[36mCategory Load (26.6ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT `categories`.* FROM `categories`[0m
  Rendered cities/_form.html.slim (50.2ms)
  Rendered cities/edit.html.slim within layouts/application (64.4ms)
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (10.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (107.3ms)
Completed 200 OK in 574ms (Views: 512.0ms | ActiveRecord: 48.8ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 04:31:05 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (1.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (9.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (4.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (73.6ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (45.3ms)
Completed 200 OK in 508ms (Views: 441.1ms | ActiveRecord: 19.7ms)


Started GET "/workers/new" for 127.0.0.1 at 2017-05-26 04:31:07 -0700
Processing by WorkersController#new as HTML
  [1m[36mWorker Load (1.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/new.html.slim within layouts/application
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles`[0m
  [1m[36mCity Load (6.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered workers/new.html.slim within layouts/application (65.5ms)
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (80.2ms)
Completed 200 OK in 545ms (Views: 520.5ms | ActiveRecord: 19.9ms)


Started GET "/roles" for 127.0.0.1 at 2017-05-26 04:31:35 -0700
Processing by RolesController#index as HTML
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/index.html.slim within layouts/application
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT  `roles`.* FROM `roles` ORDER BY `roles`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered roles/index.html.slim within layouts/application (23.1ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (25.0ms)
Completed 200 OK in 375ms (Views: 364.2ms | ActiveRecord: 4.2ms)


Started GET "/roles/new" for 127.0.0.1 at 2017-05-26 04:31:36 -0700
Processing by RolesController#new as HTML
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering roles/new.html.slim within layouts/application
  Rendered roles/_form.html.slim (25.7ms)
  Rendered roles/new.html.slim within layouts/application (49.4ms)
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (81.2ms)
Completed 200 OK in 577ms (Views: 563.1ms | ActiveRecord: 7.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-05-26 04:32:09 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (22.8ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (42.3ms)
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (7.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (183.2ms)
Completed 200 OK in 789ms (Views: 742.4ms | ActiveRecord: 39.4ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:34:36 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (120.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (53.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (61.8ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (50.0ms)
  Rendered categories/show.html.slim within layouts/application (776.4ms)
  [1m[36mRole Load (212.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (86.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (2880.1ms)
Completed 200 OK in 17881ms (Views: 16842.7ms | ActiveRecord: 657.0ms)


Started GET "/categories/1/products/4/edit" for 127.0.0.1 at 2017-05-26 04:35:43 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (144.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (49.7ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (341.8ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (777.7ms)
  Rendered products/edit.html.slim within layouts/application (915.2ms)
  [1m[36mRole Load (80.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (9.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (30.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (405.3ms)
Completed 200 OK in 5902ms (Views: 5128.4ms | ActiveRecord: 665.6ms)


Started PATCH "/categories/1/products/4" for 127.0.0.1 at 2017-05-26 04:36:01 -0700
Processing by ProductsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"nAihhds12aCJrgAQMnbM+GYQbs4r5JtcKKWy+TNwDzIR2V+27c7kJnlOtkwdM43J73XP+MqfJfLi4qwLvAYT/w==", "product"=>{"name"=>"skateboard shoes", "logo"=>""}, "commit"=>"Update Product", "category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (41.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (33.9ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (40.5ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (12.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 619ms (ActiveRecord: 128.7ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:36:01 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (34.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (2.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (99.6ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (28.2ms)
  Rendered categories/show.html.slim within layouts/application (238.5ms)
  [1m[36mRole Load (43.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (9.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (234.6ms)
Completed 200 OK in 1732ms (Views: 1501.8ms | ActiveRecord: 193.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:36:03 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:36:07 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:36:07 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/4/edit" for 127.0.0.1 at 2017-05-26 04:36:10 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (39.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (32.6ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (22.7ms)
  Rendered products/edit.html.slim within layouts/application (47.7ms)
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (163.5ms)
Completed 200 OK in 1008ms (Views: 907.8ms | ActiveRecord: 82.7ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:36:18 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (2.7ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (16.6ms)
  Rendered categories/show.html.slim within layouts/application (71.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (154.1ms)
Completed 200 OK in 803ms (Views: 758.4ms | ActiveRecord: 7.7ms)


Started GET "/categories/1/edit" for 127.0.0.1 at 2017-05-26 04:36:24 -0700
Processing by CategoriesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (28.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/edit.html.slim within layouts/application
  Rendered categories/_form.html.slim (459.3ms)
  Rendered categories/edit.html.slim within layouts/application (470.9ms)
  [1m[36mRole Load (76.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (7.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (257.6ms)
Completed 200 OK in 1133ms (Views: 1002.3ms | ActiveRecord: 115.1ms)


Started PATCH "/categories/1" for 127.0.0.1 at 2017-05-26 04:36:40 -0700
Processing by CategoriesController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"j2A9aXmpLN+GDFShwquX4mEJV9jvvHx0EHV/Q7OAULECscNaT1IRWXbs4v3t7tbT6Gz27g7HwtraMmGxPPZMfA==", "category"=>{"name"=>"sports shoes", "logo"=>#<ActionDispatch::Http::UploadedFile:0x007fef86da46c0 @tempfile=#<Tempfile:/tmp/RackMultipart20170526-2450-1tie7vy.jpg>, @original_filename="sports shoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"category[logo]\"; filename=\"sports shoes.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Update Category", "id"=>"1"}
  [1m[36mWorker Load (5.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (675.1ms)[0m  [1m[33mUPDATE `categories` SET `logo` = 'category-1495798600898', `updated_at` = '2017-05-26 04:36:42' WHERE `categories`.`id` = 1[0m
  [1m[35m (194.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 3075ms (ActiveRecord: 875.8ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:36:43 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (49.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (29.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (47.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (48.7ms)
  Rendered categories/show.html.slim within layouts/application (171.4ms)
  [1m[36mRole Load (47.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (6.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (22.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (369.5ms)
Completed 200 OK in 1493ms (Views: 1268.4ms | ActiveRecord: 205.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:36:45 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:36:47 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:36:47 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/4/edit" for 127.0.0.1 at 2017-05-26 04:37:38 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (37.0ms)
  Rendered products/edit.html.slim within layouts/application (50.6ms)
  [1m[36mRole Load (8.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (15.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (11.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (258.6ms)
Completed 200 OK in 739ms (Views: 690.6ms | ActiveRecord: 41.1ms)


Started PATCH "/categories/1/products/4" for 127.0.0.1 at 2017-05-26 04:37:47 -0700
Processing by ProductsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"haB9raboFH2xLuSnmvPlRUndXzjNce5pduegii45Cp4IcYOekBMp+0HOUvu1tqR0wLj+DiwKUMe8oL54oU8WUw==", "product"=>{"name"=>"skateboard shoes", "logo"=>#<ActionDispatch::Http::UploadedFile:0x007fef8d696250 @tempfile=#<Tempfile:/tmp/RackMultipart20170526-2450-4qder4.jpg>, @original_filename="huaban shoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[logo]\"; filename=\"huaban shoes.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Update Product", "category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (4.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (1.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (41.8ms)[0m  [1m[33mUPDATE `products` SET `logo` = '#<ActionDispatch::Http::UploadedFile:0x007fef8d696250>', `updated_at` = '2017-05-26 04:37:47' WHERE `products`.`id` = 4[0m
  [1m[35m (68.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 171ms (ActiveRecord: 117.6ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:37:47 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (4.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (3.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (25.2ms)
  Rendered categories/show.html.slim within layouts/application (68.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (8.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (318.9ms)
Completed 200 OK in 1133ms (Views: 1094.3ms | ActiveRecord: 25.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:37:48 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:37:49 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:37:49 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/3/edit" for 127.0.0.1 at 2017-05-26 04:37:58 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"3"}
  [1m[36mWorker Load (7.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (31.2ms)
  Rendered products/edit.html.slim within layouts/application (38.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (69.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (271.9ms)
Completed 200 OK in 660ms (Views: 551.5ms | ActiveRecord: 78.8ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:38:35 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (5.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (1.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (2.9ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (16.9ms)
  Rendered categories/show.html.slim within layouts/application (85.7ms)
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (117.4ms)
Completed 200 OK in 895ms (Views: 851.3ms | ActiveRecord: 23.1ms)


Started GET "/categories" for 127.0.0.1 at 2017-05-26 04:38:40 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (4.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (2.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (28.5ms)
  [1m[36mRole Load (14.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (126.3ms)
Completed 200 OK in 512ms (Views: 452.8ms | ActiveRecord: 29.2ms)


Started GET "/categories/1/edit" for 127.0.0.1 at 2017-05-26 04:38:47 -0700
Processing by CategoriesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/edit.html.slim within layouts/application
  Rendered categories/_form.html.slim (42.1ms)
  Rendered categories/edit.html.slim within layouts/application (76.2ms)
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (416.6ms)
Completed 200 OK in 1108ms (Views: 1087.1ms | ActiveRecord: 14.2ms)


Started GET "/categories" for 127.0.0.1 at 2017-05-26 04:38:50 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (4.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (7.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (22.4ms)
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (3.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (305.5ms)
Completed 200 OK in 807ms (Views: 770.3ms | ActiveRecord: 25.2ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:38:53 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (1.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (4.1ms)
  Rendered categories/show.html.slim within layouts/application (45.1ms)
  [1m[36mRole Load (22.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (171.6ms)
Completed 200 OK in 694ms (Views: 638.5ms | ActiveRecord: 38.8ms)


Started GET "/categories/1/products/4/edit" for 127.0.0.1 at 2017-05-26 04:40:37 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (2.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (0.6ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (34.5ms)
  Rendered products/edit.html.slim within layouts/application (47.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (10.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (951.7ms)
Completed 200 OK in 2733ms (Views: 2302.0ms | ActiveRecord: 231.2ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:40:46 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:40:46 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started PATCH "/categories/1/products/4" for 127.0.0.1 at 2017-05-26 04:40:48 -0700
Processing by ProductsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"BCXZSbeZc6jQxMKXcOY08JwzPdr4a4Kw48JiT4ddHyOJ9Cd6gWJOLiAkdMtfo3XBFVac7BkQPB4phXy9CCsD7g==", "product"=>{"name"=>"skateboard shoes", "logo"=>#<ActionDispatch::Http::UploadedFile:0x007fef9167c298 @tempfile=#<Tempfile:/tmp/RackMultipart20170526-2450-kg0hox.jpg>, @original_filename="huaban shoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[logo]\"; filename=\"huaban shoes.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Update Product", "category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (11.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (3.7ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (11.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 4548ms (ActiveRecord: 26.9ms)


  
NameError (undefined local variable or method `category_params' for #<ProductsController:0x007fef9167d1c0>
Did you mean?  category_path):
  
app/controllers/products_controller.rb:52:in `update'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (12.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (1750.5ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:40:57 -0700
KefuChannel stopped streaming from kefu_channel
Started PATCH "/categories/1/products/4" for 127.0.0.1 at 2017-05-26 04:41:37 -0700
Processing by ProductsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"BCXZSbeZc6jQxMKXcOY08JwzPdr4a4Kw48JiT4ddHyOJ9Cd6gWJOLiAkdMtfo3XBFVac7BkQPB4phXy9CCsD7g==", "product"=>{"name"=>"skateboard shoes", "logo"=>#<ActionDispatch::Http::UploadedFile:0x007fef90dcc260 @tempfile=#<Tempfile:/tmp/RackMultipart20170526-2450-1rqebz1.jpg>, @original_filename="huaban shoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[logo]\"; filename=\"huaban shoes.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Update Product", "category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (1.5ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 4818ms (ActiveRecord: 2.3ms)


  
NameError (undefined local variable or method `generate_filename' for #<ProductsController:0x007fef8d6c7d78>):
  
app/controllers/products_controller.rb:54:in `update'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (47.4ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (23.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (1467.3ms)
Started PATCH "/categories/1/products/4" for 127.0.0.1 at 2017-05-26 04:42:28 -0700
Processing by ProductsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"BCXZSbeZc6jQxMKXcOY08JwzPdr4a4Kw48JiT4ddHyOJ9Cd6gWJOLiAkdMtfo3XBFVac7BkQPB4phXy9CCsD7g==", "product"=>{"name"=>"skateboard shoes", "logo"=>#<ActionDispatch::Http::UploadedFile:0x007fef90c9d768 @tempfile=#<Tempfile:/tmp/RackMultipart20170526-2450-e757sx.jpg>, @original_filename="huaban shoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[logo]\"; filename=\"huaban shoes.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Update Product", "category_id"=>"1", "id"=>"4"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (2.8ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory Load (3.7ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (51.9ms)[0m  [1m[33mUPDATE `products` SET `logo` = '#<ActionDispatch::Http::UploadedFile:0x007fef90c9d768>', `updated_at` = '2017-05-26 04:42:30' WHERE `products`.`id` = 4[0m
  [1m[35m (15.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 667ms (ActiveRecord: 74.2ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:42:30 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (20.0ms)
  Rendered categories/show.html.slim within layouts/application (90.8ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (18.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (880.9ms)
Completed 200 OK in 1771ms (Views: 1601.5ms | ActiveRecord: 134.5ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:42:33 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:42:33 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:42:39 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (2.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (22.8ms)
  Rendered categories/show.html.slim within layouts/application (67.4ms)
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (462.6ms)
Completed 200 OK in 1780ms (Views: 1745.3ms | ActiveRecord: 12.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:42:40 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:42:41 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:42:41 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories" for 127.0.0.1 at 2017-05-26 04:42:49 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (3.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (35.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (71.5ms)
Completed 200 OK in 533ms (Views: 520.1ms | ActiveRecord: 9.4ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:42:54 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (8.0ms)
  Rendered categories/show.html.slim within layouts/application (60.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (22.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (13.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (155.0ms)
Completed 200 OK in 813ms (Views: 749.7ms | ActiveRecord: 41.7ms)


Started GET "/categories/1/products/3/edit" for 127.0.0.1 at 2017-05-26 04:43:20 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"3"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (3.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (10.3ms)
  Rendered products/edit.html.slim within layouts/application (53.6ms)
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (122.2ms)
Completed 200 OK in 1074ms (Views: 1025.2ms | ActiveRecord: 12.1ms)


Started PATCH "/categories/1/products/3" for 127.0.0.1 at 2017-05-26 04:43:26 -0700
Processing by ProductsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"NwhIvp71UsiSBfcmjpvJG4q/9YgtEs5PS3ToyvqDPcG62baNqA5vTmLlQXqh3ogqA9pUvsxpcOGBM/Y4dfUhDA==", "product"=>{"name"=>"soccer shoes", "logo"=>#<ActionDispatch::Http::UploadedFile:0x007fef93ef73f8 @tempfile=#<Tempfile:/tmp/RackMultipart20170526-2450-14qvzh8.jpg>, @original_filename="soccer shoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[logo]\"; filename=\"soccer shoes.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Update Product", "category_id"=>"1", "id"=>"3"}
  [1m[36mWorker Load (6.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (4.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (36.1ms)[0m  [1m[33mUPDATE `products` SET `logo` = '#<ActionDispatch::Http::UploadedFile:0x007fef93ef73f8>', `updated_at` = '2017-05-26 04:43:27' WHERE `products`.`id` = 3[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 467ms (ActiveRecord: 54.3ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:43:27 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (7.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (5.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (26.6ms)
  Rendered categories/show.html.slim within layouts/application (78.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (129.8ms)
Completed 200 OK in 995ms (Views: 951.6ms | ActiveRecord: 15.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:43:28 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:43:29 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:43:29 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/3/edit" for 127.0.0.1 at 2017-05-26 04:45:21 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"3"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (21.5ms)
  Rendered products/edit.html.slim within layouts/application (26.6ms)
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (1021.4ms)
Completed 200 OK in 2076ms (Views: 1967.2ms | ActiveRecord: 13.3ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:45:29 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:45:29 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started PATCH "/categories/1/products/3" for 127.0.0.1 at 2017-05-26 04:45:34 -0700
Processing by ProductsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"R7/blLsrdiSsz3Q0H/oaVi46dog6oDgETLzNupAhLs/KbiWnjdBLolwvwmgwv1tnp1/XvtvbhqqG+9NIH1cyAg==", "product"=>{"name"=>"soccer shoes", "logo"=>#<ActionDispatch::Http::UploadedFile:0x007fef8d1b50b0 @tempfile=#<Tempfile:/tmp/RackMultipart20170526-2450-mhl83o.jpg>, @original_filename="soccer shoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[logo]\"; filename=\"soccer shoes.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Update Product", "category_id"=>"1", "id"=>"3"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (6.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (35.8ms)[0m  [1m[33mUPDATE `products` SET `logo` = '#<ActionDispatch::Http::UploadedFile:0x007fef8d1b50b0>', `updated_at` = '2017-05-26 04:45:34' WHERE `products`.`id` = 3[0m
  [1m[35m (12.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 443ms (ActiveRecord: 55.9ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:45:34 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (8.5ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (16.0ms)
  Rendered categories/show.html.slim within layouts/application (71.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (81.9ms)
Completed 200 OK in 875ms (Views: 843.6ms | ActiveRecord: 21.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:45:35 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:45:36 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:45:36 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/3/edit" for 127.0.0.1 at 2017-05-26 04:47:01 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"3"}
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (0.7ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (36.5ms)
  Rendered products/edit.html.slim within layouts/application (41.9ms)
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (119.8ms)
Completed 200 OK in 653ms (Views: 625.9ms | ActiveRecord: 18.2ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:47:04 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (3.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [4 times] (9.2ms)
  Rendered categories/show.html.slim within layouts/application (45.2ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (12.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (102.5ms)
Completed 200 OK in 878ms (Views: 824.3ms | ActiveRecord: 24.8ms)


Started GET "/categories/1/products/new" for 127.0.0.1 at 2017-05-26 04:47:09 -0700
Processing by ProductsController#new as HTML
  Parameters: {"category_id"=>"1"}
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/new.html.slim within layouts/application
  Rendered products/_form.html.slim (9.9ms)
  Rendered products/new.html.slim within layouts/application (16.2ms)
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (104.2ms)
Completed 200 OK in 595ms (Views: 559.8ms | ActiveRecord: 7.4ms)


Started POST "/categories/1/products" for 127.0.0.1 at 2017-05-26 04:47:26 -0700
Processing by ProductsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"WtQqaca6Gue3L/RxG4FJMikdse+n8yKkx9BsWkKFXcHXBdRa8EEnYUfPQi00xAgDoHgQ2UaInAoNl3KozfNBDA==", "product"=>{"name"=>"walk shoes", "logo"=>#<ActionDispatch::Http::UploadedFile:0x007fef8d5f7ce0 @tempfile=#<Tempfile:/tmp/RackMultipart20170526-2450-5ost8h.jpg>, @original_filename="huaban shoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[logo]\"; filename=\"huaban shoes.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Create Product", "category_id"=>"1"}
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (1.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (47.9ms)[0m  [1m[32mINSERT INTO `products` (`name`, `logo`, `category_id`, `created_at`, `updated_at`) VALUES ('walk shoes', '#<ActionDispatch::Http::UploadedFile:0x007fef8d5f7ce0>', 1, '2017-05-26 04:47:26', '2017-05-26 04:47:26')[0m
  [1m[35m (20.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 393ms (ActiveRecord: 77.7ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:47:26 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (8.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [5 times] (11.6ms)
  Rendered categories/show.html.slim within layouts/application (83.5ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (82.6ms)
Completed 200 OK in 922ms (Views: 889.9ms | ActiveRecord: 15.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:47:27 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:47:28 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:47:28 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories" for 127.0.0.1 at 2017-05-26 04:47:48 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (1.5ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (44.6ms)
  [1m[36mRole Load (7.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (476.3ms)
Completed 200 OK in 973ms (Views: 947.0ms | ActiveRecord: 19.2ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:50:56 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (4.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  Rendered categories/show.html.slim within layouts/application (7.6ms)
Completed 500 Internal Server Error in 50ms (ActiveRecord: 5.1ms)


  
ActionView::Template::Error (Malformed indentation
  /home/user/Desktop/workspace/qiye/app/views/categories/show.html.slim, Line 44, Column 7
    = will_paginate @products, renderer: BootstrapPagination::Rails
    ^
):
    41:             td = link_to 'Edit', edit_category_path(category)
    42:             td = link_to 'Destroy', category, data: { confirm: 'Are you sure?' }, method: :delete
    43: 
    44:        = will_paginate @products, renderer: BootstrapPagination::Rails
    45: 
    46:     .panel-footer
    47:       = link_to 'æ–°å»ºå•†å“', new_category_product_path(@category), class: 'btn btn-info btn-sm'
  
app/views/categories/show.html.slim:44
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (61.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (209.0ms)
Started GET "/categories" for 127.0.0.1 at 2017-05-26 04:50:59 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (1.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (3.5ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (39.0ms)
  [1m[36mRole Load (29.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (13.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (330.3ms)
Completed 200 OK in 2104ms (Views: 2000.3ms | ActiveRecord: 53.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:51:02 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:51:08 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:51:08 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:51:32 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (1.8ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (10.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of products/_product.html.slim [5 times] (26.3ms)
  Rendered categories/show.html.slim within layouts/application (100.2ms)
  [1m[36mRole Load (7.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (95.5ms)
Completed 200 OK in 1815ms (Views: 1768.6ms | ActiveRecord: 28.4ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:55:16 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (80.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  Rendered categories/show.html.slim within layouts/application (51.2ms)
Completed 500 Internal Server Error in 204ms (ActiveRecord: 80.5ms)


  
ActionView::Template::Error (Malformed indentation
  /home/user/Desktop/workspace/qiye/app/views/categories/show.html.slim, Line 31, Column 9
    tbody
    ^
):
    28:             th width='10%' is_del
    29:             th width='5%' 
    30:             th width='5%' 
    31:          tbody
    32:         - @category.products.each do |product|
    33:           tr
    34:             td = product.name
  
app/views/categories/show.html.slim:31
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (271.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (9.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (583.1ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:55:18 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:56:09 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (23.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (16.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  Rendered categories/show.html.slim within layouts/application (30.8ms)
Completed 500 Internal Server Error in 111ms (ActiveRecord: 40.0ms)


  
ActionView::Template::Error (Malformed indentation
  /home/user/Desktop/workspace/qiye/app/views/categories/show.html.slim, Line 31, Column 9
    tbody
    ^
):
    28:             th width='10%' is_del
    29:             th width='5%' 
    30:             th width='5%' 
    31:          tbody
    32:           - @category.products.each do |product|
    33:             tr
    34:               td = product.name
  
app/views/categories/show.html.slim:31
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (48.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (59.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (254.0ms)
Started GET "/categories/" for 127.0.0.1 at 2017-05-26 04:57:49 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (32.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (14.5ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (99.0ms)
  [1m[36mRole Load (20.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (122.4ms)
Completed 200 OK in 1699ms (Views: 1568.9ms | ActiveRecord: 69.6ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 04:57:52 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:57:52 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:57:54 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  Rendered categories/show.html.slim within layouts/application (6.6ms)
Completed 500 Internal Server Error in 42ms (ActiveRecord: 0.7ms)


  
ActionView::Template::Error (Malformed indentation
  /home/user/Desktop/workspace/qiye/app/views/categories/show.html.slim, Line 45, Column 11
    = will_paginate @category.products, renderer: BootstrapPagination::Rails
    ^
):
    42:               td = link_to 'Edit',  edit_category_product_path(product)
    43:               td = link_to 'Destroy', product, data: { confirm: 'Are you sure?' }, method: :delete
    44: 
    45:            = will_paginate @category.products, renderer: BootstrapPagination::Rails
    46:    .panel-footer
    47:       = link_to 'æ–°å»ºå•†å“', new_category_product_path(@category), class: 'btn btn-info btn-sm'
  
app/views/categories/show.html.slim:45
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (37.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (80.5ms)
Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:58:17 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (15.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  Rendered categories/show.html.slim within layouts/application (9.1ms)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 15.5ms)


  
ActionView::Template::Error (Malformed indentation
  /home/user/Desktop/workspace/qiye/app/views/categories/show.html.slim, Line 46, Column 3
    .panel-footer
    ^
):
    43:               td = link_to 'Destroy', product, data: { confirm: 'Are you sure?' }, method: :delete
    44: 
    45:       = will_paginate @category.products, renderer: BootstrapPagination::Rails
    46:    .panel-footer
    47:       = link_to 'æ–°å»ºå•†å“', new_category_product_path(@category), class: 'btn btn-info btn-sm'
  
app/views/categories/show.html.slim:46
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (32.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (9.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.5ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (247.4ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 04:58:18 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 04:58:37 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (1.8ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (42.5ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`category_id` = 1[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/show.html.slim within layouts/application (1144.0ms)
Completed 500 Internal Server Error in 1177ms (ActiveRecord: 47.9ms)


  
ActionView::Template::Error (undefined method `product_path' for #<#<Class:0x007fef8cfd6d48>:0x007fef99ca68f0>
Did you mean?  product_item_path):
    40:                   span.label.label-default å¦ 
    41: 
    42:               td = link_to 'Edit',  edit_category_product_path(product)
    43:               td = link_to 'Destroy', product, data: { confirm: 'Are you sure?' }, method: :delete
    44: 
    45:       = will_paginate @category.products, renderer: BootstrapPagination::Rails
    46:   .panel-footer
  
app/views/categories/show.html.slim:43:in `block in _app_views_categories_show_html_slim__3009459969588260579_70333527047880'
app/views/categories/show.html.slim:32:in `_app_views_categories_show_html_slim__3009459969588260579_70333527047880'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (27.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.5ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (129.8ms)
Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 05:00:32 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (10.3ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`category_id` = 1[0m
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/show.html.slim within layouts/application (2308.7ms)
Completed 500 Internal Server Error in 2782ms (ActiveRecord: 12.1ms)


  
ActionView::Template::Error (undefined local variable or method `category_product' for #<#<Class:0x007fef8cfd6d48>:0x007fef8cda62f8>
Did you mean?  category_product_url):
    40:                   span.label.label-default å¦ 
    41: 
    42:               td = link_to 'Edit',  edit_category_product_path(product)
    43:               td = link_to 'Destroy', category_product, data: { confirm: 'Are you sure?' }, method: :delete
    44: 
    45:       = will_paginate @category.products, renderer: BootstrapPagination::Rails
    46:   .panel-footer
  
app/views/categories/show.html.slim:43:in `block in _app_views_categories_show_html_slim__3009459969588260579_70333418521160'
app/views/categories/show.html.slim:32:in `_app_views_categories_show_html_slim__3009459969588260579_70333418521160'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (19.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (10.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (8.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (129.7ms)
Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 05:01:54 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (35.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (6.3ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`category_id` = 1[0m
  Rendered categories/show.html.slim within layouts/application (124.1ms)
Completed 500 Internal Server Error in 273ms (ActiveRecord: 42.9ms)


  
ActionView::Template::Error (undefined method `total_pages' for #<Product::ActiveRecord_Associations_CollectionProxy:0x007fef93ebd8d8>):
    42:               td = link_to 'Edit',  edit_category_product_path(product)
    43:               td = link_to 'Destroy', @product, data: { confirm: 'Are you sure?' }, method: :delete
    44: 
    45:       = will_paginate @category.products, renderer: BootstrapPagination::Rails
    46:   .panel-footer
    47:       = link_to 'æ–°å»ºå•†å“', new_category_product_path(@category), class: 'btn btn-info btn-sm'
  
app/views/categories/show.html.slim:45:in `_app_views_categories_show_html_slim__3009459969588260579_70333527349860'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (55.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (186.4ms)
Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 05:02:43 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.7ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (4.2ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`category_id` = 1[0m
  Rendered categories/show.html.slim within layouts/application (52.2ms)
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (193.0ms)
Completed 200 OK in 1153ms (Views: 1121.1ms | ActiveRecord: 16.8ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 05:02:45 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 05:02:45 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories/1/products/1/edit" for 127.0.0.1 at 2017-05-26 05:03:11 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (49.9ms)
  Rendered products/edit.html.slim within layouts/application (93.5ms)
  [1m[36mRole Load (42.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (12.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (422.2ms)
Completed 200 OK in 4364ms (Views: 4259.1ms | ActiveRecord: 63.8ms)


Started PATCH "/categories/1/products/1" for 127.0.0.1 at 2017-05-26 05:03:44 -0700
Processing by ProductsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"xbj5g6Mhans1aadsm0oDZEWfqGxEtI48sJaRjeK3lRhIaQewldpX/cWJETC0D0JVzPoJWqXPMJJ60Y9/bcGJ1Q==", "product"=>{"name"=>"jogging shoes", "logo"=>#<ActionDispatch::Http::UploadedFile:0x007fef99a0fdd0 @tempfile=#<Tempfile:/tmp/RackMultipart20170526-2450-1mohflf.jpg>, @original_filename="manpao shoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[logo]\"; filename=\"manpao shoes.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "commit"=>"Update Product", "category_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (3.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (2.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (20.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (83.1ms)[0m  [1m[33mUPDATE `products` SET `logo` = '#<ActionDispatch::Http::UploadedFile:0x007fef99a0fdd0>', `updated_at` = '2017-05-26 05:04:04' WHERE `products`.`id` = 1[0m
  [1m[35m (122.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 20349ms (ActiveRecord: 232.3ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 05:04:05 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (8.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (6.2ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`category_id` = 1[0m
  Rendered categories/show.html.slim within layouts/application (47.9ms)
  [1m[36mRole Load (13.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (163.6ms)
Completed 200 OK in 1160ms (Views: 1103.7ms | ActiveRecord: 33.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 05:04:06 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 05:04:08 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 05:04:08 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories" for 127.0.0.1 at 2017-05-26 05:04:17 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (7.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (49.5ms)
  [1m[36mRole Load (13.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (52.5ms)
Completed 200 OK in 611ms (Views: 533.7ms | ActiveRecord: 23.0ms)


Started GET "/categories/new" for 127.0.0.1 at 2017-05-26 05:44:58 -0700
Processing by CategoriesController#new as HTML
  [1m[36mWorker Load (6.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/new.html.slim within layouts/application
  Rendered categories/_form.html.slim (53.8ms)
  Rendered categories/new.html.slim within layouts/application (67.2ms)
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (37.0ms)
Completed 200 OK in 547ms (Views: 507.5ms | ActiveRecord: 11.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-05-26 05:45:45 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (2.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (7.7ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (39.1ms)
  [1m[36mRole Load (20.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (148.4ms)
Completed 200 OK in 585ms (Views: 547.2ms | ActiveRecord: 33.4ms)


Started GET "/categories/1/edit" for 127.0.0.1 at 2017-05-26 05:45:47 -0700
Processing by CategoriesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/edit.html.slim within layouts/application
  Rendered categories/_form.html.slim (24.3ms)
  Rendered categories/edit.html.slim within layouts/application (48.3ms)
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (79.7ms)
Completed 200 OK in 415ms (Views: 406.4ms | ActiveRecord: 4.5ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 05:45:51 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`category_id` = 1[0m
  Rendered categories/show.html.slim within layouts/application (94.3ms)
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (284.0ms)
Completed 200 OK in 1284ms (Views: 1256.3ms | ActiveRecord: 10.9ms)


Started GET "/categories/1/products/1/edit" for 127.0.0.1 at 2017-05-26 05:46:14 -0700
Processing by ProductsController#edit as HTML
  Parameters: {"category_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (3.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mProduct Load (31.8ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering products/edit.html.slim within layouts/application
  Rendered products/_form.html.slim (13.9ms)
  Rendered products/edit.html.slim within layouts/application (35.0ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (38.0ms)
Completed 200 OK in 374ms (Views: 330.5ms | ActiveRecord: 37.0ms)


Started GET "/prices" for 127.0.0.1 at 2017-05-26 05:46:38 -0700
Processing by PricesController#index as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering prices/index.html.slim within layouts/application
  [1m[36mCategory Load (1.5ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered prices/index.html.slim within layouts/application (20.5ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (50.9ms)
Completed 200 OK in 439ms (Views: 412.3ms | ActiveRecord: 7.8ms)


Started GET "/categories/1/prices" for 127.0.0.1 at 2017-05-26 05:46:40 -0700
Processing by CategoriesController#prices as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (6.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/prices.html.slim within layouts/application
  [1m[36mPrice Load (76.3ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` INNER JOIN `products` ON `prices`.`product_id` = `products`.`id` WHERE `products`.`category_id` = 1 LIMIT 10 OFFSET 0[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  Rendered categories/prices.html.slim within layouts/application (415.2ms)
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (103.9ms)
Completed 200 OK in 963ms (Views: 563.7ms | ActiveRecord: 372.8ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 05:47:02 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (121.4ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (10.4ms)
  Rendered coupon_lists/index.html.slim within layouts/application (168.2ms)
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (382.3ms)
Completed 200 OK in 1013ms (Views: 864.8ms | ActiveRecord: 128.4ms)


Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 05:47:21 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (120.0ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (38.5ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (45.1ms)
  [1m[36mRole Load (33.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (13.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (91.1ms)
Completed 200 OK in 541ms (Views: 357.2ms | ActiveRecord: 171.6ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 05:47:42 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (66.1ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (3.5ms)
  [1m[36mOrderPromotion Load (20.0ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (29.9ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (105.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (113.8ms)
  Rendered coupon_lists/show.html.slim within layouts/application (410.5ms)
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (109.9ms)
Completed 200 OK in 1026ms (Views: 587.0ms | ActiveRecord: 433.1ms)


Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 05:47:51 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (16.1ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (7.9ms)
  Rendered order_promotions/new.html.slim within layouts/application (17.1ms)
Completed 500 Internal Server Error in 50ms (ActiveRecord: 16.5ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333368230620'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333370420320'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (123.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (212.4ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 05:47:57 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (35.5ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (27.9ms)
  [1m[36mOrderPromotion Load (4.4ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (17.7ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (20.0ms)
  Rendered coupon_lists/show.html.slim within layouts/application (96.4ms)
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (149.5ms)
Completed 200 OK in 958ms (Views: 870.5ms | ActiveRecord: 69.5ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 05:47:58 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 05:48:00 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 05:48:00 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/price_rules" for 127.0.0.1 at 2017-05-26 05:48:34 -0700
Processing by PriceRulesController#index as HTML
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/index.html.slim within layouts/application
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (76.6ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  [1m[36mPriceRule Load (40.4ms)[0m  [1m[34mSELECT `price_rules`.* FROM `price_rules` WHERE `price_rules`.`city_id` = 1 AND `price_rules`.`category_id` = 1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendered price_rules/index.html.slim within layouts/application (388.1ms)
  [1m[36mRole Load (6.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (112.7ms)
Completed 200 OK in 887ms (Views: 537.9ms | ActiveRecord: 340.0ms)


Started GET "/price_rules/1" for 127.0.0.1 at 2017-05-26 05:48:36 -0700
Processing by PriceRulesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPriceRule Load (42.6ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (1.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering price_rules/show.html.slim within layouts/application
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPrice Load (14.9ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` INNER JOIN `products` ON `prices`.`product_id` = `products`.`id` WHERE `products`.`category_id` = 1 LIMIT 10 OFFSET 0[0m
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  Rendered price_rules/show.html.slim within layouts/application (65.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (45.5ms)
Completed 200 OK in 660ms (Views: 569.3ms | ActiveRecord: 64.9ms)


Started GET "/couriers" for 127.0.0.1 at 2017-05-26 05:48:56 -0700
Processing by CouriersController#index as HTML
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering couriers/index.html.slim within layouts/application
  [1m[36mCourier Load (136.8ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` ORDER BY `couriers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered couriers/index.html.slim within layouts/application (181.6ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (58.5ms)
Completed 200 OK in 596ms (Views: 407.9ms | ActiveRecord: 172.3ms)


Started GET "/factories" for 127.0.0.1 at 2017-05-26 05:48:59 -0700
Processing by FactoriesController#index as HTML
  [1m[36mWorker Load (8.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering factories/index.html.slim within layouts/application
  [1m[36mFactory Load (101.6ms)[0m  [1m[34mSELECT  `factories`.* FROM `factories` ORDER BY `factories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered factories/index.html.slim within layouts/application (174.4ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (48.0ms)
Completed 200 OK in 741ms (Views: 564.5ms | ActiveRecord: 157.9ms)


Started GET "/orders" for 127.0.0.1 at 2017-05-26 05:49:02 -0700
Processing by OrdersController#index as HTML
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering orders/index.html.slim within layouts/application
  [1m[36mOrder Load (85.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` ORDER BY `orders`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered orders/index.html.slim within layouts/application (107.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (28.1ms)
Completed 200 OK in 651ms (Views: 492.8ms | ActiveRecord: 89.8ms)


Started GET "/user_card_charge_settings" for 127.0.0.1 at 2017-05-26 05:49:04 -0700
Processing by UserCardChargeSettingsController#index as HTML
  [1m[36mWorker Load (9.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (66.3ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`city_id` = 1 ORDER BY `user_card_charge_settings`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (123.4ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (111.7ms)
Completed 200 OK in 570ms (Views: 422.0ms | ActiveRecord: 114.3ms)


Started GET "/users" for 127.0.0.1 at 2017-05-26 05:49:44 -0700
Processing by UsersController#index as HTML
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  Rendering users/index.html.slim within layouts/application
  [1m[36mUser Load (107.1ms)[0m  [1m[34mSELECT  `users`.* FROM `users` ORDER BY `users`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered users/index.html.slim within layouts/application (160.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (113.3ms)
Completed 200 OK in 693ms (Views: 500.7ms | ActiveRecord: 128.3ms)


Started GET "/users/1" for 127.0.0.1 at 2017-05-26 05:49:46 -0700
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUser Load (39.8ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (7.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserCard Load (36.5ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendering users/show.html.slim within layouts/application
  [1m[36mOrder Load (4.7ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mUserCardLog Load (36.5ms)[0m  [1m[34mSELECT  `user_card_logs`.* FROM `user_card_logs` WHERE `user_card_logs`.`user_card_id` = 1 ORDER BY `user_card_logs`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 LIMIT 1[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCoupon Load (23.2ms)[0m  [1m[34mSELECT  `coupons`.* FROM `coupons` WHERE `coupons`.`user_id` = 1 ORDER BY `coupons`.`id` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mCouponList Load (3.2ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendered collection of coupons/_coupon.html.slim [1 times] (30.2ms)
  Rendered users/show.html.slim within layouts/application (172.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (230.8ms)
Completed 200 OK in 988ms (Views: 698.9ms | ActiveRecord: 198.3ms)


Started GET "/users/1/user_cards/1/charge" for 127.0.0.1 at 2017-05-26 05:50:24 -0700
Processing by UserCardsController#charge as HTML
  Parameters: {"user_id"=>"1", "id"=>"1"}
  [1m[36mWorker Load (3.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (41.1ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering user_cards/charge.html.slim within layouts/application
  Rendered user_cards/charge.html.slim within layouts/application (42.3ms)
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (88.8ms)
Completed 200 OK in 661ms (Views: 569.9ms | ActiveRecord: 70.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-05-26 05:52:26 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (4.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (27.2ms)
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (254.8ms)
Completed 200 OK in 723ms (Views: 695.8ms | ActiveRecord: 17.3ms)


Started GET "/prices" for 127.0.0.1 at 2017-05-26 05:52:29 -0700
Processing by PricesController#index as HTML
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering prices/index.html.slim within layouts/application
  [1m[36mCategory Load (1.6ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered prices/index.html.slim within layouts/application (20.2ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (43.7ms)
Completed 200 OK in 384ms (Views: 372.1ms | ActiveRecord: 6.3ms)


Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 05:52:31 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (5.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (5.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (13.6ms)
  Rendered coupon_lists/index.html.slim within layouts/application (39.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (48.7ms)
Completed 200 OK in 379ms (Views: 361.4ms | ActiveRecord: 12.0ms)


Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 05:54:07 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (38.7ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (57.6ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (69.9ms)
Completed 200 OK in 529ms (Views: 508.8ms | ActiveRecord: 12.6ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 05:54:09 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (1.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.2ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (17.6ms)
  [1m[36mOrderPromotion Load (44.3ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (1.3ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (11.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (28.2ms)
  Rendered coupon_lists/show.html.slim within layouts/application (143.9ms)
  [1m[36mRole Load (52.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (6.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (180.3ms)
Completed 200 OK in 780ms (Views: 641.8ms | ActiveRecord: 128.7ms)


Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 05:54:13 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (0.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.1ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (22.4ms)
  Rendered order_promotions/new.html.slim within layouts/application (34.3ms)
Completed 500 Internal Server Error in 63ms (ActiveRecord: 1.8ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333478003520'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333469437600'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (13.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (9.0ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (58.4ms)
Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 05:57:18 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.7ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (39.4ms)
  Rendered order_promotions/new.html.slim within layouts/application (55.2ms)
Completed 500 Internal Server Error in 201ms (ActiveRecord: 13.8ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333454892500'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333453334620'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (32.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (26.5ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (141.0ms)
Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 05:58:56 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (4.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.2ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (8.0ms)
  Rendered order_promotions/new.html.slim within layouts/application (17.1ms)
Completed 500 Internal Server Error in 280ms (ActiveRecord: 7.8ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333420643840'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333421023220'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (72.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (8.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (258.9ms)
Started GET "/coupon_lists" for 127.0.0.1 at 2017-05-26 06:00:40 -0700
Processing by CouponListsController#index as HTML
  [1m[36mWorker Load (5.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering coupon_lists/index.html.slim within layouts/application
  [1m[36mCouponList Load (3.1ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` ORDER BY `coupon_lists`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered collection of coupon_lists/_coupon_list.html.slim [1 times] (25.1ms)
  Rendered coupon_lists/index.html.slim within layouts/application (55.6ms)
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (770.9ms)
Completed 200 OK in 1801ms (Views: 1751.9ms | ActiveRecord: 26.5ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:00:43 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:00:43 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 06:00:45 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.8ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (77.3ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (107.7ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (27.0ms)
Completed 200 OK in 686ms (Views: 627.3ms | ActiveRecord: 5.6ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 06:00:47 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (16.2ms)
  [1m[36mOrderPromotion Load (20.4ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (4.9ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (13.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (76.7ms)
  Rendered coupon_lists/show.html.slim within layouts/application (193.9ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (45.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (11.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (304.1ms)
Completed 200 OK in 936ms (Views: 829.3ms | ActiveRecord: 101.0ms)


Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 06:00:49 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (5.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.4ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (38.6ms)
  Rendered order_promotions/new.html.slim within layouts/application (59.3ms)
Completed 500 Internal Server Error in 105ms (ActiveRecord: 8.2ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333419394260'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333419477640'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (12.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (81.6ms)
Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 06:00:52 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.1ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (9.9ms)
  [1m[36mOrderPromotion Load (0.6ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (5.1ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (20.7ms)
  Rendered coupon_lists/show.html.slim within layouts/application (145.1ms)
  [1m[36mRole Load (4.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (184.0ms)
Completed 200 OK in 1209ms (Views: 1164.4ms | ActiveRecord: 22.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:00:54 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:00:57 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:00:57 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/promotion_rules/new" for 127.0.0.1 at 2017-05-26 06:00:59 -0700
Processing by PromotionRulesController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.5ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering promotion_rules/new.html.slim within layouts/application
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  Rendered promotion_rules/_form.html.slim (65.9ms)
  Rendered promotion_rules/new.html.slim within layouts/application (79.9ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (78.0ms)
Completed 200 OK in 583ms (Views: 547.6ms | ActiveRecord: 15.5ms)


Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 06:01:07 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (2.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (23.4ms)
  Rendered order_promotions/new.html.slim within layouts/application (32.5ms)
Completed 500 Internal Server Error in 73ms (ActiveRecord: 2.4ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333419499780'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333419611100'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (7.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.2ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (55.1ms)
Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 06:03:18 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (1.7ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (25.9ms)
  Rendered order_promotions/new.html.slim within layouts/application (49.7ms)
Completed 500 Internal Server Error in 222ms (ActiveRecord: 19.3ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: = simple_form_for([@coupon_list, @order_promotion]) do |f|
    2:   = f.error_notification
    3: 
    4:   .form-inputs
  
app/views/order_promotions/_form.html.slim:1:in `_app_views_order_promotions__form_html_slim__661087876822332494_70333418346300'
app/views/order_promotions/new.html.slim:3:in `_app_views_order_promotions_new_html_slim___3154604898213795834_70333418832260'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (41.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (19.5ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (7.6ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (164.2ms)
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:03:49 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:03:50 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/coupon_lists/1/edit" for 127.0.0.1 at 2017-05-26 06:03:52 -0700
Processing by CouponListsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.5ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/edit.html.slim within layouts/application
  Rendered coupon_lists/_form.html.slim (57.7ms)
  Rendered coupon_lists/edit.html.slim within layouts/application (83.3ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (905.4ms)
Completed 200 OK in 2893ms (Views: 2749.8ms | ActiveRecord: 35.5ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 06:03:57 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (3.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (10.0ms)
  [1m[36mOrderPromotion Load (16.6ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of templates [0 times] (0.0ms)
  [1m[36mPromotionRule Load (0.4ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (16.8ms)
  Rendered coupon_lists/show.html.slim within layouts/application (236.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (10.2ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (83.6ms)
Completed 200 OK in 669ms (Views: 614.1ms | ActiveRecord: 49.4ms)


Started GET "/coupon_lists/1/order_promotions/new" for 127.0.0.1 at 2017-05-26 06:04:01 -0700
Processing by OrderPromotionsController#new as HTML
  Parameters: {"coupon_list_id"=>"1"}
  [1m[36mWorker Load (6.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.3ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering order_promotions/new.html.slim within layouts/application
  Rendered order_promotions/_form.html.slim (50.4ms)
  Rendered order_promotions/new.html.slim within layouts/application (66.2ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (53.4ms)
Completed 200 OK in 503ms (Views: 427.7ms | ActiveRecord: 49.5ms)


Started POST "/coupon_lists/1/order_promotions" for 127.0.0.1 at 2017-05-26 06:04:10 -0700
Processing by OrderPromotionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RddIz8XATSk1KC/iJIgOznkXLU8BPiNWHYiAekKAPdvIBrb88ztwr8XImb4LzU//8HKMeeBFnfjXz56IzfYhFg==", "order_promotion"=>{"kind"=>"0", "premise"=>"100", "discount"=>"10"}, "commit"=>"Create Order promotion", "coupon_list_id"=>"1"}
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (0.9ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (97.1ms)[0m  [1m[32mINSERT INTO `order_promotions` (`kind`, `discount`, `premise`, `coupon_list_id`, `created_at`, `updated_at`) VALUES (0, 10.0, 100.0, 1, '2017-05-26 06:04:10', '2017-05-26 06:04:10')[0m
  [1m[35m (79.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/coupon_lists/1
Completed 302 Found in 241ms (ActiveRecord: 183.6ms)


Started GET "/coupon_lists/1" for 127.0.0.1 at 2017-05-26 06:04:10 -0700
Processing by CouponListsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (7.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCouponList Load (2.4ms)[0m  [1m[34mSELECT  `coupon_lists`.* FROM `coupon_lists` WHERE `coupon_lists`.`id` = 1 LIMIT 1[0m
  Rendering coupon_lists/show.html.slim within layouts/application
  Rendered coupon_lists/_block.html.slim (12.2ms)
  [1m[36mOrderPromotion Load (0.5ms)[0m  [1m[34mSELECT `order_promotions`.* FROM `order_promotions` WHERE `order_promotions`.`coupon_list_id` = 1[0m
  Rendered collection of order_promotions/_order_promotion.html.slim [1 times] (36.6ms)
  [1m[36mPromotionRule Load (5.6ms)[0m  [1m[34mSELECT `promotion_rules`.* FROM `promotion_rules` WHERE `promotion_rules`.`coupon_list_id` = 1[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_promotion_rules` ON `cities`.`id` = `cities_promotion_rules`.`city_id` WHERE `cities_promotion_rules`.`promotion_rule_id` = 1[0m
  Rendered collection of promotion_rules/_promotion_rule.html.slim [1 times] (36.1ms)
  Rendered coupon_lists/show.html.slim within layouts/application (160.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (7.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (3.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (199.9ms)
Completed 200 OK in 1192ms (Views: 1146.8ms | ActiveRecord: 31.6ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:04:11 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:04:12 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:04:12 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 06:10:24 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (16.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (12.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (24.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (92.0ms)
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (9.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (5.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (169.1ms)
Completed 200 OK in 1076ms (Views: 971.6ms | ActiveRecord: 72.8ms)


Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 06:10:26 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (9.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (51.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (125.4ms)
Completed 200 OK in 605ms (Views: 578.3ms | ActiveRecord: 15.6ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 06:10:37 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (1.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (6.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (80.7ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (22.1ms)
Completed 200 OK in 462ms (Views: 436.7ms | ActiveRecord: 21.7ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 06:11:05 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (6.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (252.1ms)
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (444.7ms)
Completed 200 OK in 1490ms (Views: 1349.7ms | ActiveRecord: 41.9ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:11:09 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:11:09 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 06:11:09 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (116.1ms)
Completed 500 Internal Server Error in 148ms (ActiveRecord: 1.8ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for @worker,method: :put do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333364096100'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (64.4ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (6.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (6.4ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (312.3ms)
Started GET "/workers" for 127.0.0.1 at 2017-05-26 06:11:15 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (10.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (1.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (79.0ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (6.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (78.4ms)
Completed 200 OK in 1059ms (Views: 1009.0ms | ActiveRecord: 28.3ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:11:16 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:11:18 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:11:18 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 06:11:48 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (0.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 400 Bad Request in 24ms (ActiveRecord: 1.4ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: worker):
  
app/controllers/workers_controller.rb:82:in `worker_params'
app/controllers/workers_controller.rb:39:in `reset_password'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (13.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (56.2ms)
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:11:57 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:11:57 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 06:12:12 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (6.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (2.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (3.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (294.1ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (690.1ms)
Completed 200 OK in 2204ms (Views: 2169.2ms | ActiveRecord: 29.7ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:12:15 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:12:18 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:12:18 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 06:12:20 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
Completed 400 Bad Request in 6ms (ActiveRecord: 1.8ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: worker):
  
app/controllers/workers_controller.rb:82:in `worker_params'
app/controllers/workers_controller.rb:39:in `reset_password'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (12.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (84.3ms)
Started GET "/workers" for 127.0.0.1 at 2017-05-26 06:12:21 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (5.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (3.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (1.5ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (87.5ms)
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (119.7ms)
Completed 200 OK in 1110ms (Views: 1081.6ms | ActiveRecord: 22.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:12:23 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:12:26 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:12:26 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 06:17:07 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (9.1ms)
Completed 500 Internal Server Error in 53ms (ActiveRecord: 0.5ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333526263280'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (17.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (10.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (372.0ms)
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:17:14 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:17:14 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 06:19:38 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (0.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (398.2ms)
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (514.4ms)
Completed 200 OK in 1921ms (Views: 1844.3ms | ActiveRecord: 32.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:19:40 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:19:44 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:19:44 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/2/reset_password" for 127.0.0.1 at 2017-05-26 06:19:45 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (3.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (32.9ms)
Completed 500 Internal Server Error in 58ms (ActiveRecord: 3.3ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333525436260'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (35.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (134.2ms)
Started GET "/workers" for 127.0.0.1 at 2017-05-26 06:20:50 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (0.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (1.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (6.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (106.1ms)
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (205.4ms)
Completed 200 OK in 1522ms (Views: 1487.7ms | ActiveRecord: 21.1ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:20:51 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:20:54 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:20:54 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/3/reset_password" for 127.0.0.1 at 2017-05-26 06:20:56 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"3"}
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (21.8ms)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 1.8ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.association :roles, as: :check_boxes
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333416461720'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (14.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (53.5ms)
Started GET "/workers" for 127.0.0.1 at 2017-05-26 06:21:02 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (1.1ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (5.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (91.9ms)
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (120.5ms)
Completed 200 OK in 1503ms (Views: 1461.4ms | ActiveRecord: 21.9ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:21:03 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:21:07 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:21:07 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/1/reset_password" for 127.0.0.1 at 2017-05-26 06:22:31 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (5.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (27.5ms)
Completed 500 Internal Server Error in 115ms (ActiveRecord: 5.0ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333456610160'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (40.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (138.3ms)
Started GET "/workers/1/reset_password" for 127.0.0.1 at 2017-05-26 06:26:28 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (52.1ms)
Completed 500 Internal Server Error in 128ms (ActiveRecord: 0.4ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333371844200'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (11.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (132.8ms)
Started GET "/workers/1/reset_password" for 127.0.0.1 at 2017-05-26 06:27:12 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (28.6ms)
Completed 500 Internal Server Error in 93ms (ActiveRecord: 0.8ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333367439860'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (23.1ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (12.8ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (152.7ms)
Started GET "/workers/1/reset_password" for 127.0.0.1 at 2017-05-26 06:28:22 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (2.3ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (65.7ms)
Completed 500 Internal Server Error in 239ms (ActiveRecord: 2.3ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333526773240'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (42.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (11.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (247.4ms)
Started GET "/workers/" for 127.0.0.1 at 2017-05-26 06:28:31 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (3.2ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (2.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (1.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered workers/index.html.slim within layouts/application (384.6ms)
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (3.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (670.3ms)
Completed 200 OK in 1907ms (Views: 1855.2ms | ActiveRecord: 45.0ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:28:34 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:28:34 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers/2/reset_password" for 127.0.0.1 at 2017-05-26 06:30:59 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (3.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (50.4ms)
Completed 500 Internal Server Error in 89ms (ActiveRecord: 3.6ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333364694800'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (52.7ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (13.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (276.0ms)
Started GET "/workers/2/reset_password" for 127.0.0.1 at 2017-05-26 06:39:54 -0700
Processing by WorkersController#reset_password as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (1.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/reset_password.html.slim within layouts/application
  Rendered workers/reset_password.html.slim within layouts/application (16.3ms)
Completed 500 Internal Server Error in 110ms (ActiveRecord: 1.8ms)


  
ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    1: h1 Reset Password
    2: 
    3: = simple_form_for(@worker) do |f|
    4:   = f.error_notification
    5:   .form-inputs
    6:     = f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length)
  
app/views/workers/reset_password.html.slim:3:in `_app_views_workers_reset_password_html_slim___251029379976931298_70333455976920'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (22.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (11.6ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (13.8ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (170.1ms)
Started GET "/cable" for 127.0.0.1 at 2017-05-26 06:40:11 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 06:40:11 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/workers" for 127.0.0.1 at 2017-05-26 18:50:22 -0700
  [1m[36mActiveRecord::SchemaMigration Load (46.5ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by WorkersController#index as HTML
Completed 401 Unauthorized in 40ms (ActiveRecord: 0.0ms)


Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-26 18:50:23 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (19.2ms)
  Rendered devise/sessions/new.html.slim within layouts/application (241.7ms)
Started GET "/workers" for 127.0.0.1 at 2017-05-26 18:50:23 -0700
Processing by WorkersController#index as HTML
Completed 401 Unauthorized in 5ms (ActiveRecord: 0.0ms)


Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-26 18:50:24 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (7.0ms)
  Rendered devise/sessions/new.html.slim within layouts/application (155.0ms)
Completed 500 Internal Server Error in 3379ms (ActiveRecord: 0.0ms)


  
ActionView::Template::Error (can't add a new key into hash during iteration):
     5:       | åŽå°
     6:     = csrf_meta_tags
     7:     = stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload'
     8:     = javascript_include_tag 'application', 'data-turbolinks-track': 'reload'
     9:   body
    10:     = render "layouts/menu"
    11: 
  
app/views/layouts/application.html.slim:8:in `_app_views_layouts_application_html_slim__3018962881488153024_70309028723860'
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendered layouts/_menu.slim (130.9ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
Completed 200 OK in 5070ms (Views: 5032.4ms | ActiveRecord: 19.1ms)


  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (29.3ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.2ms)
  Rendering /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.9ms)
  Rendered /home/user/.rvm/gems/ruby-2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (260.4ms)
Started GET "/workers/sign_in" for 127.0.0.1 at 2017-05-26 18:51:18 -0700
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (14.7ms)
  Rendered devise/sessions/new.html.slim within layouts/application (55.6ms)
  Rendered layouts/_menu.slim (60.1ms)
Completed 200 OK in 817ms (Views: 813.1ms | ActiveRecord: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2017-05-26 18:51:21 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 18:51:21 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 19:16:00 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 19:16:01 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 19:16:01 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started POST "/workers/sign_in" for 127.0.0.1 at 2017-05-26 19:16:11 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"pYrb8h+yi1Ry2qgdYQ55S1QZD7WG92IvTect8Vnrb4w/tHGzyjo2KLWfKBcCY3l92HcfLYcb+LAlVoiL7Do/Kw==", "worker"=>{"email"=>"16126240@bjtu.edu.cn", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mWorker Load (27.0ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`email` = '16126240@bjtu.edu.cn' ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (31.9ms)[0m  [1m[33mUPDATE `workers` SET `current_sign_in_at` = '2017-05-26 19:16:12', `last_sign_in_at` = '2017-05-26 02:14:10', `sign_in_count` = 3, `updated_at` = '2017-05-26 19:16:12' WHERE `workers`.`id` = 2[0m
  [1m[35m (59.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (11.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
Redirected to http://localhost:3000/workers
Completed 302 Found in 1238ms (ActiveRecord: 149.6ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-26 19:16:13 -0700
Processing by WorkersController#index as HTML
  [1m[36mWorker Load (2.5ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering workers/index.html.slim within layouts/application
  [1m[36mWorker Load (5.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` ORDER BY `workers`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2[0m
  [1m[36mCity Load (3.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 3[0m
  [1m[36mCity Load (5.7ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 3[0m
  Rendered workers/index.html.slim within layouts/application (343.4ms)
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2 ORDER BY `cities`.`id` ASC LIMIT 1[0m  [["worker_id", 2], ["LIMIT", 1]]
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m  [["worker_id", 2]]
  Rendered layouts/_menu.slim (548.7ms)
Completed 200 OK in 2623ms (Views: 2559.6ms | ActiveRecord: 34.8ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 19:16:15 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 19:16:16 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 19:16:16 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
Started GET "/categories" for 127.0.0.1 at 2017-05-26 19:16:33 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (2.9ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (7.7ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (70.6ms)
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (5.7ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (2.4ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (7.1ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (166.5ms)
Completed 200 OK in 1150ms (Views: 1102.3ms | ActiveRecord: 31.9ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-05-26 19:16:38 -0700
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCategory Load (10.6ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT `products`.* FROM `products` WHERE `products`.`category_id` = 1[0m
  Rendered categories/show.html.slim within layouts/application (88.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (23.6ms)
Completed 200 OK in 403ms (Views: 327.8ms | ActiveRecord: 26.1ms)


Started GET "/categories" for 127.0.0.1 at 2017-05-26 19:16:48 -0700
Processing by CategoriesController#index as HTML
  [1m[36mWorker Load (1.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCategory Load (4.1ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` ORDER BY `categories`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered categories/index.html.slim within layouts/application (59.1ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (56.6ms)
Completed 200 OK in 494ms (Views: 483.0ms | ActiveRecord: 7.5ms)


Started GET "/price_rules" for 127.0.0.1 at 2017-05-26 19:16:56 -0700
Processing by PriceRulesController#index as HTML
  [1m[36mWorker Load (0.8ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/index.html.slim within layouts/application
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (29.3ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1[0m
  [1m[36mPriceRule Load (4.0ms)[0m  [1m[34mSELECT `price_rules`.* FROM `price_rules` WHERE `price_rules`.`city_id` = 1 AND `price_rules`.`category_id` = 1[0m
  [1m[36mCategory Load (1.1ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendered price_rules/index.html.slim within layouts/application (145.3ms)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (31.8ms)
Completed 200 OK in 414ms (Views: 322.0ms | ActiveRecord: 63.5ms)


Started GET "/price_rules/new?category=1" for 127.0.0.1 at 2017-05-26 19:17:01 -0700
Processing by PriceRulesController#new as HTML
  Parameters: {"category"=>"1"}
  [1m[36mWorker Load (2.7ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  Rendering price_rules/new.html.slim within layouts/application
  [1m[36mCategory Load (3.9ms)[0m  [1m[34mSELECT `categories`.* FROM `categories`[0m
  Rendered price_rules/_form.html.slim (58.6ms)
  Rendered price_rules/new.html.slim within layouts/application (90.9ms)
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (41.1ms)
Completed 200 OK in 374ms (Views: 358.2ms | ActiveRecord: 8.4ms)


Started POST "/price_rules" for 127.0.0.1 at 2017-05-26 19:17:10 -0700
Processing by PriceRulesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"X8yCOJTkvofD0zJjTcYfsbKLQrStqEf0oht4jqrg0/RcPdhUC4rG0RYeLIMEfeoyplnoYWl+7UA4Gr0CCRTX8w==", "price_rule"=>{"grade"=>"2", "category_id"=>"1", "from_date(1i)"=>"2017", "from_date(2i)"=>"5", "from_date(3i)"=>"27"}, "commit"=>"Create Price rule"}
  [1m[36mWorker Load (0.4ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (2.1ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (16.2ms)[0m  [1m[32mINSERT INTO `price_rules` (`grade`, `city_id`, `category_id`, `from_date`, `created_at`, `updated_at`) VALUES (2, 1, 1, '2017-05-27', '2017-05-26 19:17:10', '2017-05-26 19:17:10')[0m
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/price_rules/2
Completed 302 Found in 82ms (ActiveRecord: 22.0ms)


Started GET "/price_rules/2" for 127.0.0.1 at 2017-05-26 19:17:10 -0700
Processing by PriceRulesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mWorker Load (7.6ms)[0m  [1m[34mSELECT  `workers`.* FROM `workers` WHERE `workers`.`id` = 2 ORDER BY `workers`.`id` ASC LIMIT 1[0m
  [1m[36mPriceRule Load (13.6ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`id` = 2 LIMIT 1[0m
  [1m[36mCategory Load (1.9ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  Rendering price_rules/show.html.slim within layouts/application
  [1m[36mCity Load (7.9ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPrice Load (9.6ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` INNER JOIN `products` ON `prices`.`product_id` = `products`.`id` WHERE `products`.`category_id` = 1 LIMIT 10 OFFSET 0[0m
  [1m[36mProduct Load (2.8ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 2 LIMIT 1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 3 LIMIT 1[0m
  [1m[36mProduct Load (6.8ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 4 LIMIT 1[0m
  Rendered price_rules/show.html.slim within layouts/application (164.6ms)
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'yunying') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT `roles`.* FROM `roles` INNER JOIN `workers_roles` ON `roles`.`id` = `workers_roles`.`role_id` WHERE `workers_roles`.`worker_id` = 2 AND (((roles.name = 'fenchengshi') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["worker_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (13.6ms)[0m  [1m[34mSELECT `cities`.* FROM `cities` INNER JOIN `cities_workers` ON `cities`.`id` = `cities_workers`.`city_id` WHERE `cities_workers`.`worker_id` = 2[0m
  Rendered layouts/_menu.slim (122.7ms)
Completed 200 OK in 1211ms (Views: 1081.5ms | ActiveRecord: 80.4ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 19:17:11 -0700
KefuChannel stopped streaming from kefu_channel
Started GET "/cable" for 127.0.0.1 at 2017-05-26 19:17:12 -0700
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-05-26 19:17:12 -0700
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
KefuChannel is transmitting the subscription confirmation
KefuChannel is streaming from kefu_channel
